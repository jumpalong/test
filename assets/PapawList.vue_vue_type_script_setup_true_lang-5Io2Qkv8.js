import{ag as M,g as R,u as V,$ as z}from"./ProvideEventLine-XLCKst21.js";import{_ as j,o as a,B as u,E as g,f as _,L as y,k as c,R as E,r as b,q as s,m as d,w as v,z as $,n as w,$ as C,A as k,F as m,C as A,y as F,am as L,U as I}from"./index-Bp8Ru9nj.js";import{i as q,j as D,k as H,d as T}from"./Papaw-R9nRzszD.js";import{N as U}from"./Icon-BUbDyWQc.js";import{b as O}from"./Button-DF3Ei97P.js";const W={},J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},G=g("g",{fill:"none"},[g("path",{d:"M9.516 6a.5.5 0 0 0 0 1h2.777l-4.147 4.146a.5.5 0 0 0 .708.708L13 7.707v2.777a.5.5 0 0 0 1 0V6.5a.5.5 0 0 0-.5-.5H9.516zm3.25 11a2.5 2.5 0 0 0 2.47-2.11A2.501 2.501 0 0 0 17 12.5v-7A2.5 2.5 0 0 0 14.5 3h-7a2.501 2.501 0 0 0-2.4 1.797A2.5 2.5 0 0 0 3 7.266V13.5A3.5 3.5 0 0 0 6.5 17h6.266zM4 7.266A1.5 1.5 0 0 1 5 5.85V12.5A2.5 2.5 0 0 0 7.5 15h6.68a1.5 1.5 0 0 1-1.414 1H6.5A2.5 2.5 0 0 1 4 13.5V7.266zM7.5 4h7A1.5 1.5 0 0 1 16 5.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 6 12.5v-7A1.5 1.5 0 0 1 7.5 4z",fill:"currentColor"})],-1),K=[G];function Q(o,l){return a(),u("svg",J,K)}const X=j(W,[["render",Q]]),Y=_({__name:"NewMessage",setup(o){let l=q();const e=l??D({jumpList:y([])}),t=c(()=>e.jumpList.value);function n(){const p=t.value.shift();p&&p()}const i=c(()=>t.value.length>0),{show:r,hidden:f,transitionActive:B,safeActive:h,duration:P}=M(600);return E(()=>{i.value?r():f()}),(p,re)=>{const S=U,x=O;return a(),u(m,null,[b(p.$slots,"default"),s(h)&&!s(l)?(a(),d(x,{key:0,class:"fixed bottom-3 right-4 px-2",style:C({transform:s(B)?"translate(0%,0%)":"translate(150%,0%)",transition:`transform ${s(P)}ms ease`}),quaternary:"",type:"primary",size:"large",round:"",onClick:n},{default:v(()=>[g("span",null,$(s(t).length),1),w(S,{size:30},{default:v(()=>[w(X)]),_:1})]),_:1},8,["style"])):k("",!0)],64)}}}),[ve,Z]=R(o=>({useTree:o})),ee={key:0,class:"w-full flex justify-center items-center py-2"},te=5,ne=_({__name:"PapawTreeReply",props:{event:{},noTree:{type:Boolean}},setup(o){logger.debug();const l=o,e=c(()=>l.event.id),t=V(z),n=c(()=>t.textEventBeltline({limit:te,filters:[{"#e":[e.value],kinds:[1,30023]}]})),i=c(()=>n.value.getList()),r=H();E(()=>{r!=null&&r.parents.value.has(e.value)&&r.focusEvent.value&&n.value.pushEvent(r.focusEvent.value)});const f=c(()=>i.value.length??0);return(B,h)=>{const P=O;return a(),u(m,null,[(a(!0),u(m,null,A(s(i),p=>(a(),d(N,{event:p},null,8,["event"]))),256)),s(f)>0?(a(),u("div",ee,[w(P,{class:"w-full",text:"",onClick:h[0]||(h[0]=()=>s(n).feat.load())},{default:v(()=>[F($(B.t("load_more")),1)]),_:1})])):k("",!0)],64)}}}),[se,ae]=R(o=>({withEventSet:o})),oe=_({__name:"PapawTreeWithEvent",props:{id:{}},setup(o){const l=o,{id:e}=L(l),t=y(!1),n=ae();return n?t.value=!n.withEventSet.value.has(e.value):(se(y(new Set().add(e.value))),t.value=!0),t.value&&(n==null||n.withEventSet.value.add(e.value)),(i,r)=>(a(),u(m,null,[s(t)?b(i.$slots,"default",{key:0}):k("",!0),b(i.$slots,"else")],64))}}),N=_({__name:"PapawTree",props:{event:{},deleteEvent:{},withPapawOptionsButtons:{type:Boolean,default:!0}},setup(o){var n;const l=o,{event:e}=L(l),t=y();return(n=t.value)==null||n.scrollToPapaw(),(i,r)=>(a(),d(oe,{id:s(e).id},{default:v(()=>[w(T,{disabledReply:"",event:s(e),ref:s(t),"onUpdate:ref":r[0]||(r[0]=f=>I(t)?t.value=f:null)},{reply:v(()=>[w(ne,{event:s(e)},null,8,["event"])]),_:1},8,["event"])]),_:1},8,["id"]))}}),le=_({__name:"MaybeTreePapaw",props:{event:{},withPapawOptionsButtons:{type:Boolean},disabledReply:{type:Boolean}},setup(o){const{useTree:l}=Z()??{};return(e,t)=>s(l)?(a(),d(N,{key:0,event:e.event,withPapawOptionsButtons:e.withPapawOptionsButtons},null,8,["event","withPapawOptionsButtons"])):(a(),d(T,{key:1,withPapawOptionsButtons:e.withPapawOptionsButtons,event:e.event,disabledReply:e.disabledReply},null,8,["withPapawOptionsButtons","event","disabledReply"]))}}),we=_({__name:"PapawList",props:{eventList:{},withPapawOptionsButtons:{type:Boolean},disabledReply:{type:Boolean}},emits:["eventDeletion"],setup(o,{emit:l}){return(e,t)=>(a(),d(Y,null,{default:v(()=>[(a(!0),u(m,null,A(e.eventList,n=>(a(),u("div",{key:n.id},[w(le,{event:n,withPapawOptionsButtons:e.withPapawOptionsButtons,disabledReply:e.disabledReply},null,8,["event","withPapawOptionsButtons","disabledReply"])]))),128))]),_:1}))}});export{we as _,N as a,ne as b};
