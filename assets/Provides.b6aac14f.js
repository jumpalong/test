var Qr=Object.defineProperty;var Xr=(t,e,n)=>e in t?Qr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var w=(t,e,n)=>(Xr(t,typeof e!="symbol"?e+"":e,n),n);import{f as q,N,h as y,p as ce,F as fe,aF as ge,c as O,a as B,u as Pe,j as Ve,dU as Gn,k as Q,g as Ie,dV as Zr,bd as ei,bc as ti,L as Kn,P as Ce,dW as ni,bh as un,b as M,d as ee,dX as Yn,dY as ri,a4 as Jn,dZ as ii,i as Qn,_ as zt,d_ as ai,ar as ne,aL as oi,o as z,l as Re,w as R,m as T,n as C,au as se,x as D,z as G,C as j,v as J,y as Z,A as Xn,r as Le,dv as si,a8 as Zn,ao as li,d$ as ci,ae as fn,a9 as er,ac as te,e0 as ui,ad as nt,a7 as ze,aj as fi,a6 as tr,e1 as di,b$ as hi,e2 as vi,e3 as gi,ak as $e,bl as pi,dT as yi,af as mi,aa as _i,c1 as Ut,ap as bi}from"./index.8f62a545.js";import{g as nr}from"./CategorizedBookmarksSynchronizer.87c6986d.js";import{r as wi,s as Si,j as Ai,k as Ei,P as Ci,t as rr}from"./Papaw.635c4eff.js";import{P as Ri,T as Ti,I as Oi,S as xi,J as Bi,M as we,N as re,K as rt,L as An,O as ir,U as ar,Q as or,V as Pi,W as sr,X as Ii,Y as Li,Z as Ni,_ as Di,$ as Mi,a0 as En,a1 as $i,a2 as qt,a3 as Wt,a4 as ji,a5 as ki,a6 as Fi,a7 as zi,a8 as Me,a9 as Cn,aa as Ui,ab as qi,ac as Wi,ad as Vi,ae as Hi,af as Gi,ag as Ki,ah as Yi,ai as Ji,aj as Qi,ak as Xi,q as Zi,k as de,l as he,p as yt,R as it,al as Te,am as Oe,an as Vt,i as F,j as U,ao as ea,m as ve,ap as ta,aq as na,ar as Rn,as as ra,at as ia,au as Je,n as lr,av as aa,aw as pe,ax as ye,ay as oa,az as sa,z as la,aA as ca,aB as ua}from"./use.b23b6c29.js";import{a as fa}from"./Checkbox.fc71365b.js";import{_ as at}from"./Space.32f062de.js";import{a as da,_ as ha}from"./ListItem.5a517004.js";import{_ as Ht,a as va}from"./DrawerProvide.vue_vue_type_script_setup_true_lang.da186b5d.js";import{S as cr}from"./Scrollbar.c7e90ffe.js";import{_ as ga}from"./Input.90533fe2.js";import{N as pa,_ as ur}from"./Button.22997a19.js";import{p as ya}from"./LoadProgress.a8e5dee8.js";import{T as p,n as dn,a as He,r as ot,c as be,d as ma,i as Ee}from"./nostr.c03670ae.js";import{a as _a}from"./nostrApiUse.43d55506.js";import{_ as Tn}from"./PubkeyLink.vue_vue_type_script_setup_true_lang.1d1b2ee1.js";import{a as ba,_ as wa}from"./RadioGroup.b3ff4b7f.js";import{c as hn,S as ie,a as Ne}from"./Staff.e039c64f.js";import{c as st}from"./createEventSourceTracers.1da380d1.js";import{c as fr}from"./ContentBlacklistView.1f898a24.js";import{b as Sa,g as On}from"./nostr.0043d5e6.js";import{n as Aa,v as dr,d as Ea}from"./nostr.ad89cf30.js";import{a as Ca,N as Ra,P as Ta,b as Oa,i as xa,c as Ba,L as Pa}from"./injectWindowNostr.759c669e.js";import{C as xn,N as Ia}from"./NostrConnect.ef90b4f4.js";import{b as De}from"./NaddrLink.vue_vue_type_script_setup_true_lang.e9edc141.js";import{S as La}from"./SynchronizerAbstract.b6083252.js";import{g as mt}from"./error.469adc75.js";import{g as Na,s as It,N as Se}from"./login.0b8718d8.js";import{k as Da,l as Ma,h as $a}from"./Upload.39a290a3.js";import{_ as ja}from"./Upload.b5c9ebfa.js";import{d as ka,N as Fa,a as za,_ as Ua,u as qa,b as Wa}from"./Modal.2a8cd6ad.js";import{k as hr}from"./Popover.6590eae2.js";import{a as Va,d as Ha,b as Ga}from"./composables.10bdf172.js";import{o as vn}from"./omit.ef9bf2ca.js";import{c as gn,f as Ka,N as Ya}from"./Scrollbar.8d5a1903.js";import{u as pn}from"./use-css-vars-class.1ada0b07.js";import{e as Ja,i as Qa,N as Xa,d as Za}from"./Loading.0b953150.js";import{k as eo}from"./keysOf.8a025f7e.js";import{u as vr}from"./use-rtl.6d35c504.js";import{c as ae}from"./create-key.7b548031.js";import{a as to}from"./index.62f1e1b0.js";import{r as me}from"./render.568a1ab1.js";import{N as gr}from"./Icon.1c3d6ebf.js";import{N as pr}from"./Close.dba1bcea.js";import{I as yr,S as mr,W as _r,E as br}from"./Warning.6502c178.js";import{f as no}from"./fade-in-height-expand.cssr.a4865c47.js";const ro=Object.assign(Object.assign({},ka),{onAfterEnter:Function,onAfterLeave:Function,transformOrigin:String,blockScroll:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},internalStyle:[String,Object],maskClosable:{type:Boolean,default:!0},onPositiveClick:Function,onNegativeClick:Function,onClose:Function,onMaskClick:Function}),io=q({name:"DialogEnvironment",props:Object.assign(Object.assign({},ro),{internalKey:{type:String,required:!0},to:[String,Object],onInternalAfterLeave:{type:Function,required:!0}}),setup(t){const e=N(!0);function n(){const{onInternalAfterLeave:u,internalKey:f,onAfterLeave:d}=t;u&&u(f),d&&d()}function r(u){const{onPositiveClick:f}=t;f?Promise.resolve(f(u)).then(d=>{d!==!1&&c()}):c()}function i(u){const{onNegativeClick:f}=t;f?Promise.resolve(f(u)).then(d=>{d!==!1&&c()}):c()}function a(){const{onClose:u}=t;u?Promise.resolve(u()).then(f=>{f!==!1&&c()}):c()}function o(u){const{onMaskClick:f,maskClosable:d}=t;f&&(f(u),d&&c())}function l(){const{onEsc:u}=t;u&&u()}function c(){e.value=!1}function s(u){e.value=u}return{show:e,hide:c,handleUpdateShow:s,handleAfterLeave:n,handleCloseClick:a,handleNegativeClick:i,handlePositiveClick:r,handleMaskClick:o,handleEsc:l}},render(){const{handlePositiveClick:t,handleUpdateShow:e,handleNegativeClick:n,handleCloseClick:r,handleAfterLeave:i,handleMaskClick:a,handleEsc:o,to:l,maskClosable:c,show:s}=this;return y(Ua,{show:s,onUpdateShow:e,onMaskClick:a,onEsc:o,to:l,maskClosable:c,onAfterEnter:this.onAfterEnter,onAfterLeave:i,closeOnEsc:this.closeOnEsc,blockScroll:this.blockScroll,autoFocus:this.autoFocus,transformOrigin:this.transformOrigin,internalAppear:!0,internalDialog:!0},{default:()=>y(Fa,Object.assign({},hr(this.$props,za),{style:this.internalStyle,onClose:r,onNegativeClick:n,onPositiveClick:t}))})}}),ao={injectionKey:String,to:[String,Object]},oo=q({name:"DialogProvider",props:ao,setup(){const t=N([]),e={};function n(l={}){const c=gn(),s=ge(Object.assign(Object.assign({},l),{key:c,destroy:()=>{e[`n-dialog-${c}`].hide()}}));return t.value.push(s),s}const r=["info","success","warning","error"].map(l=>c=>n(Object.assign(Object.assign({},c),{type:l})));function i(l){const{value:c}=t;c.splice(c.findIndex(s=>s.key===l),1)}function a(){Object.values(e).forEach(l=>l.hide())}const o={create:n,destroyAll:a,info:r[0],success:r[1],warning:r[2],error:r[3]};return ce(Va,o),ce(Ha,{clickedRef:qa(64),clickPositionRef:Wa()}),ce(Ga,t),Object.assign(Object.assign({},o),{dialogList:t,dialogInstRefs:e,handleAfterLeave:i})},render(){var t,e;return y(fe,null,[this.dialogList.map(n=>y(io,vn(n,["destroy","style"],{internalStyle:n.style,to:this.to,ref:r=>{r===null?delete this.dialogInstRefs[`n-dialog-${n.key}`]:this.dialogInstRefs[`n-dialog-${n.key}`]=r},internalKey:n.key,onInternalAfterLeave:this.handleAfterLeave}))),(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t)])}}),so=O("loading-bar-container",`
 z-index: 5999;
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 height: 2px;
`,[Ka({enterDuration:"0.3s",leaveDuration:"0.8s"}),O("loading-bar",`
 width: 100%;
 transition:
 max-width 4s linear,
 background .2s linear;
 height: var(--n-height);
 `,[B("starting",`
 background: var(--n-color-loading);
 `),B("finishing",`
 background: var(--n-color-loading);
 transition:
 max-width .2s linear,
 background .2s linear;
 `),B("error",`
 background: var(--n-color-error);
 transition:
 max-width .2s linear,
 background .2s linear;
 `)])]);var Lt=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{s(r.next(u))}catch(f){o(f)}}function c(u){try{s(r.throw(u))}catch(f){o(f)}}function s(u){u.done?a(u.value):i(u.value).then(l,c)}s((r=r.apply(t,e||[])).next())})};function Qe(t,e){return`${e}-loading-bar ${e}-loading-bar--${t}`}const lo=q({name:"LoadingBar",props:{containerStyle:[String,Object]},setup(){const{inlineThemeDisabled:t}=Pe(),{props:e,mergedClsPrefixRef:n}=Ve(Gn),r=N(null),i=N(!1),a=N(!1),o=N(!1),l=N(!1);let c=!1;const s=N(!1),u=Q(()=>{const{loadingBarStyle:_}=e;return _?_[s.value?"error":"loading"]:""});function f(){return Lt(this,void 0,void 0,function*(){i.value=!1,o.value=!1,c=!1,s.value=!1,l.value=!0,yield Ce(),l.value=!1})}function d(_=0,E=80,P="starting"){return Lt(this,void 0,void 0,function*(){yield f(),o.value=!0,a.value=!0,yield Ce();const $=r.value;!$||($.style.maxWidth=`${_}%`,$.style.transition="none",$.offsetWidth,$.className=Qe(P,n.value),$.style.transition="",$.style.maxWidth=`${E}%`)})}function g(){if(c||s.value||!o.value)return;c=!0;const _=r.value;!_||(_.className=Qe("finishing",n.value),_.style.maxWidth="100%",_.offsetWidth,o.value=!1)}function h(){if(!(c||s.value))if(!o.value)d(100,100,"error").then(()=>{s.value=!0;const _=r.value;!_||(_.className=Qe("error",n.value),_.offsetWidth,o.value=!1)});else{s.value=!0;const _=r.value;if(!_)return;_.className=Qe("error",n.value),_.style.maxWidth="100%",_.offsetWidth,o.value=!1}}function A(){i.value=!0}function S(){i.value=!1}function x(){return Lt(this,void 0,void 0,function*(){yield f()})}const v=Ie("LoadingBar","-loading-bar",so,Zr,e,n),m=Q(()=>{const{self:{height:_,colorError:E,colorLoading:P}}=v.value;return{"--n-height":_,"--n-color-loading":P,"--n-color-error":E}}),b=t?pn("loading-bar",void 0,m,e):void 0;return{mergedClsPrefix:n,loadingBarRef:r,started:a,loading:o,entering:i,transitionDisabled:l,start:d,error:h,finish:g,handleEnter:A,handleAfterEnter:S,handleAfterLeave:x,mergedLoadingBarStyle:u,cssVars:t?void 0:m,themeClass:b==null?void 0:b.themeClass,onRender:b==null?void 0:b.onRender}},render(){if(!this.started)return null;const{mergedClsPrefix:t}=this;return y(Kn,{name:"fade-in-transition",appear:!0,onEnter:this.handleEnter,onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave,css:!this.transitionDisabled},{default:()=>{var e;return(e=this.onRender)===null||e===void 0||e.call(this),ei(y("div",{class:[`${t}-loading-bar-container`,this.themeClass],style:this.containerStyle},y("div",{ref:"loadingBarRef",class:[`${t}-loading-bar`],style:[this.cssVars,this.mergedLoadingBarStyle]})),[[ti,this.loading||!this.loading&&this.entering]])}})}}),co=Object.assign(Object.assign({},Ie.props),{to:{type:[String,Object,Boolean],default:void 0},containerStyle:[String,Object],loadingBarStyle:{type:Object}}),uo=q({name:"LoadingBarProvider",props:co,setup(t){const e=Ja(),n=N(null),r={start(){var a;e.value?(a=n.value)===null||a===void 0||a.start():Ce(()=>{var o;(o=n.value)===null||o===void 0||o.start()})},error(){var a;e.value?(a=n.value)===null||a===void 0||a.error():Ce(()=>{var o;(o=n.value)===null||o===void 0||o.error()})},finish(){var a;e.value?(a=n.value)===null||a===void 0||a.finish():Ce(()=>{var o;(o=n.value)===null||o===void 0||o.finish()})}},{mergedClsPrefixRef:i}=Pe(t);return ce(ni,r),ce(Gn,{props:t,mergedClsPrefixRef:i}),Object.assign(r,{loadingBarRef:n})},render(){var t,e;return y(fe,null,y(un,{disabled:this.to===!1,to:this.to||"body"},y(lo,{ref:"loadingBarRef",containerStyle:this.containerStyle})),(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t))}}),wr={icon:Function,type:{type:String,default:"info"},content:[String,Number,Function],showIcon:{type:Boolean,default:!0},closable:Boolean,keepAliveOnHover:Boolean,onClose:Function,onMouseenter:Function,onMouseleave:Function},fo=M([O("message-wrapper",`
 margin: var(--n-margin);
 z-index: 0;
 transform-origin: top center;
 display: flex;
 `,[no({overflow:"visible",originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.85)"}})]),O("message",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 margin-bottom .3s var(--n-bezier);
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 flex-wrap: nowrap;
 overflow: hidden;
 max-width: var(--n-max-width);
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-shadow: var(--n-box-shadow);
 `,[ee("content",`
 display: inline-block;
 line-height: var(--n-line-height);
 font-size: var(--n-font-size);
 `),ee("icon",`
 position: relative;
 margin: var(--n-icon-margin);
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 flex-shrink: 0;
 `,[["default","info","success","warning","error","loading"].map(t=>B(`${t}-type`,[M("> *",`
 color: var(--n-icon-color-${t});
 transition: color .3s var(--n-bezier);
 `)])),M("> *",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Qa()])]),ee("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 flex-shrink: 0;
 `,[M("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),M("&:active",`
 color: var(--n-close-icon-color-pressed);
 `)])]),O("message-container",`
 z-index: 6000;
 position: fixed;
 height: 0;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: center;
 `,[B("top",`
 top: 12px;
 left: 0;
 right: 0;
 `),B("top-left",`
 top: 12px;
 left: 12px;
 right: 0;
 align-items: flex-start;
 `),B("top-right",`
 top: 12px;
 left: 0;
 right: 12px;
 align-items: flex-end;
 `),B("bottom",`
 bottom: 4px;
 left: 0;
 right: 0;
 justify-content: flex-end;
 `),B("bottom-left",`
 bottom: 4px;
 left: 12px;
 right: 0;
 justify-content: flex-end;
 align-items: flex-start;
 `),B("bottom-right",`
 bottom: 4px;
 left: 0;
 right: 12px;
 justify-content: flex-end;
 align-items: flex-end;
 `)])]),ho={info:()=>y(yr,null),success:()=>y(mr,null),warning:()=>y(_r,null),error:()=>y(br,null),default:()=>null},vo=q({name:"Message",props:Object.assign(Object.assign({},wr),{render:Function}),setup(t){const{inlineThemeDisabled:e,mergedRtlRef:n}=Pe(t),{props:r,mergedClsPrefixRef:i}=Ve(Yn),a=vr("Message",n,i),o=Ie("Message","-message",fo,ri,r,i),l=Q(()=>{const{type:s}=t,{common:{cubicBezierEaseInOut:u},self:{padding:f,margin:d,maxWidth:g,iconMargin:h,closeMargin:A,closeSize:S,iconSize:x,fontSize:v,lineHeight:m,borderRadius:b,iconColorInfo:_,iconColorSuccess:E,iconColorWarning:P,iconColorError:$,iconColorLoading:H,closeIconSize:X,closeBorderRadius:At,[ae("textColor",s)]:Et,[ae("boxShadow",s)]:Ct,[ae("color",s)]:Rt,[ae("closeColorHover",s)]:Tt,[ae("closeColorPressed",s)]:Ot,[ae("closeIconColor",s)]:xt,[ae("closeIconColorPressed",s)]:Bt,[ae("closeIconColorHover",s)]:Pt}}=o.value;return{"--n-bezier":u,"--n-margin":d,"--n-padding":f,"--n-max-width":g,"--n-font-size":v,"--n-icon-margin":h,"--n-icon-size":x,"--n-close-icon-size":X,"--n-close-border-radius":At,"--n-close-size":S,"--n-close-margin":A,"--n-text-color":Et,"--n-color":Rt,"--n-box-shadow":Ct,"--n-icon-color-info":_,"--n-icon-color-success":E,"--n-icon-color-warning":P,"--n-icon-color-error":$,"--n-icon-color-loading":H,"--n-close-color-hover":Tt,"--n-close-color-pressed":Ot,"--n-close-icon-color":xt,"--n-close-icon-color-pressed":Bt,"--n-close-icon-color-hover":Pt,"--n-line-height":m,"--n-border-radius":b}}),c=e?pn("message",Q(()=>t.type[0]),l,{}):void 0;return{mergedClsPrefix:i,rtlEnabled:a,messageProviderProps:r,handleClose(){var s;(s=t.onClose)===null||s===void 0||s.call(t)},cssVars:e?void 0:l,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender,placement:r.placement}},render(){const{render:t,type:e,closable:n,content:r,mergedClsPrefix:i,cssVars:a,themeClass:o,onRender:l,icon:c,handleClose:s,showIcon:u}=this;l==null||l();let f;return y("div",{class:[`${i}-message-wrapper`,o],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:[{alignItems:this.placement.startsWith("top")?"flex-start":"flex-end"},a]},t?t(this.$props):y("div",{class:[`${i}-message ${i}-message--${e}-type`,this.rtlEnabled&&`${i}-message--rtl`]},(f=go(c,e,i))&&u?y("div",{class:`${i}-message__icon ${i}-message__icon--${e}-type`},y(Xa,null,{default:()=>f})):null,y("div",{class:`${i}-message__content`},me(r)),n?y(pr,{clsPrefix:i,class:`${i}-message__close`,onClick:s,absolute:!0}):null))}});function go(t,e,n){if(typeof t=="function")return t();{const r=e==="loading"?y(Za,{clsPrefix:n,strokeWidth:24,scale:.85}):ho[e]();return r?y(gr,{clsPrefix:n,key:e},{default:()=>r}):null}}const po=q({name:"MessageEnvironment",props:Object.assign(Object.assign({},wr),{duration:{type:Number,default:3e3},onAfterLeave:Function,onLeave:Function,internalKey:{type:String,required:!0},onInternalAfterLeave:Function,onHide:Function,onAfterHide:Function}),setup(t){let e=null;const n=N(!0);Jn(()=>{r()});function r(){const{duration:u}=t;u&&(e=window.setTimeout(o,u))}function i(u){u.currentTarget===u.target&&e!==null&&(window.clearTimeout(e),e=null)}function a(u){u.currentTarget===u.target&&r()}function o(){const{onHide:u}=t;n.value=!1,e&&(window.clearTimeout(e),e=null),u&&u()}function l(){const{onClose:u}=t;u&&u(),o()}function c(){const{onAfterLeave:u,onInternalAfterLeave:f,onAfterHide:d,internalKey:g}=t;u&&u(),f&&f(g),d&&d()}function s(){o()}return{show:n,hide:o,handleClose:l,handleAfterLeave:c,handleMouseleave:a,handleMouseenter:i,deactivate:s}},render(){return y(pa,{appear:!0,onAfterLeave:this.handleAfterLeave,onLeave:this.onLeave},{default:()=>[this.show?y(vo,{content:this.content,type:this.type,icon:this.icon,showIcon:this.showIcon,closable:this.closable,onClose:this.handleClose,onMouseenter:this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.keepAliveOnHover?this.handleMouseleave:void 0}):null]})}}),yo=Object.assign(Object.assign({},Ie.props),{to:[String,Object],duration:{type:Number,default:3e3},keepAliveOnHover:Boolean,max:Number,placement:{type:String,default:"top"},closable:Boolean,containerStyle:[String,Object]}),mo=q({name:"MessageProvider",props:yo,setup(t){const{mergedClsPrefixRef:e}=Pe(t),n=N([]),r=N({}),i={create(c,s){return a(c,Object.assign({type:"default"},s))},info(c,s){return a(c,Object.assign(Object.assign({},s),{type:"info"}))},success(c,s){return a(c,Object.assign(Object.assign({},s),{type:"success"}))},warning(c,s){return a(c,Object.assign(Object.assign({},s),{type:"warning"}))},error(c,s){return a(c,Object.assign(Object.assign({},s),{type:"error"}))},loading(c,s){return a(c,Object.assign(Object.assign({},s),{type:"loading"}))},destroyAll:l};ce(Yn,{props:t,mergedClsPrefixRef:e}),ce(ii,i);function a(c,s){const u=gn(),f=ge(Object.assign(Object.assign({},s),{content:c,key:u,destroy:()=>{var g;(g=r.value[u])===null||g===void 0||g.hide()}})),{max:d}=t;return d&&n.value.length>=d&&n.value.shift(),n.value.push(f),f}function o(c){n.value.splice(n.value.findIndex(s=>s.key===c),1),delete r.value[c]}function l(){Object.values(r.value).forEach(c=>{c.hide()})}return Object.assign({mergedClsPrefix:e,messageRefs:r,messageList:n,handleAfterLeave:o},i)},render(){var t,e,n;return y(fe,null,(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t),this.messageList.length?y(un,{to:(n=this.to)!==null&&n!==void 0?n:"body"},y("div",{class:[`${this.mergedClsPrefix}-message-container`,`${this.mergedClsPrefix}-message-container--${this.placement}`],key:"message-container",style:this.containerStyle},this.messageList.map(r=>y(po,Object.assign({ref:i=>{i&&(this.messageRefs[r.key]=i)},internalKey:r.key,onInternalAfterLeave:this.handleAfterLeave},vn(r,["destroy"],void 0),{duration:r.duration===void 0?this.duration:r.duration,keepAliveOnHover:r.keepAliveOnHover===void 0?this.keepAliveOnHover:r.keepAliveOnHover,closable:r.closable===void 0?this.closable:r.closable}))))):null)}}),_t=Qn("n-notification-provider"),_o=q({name:"NotificationContainer",props:{scrollable:{type:Boolean,required:!0},placement:{type:String,required:!0}},setup(){const{mergedThemeRef:t,mergedClsPrefixRef:e,wipTransitionCountRef:n}=Ve(_t),r=N(null);return zt(()=>{var i,a;n.value>0?(i=r==null?void 0:r.value)===null||i===void 0||i.classList.add("transitioning"):(a=r==null?void 0:r.value)===null||a===void 0||a.classList.remove("transitioning")}),{selfRef:r,mergedTheme:t,mergedClsPrefix:e,transitioning:n}},render(){const{$slots:t,scrollable:e,mergedClsPrefix:n,mergedTheme:r,placement:i}=this;return y("div",{ref:"selfRef",class:[`${n}-notification-container`,e&&`${n}-notification-container--scrollable`,`${n}-notification-container--${i}`]},e?y(Ya,{theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar,contentStyle:{overflow:"hidden"}},t):t)}}),bo={info:()=>y(yr,null),success:()=>y(mr,null),warning:()=>y(_r,null),error:()=>y(br,null),default:()=>null},yn={closable:{type:Boolean,default:!0},type:{type:String,default:"default"},avatar:Function,title:[String,Function],description:[String,Function],content:[String,Function],meta:[String,Function],action:[String,Function],onClose:{type:Function,required:!0},keepAliveOnHover:Boolean,onMouseenter:Function,onMouseleave:Function},wo=eo(yn),So=q({name:"Notification",props:yn,setup(t){const{mergedClsPrefixRef:e,mergedThemeRef:n,props:r}=Ve(_t),{inlineThemeDisabled:i,mergedRtlRef:a}=Pe(),o=vr("Notification",a,e),l=Q(()=>{const{type:s}=t,{self:{color:u,textColor:f,closeIconColor:d,closeIconColorHover:g,closeIconColorPressed:h,headerTextColor:A,descriptionTextColor:S,actionTextColor:x,borderRadius:v,headerFontWeight:m,boxShadow:b,lineHeight:_,fontSize:E,closeMargin:P,closeSize:$,width:H,padding:X,closeIconSize:At,closeBorderRadius:Et,closeColorHover:Ct,closeColorPressed:Rt,titleFontSize:Tt,metaFontSize:Ot,descriptionFontSize:xt,[ae("iconColor",s)]:Bt},common:{cubicBezierEaseOut:Pt,cubicBezierEaseIn:Vr,cubicBezierEaseInOut:Hr}}=n.value,{left:Gr,right:Kr,top:Yr,bottom:Jr}=to(X);return{"--n-color":u,"--n-font-size":E,"--n-text-color":f,"--n-description-text-color":S,"--n-action-text-color":x,"--n-title-text-color":A,"--n-title-font-weight":m,"--n-bezier":Hr,"--n-bezier-ease-out":Pt,"--n-bezier-ease-in":Vr,"--n-border-radius":v,"--n-box-shadow":b,"--n-close-border-radius":Et,"--n-close-color-hover":Ct,"--n-close-color-pressed":Rt,"--n-close-icon-color":d,"--n-close-icon-color-hover":g,"--n-close-icon-color-pressed":h,"--n-line-height":_,"--n-icon-color":Bt,"--n-close-margin":P,"--n-close-size":$,"--n-close-icon-size":At,"--n-width":H,"--n-padding-left":Gr,"--n-padding-right":Kr,"--n-padding-top":Yr,"--n-padding-bottom":Jr,"--n-title-font-size":Tt,"--n-meta-font-size":Ot,"--n-description-font-size":xt}}),c=i?pn("notification",Q(()=>t.type[0]),l,r):void 0;return{mergedClsPrefix:e,showAvatar:Q(()=>t.avatar||t.type!=="default"),handleCloseClick(){t.onClose()},rtlEnabled:o,cssVars:i?void 0:l,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender}},render(){var t;const{mergedClsPrefix:e}=this;return(t=this.onRender)===null||t===void 0||t.call(this),y("div",{class:[`${e}-notification-wrapper`,this.themeClass],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:this.cssVars},y("div",{class:[`${e}-notification`,this.rtlEnabled&&`${e}-notification--rtl`,this.themeClass,{[`${e}-notification--closable`]:this.closable,[`${e}-notification--show-avatar`]:this.showAvatar}],style:this.cssVars},this.showAvatar?y("div",{class:`${e}-notification__avatar`},this.avatar?me(this.avatar):this.type!=="default"?y(gr,{clsPrefix:e},{default:()=>bo[this.type]()}):null):null,this.closable?y(pr,{clsPrefix:e,class:`${e}-notification__close`,onClick:this.handleCloseClick}):null,y("div",{ref:"bodyRef",class:`${e}-notification-main`},this.title?y("div",{class:`${e}-notification-main__header`},me(this.title)):null,this.description?y("div",{class:`${e}-notification-main__description`},me(this.description)):null,this.content?y("pre",{class:`${e}-notification-main__content`},me(this.content)):null,this.meta||this.action?y("div",{class:`${e}-notification-main-footer`},this.meta?y("div",{class:`${e}-notification-main-footer__meta`},me(this.meta)):null,this.action?y("div",{class:`${e}-notification-main-footer__action`},me(this.action)):null):null)))}}),Ao=Object.assign(Object.assign({},yn),{duration:Number,onClose:Function,onLeave:Function,onAfterEnter:Function,onAfterLeave:Function,onHide:Function,onAfterShow:Function,onAfterHide:Function}),Eo=q({name:"NotificationEnvironment",props:Object.assign(Object.assign({},Ao),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(t){const{wipTransitionCountRef:e}=Ve(_t),n=N(!0);let r=null;function i(){n.value=!1,r&&window.clearTimeout(r)}function a(h){e.value++,Ce(()=>{h.style.height=`${h.offsetHeight}px`,h.style.maxHeight="0",h.style.transition="none",h.offsetHeight,h.style.transition="",h.style.maxHeight=h.style.height})}function o(h){e.value--,h.style.height="",h.style.maxHeight="";const{onAfterEnter:A,onAfterShow:S}=t;A&&A(),S&&S()}function l(h){e.value++,h.style.maxHeight=`${h.offsetHeight}px`,h.style.height=`${h.offsetHeight}px`,h.offsetHeight}function c(h){const{onHide:A}=t;A&&A(),h.style.maxHeight="0",h.offsetHeight}function s(){e.value--;const{onAfterLeave:h,onInternalAfterLeave:A,onAfterHide:S,internalKey:x}=t;h&&h(),A(x),S&&S()}function u(){const{duration:h}=t;h&&(r=window.setTimeout(i,h))}function f(h){h.currentTarget===h.target&&r!==null&&(window.clearTimeout(r),r=null)}function d(h){h.currentTarget===h.target&&u()}function g(){const{onClose:h}=t;h?Promise.resolve(h()).then(A=>{A!==!1&&i()}):i()}return Jn(()=>{t.duration&&(r=window.setTimeout(i,t.duration))}),{show:n,hide:i,handleClose:g,handleAfterLeave:s,handleLeave:c,handleBeforeLeave:l,handleAfterEnter:o,handleBeforeEnter:a,handleMouseenter:f,handleMouseleave:d}},render(){return y(Kn,{name:"notification-transition",appear:!0,onBeforeEnter:this.handleBeforeEnter,onAfterEnter:this.handleAfterEnter,onBeforeLeave:this.handleBeforeLeave,onLeave:this.handleLeave,onAfterLeave:this.handleAfterLeave},{default:()=>this.show?y(So,Object.assign({},hr(this.$props,wo),{onClose:this.handleClose,onMouseenter:this.duration&&this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.duration&&this.keepAliveOnHover?this.handleMouseleave:void 0})):null})}}),Co=M([O("notification-container",`
 z-index: 4000;
 position: fixed;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: flex-end;
 `,[M(">",[O("scrollbar",`
 width: initial;
 overflow: visible;
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[M(">",[O("scrollbar-container",`
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[O("scrollbar-content",`
 padding-top: 12px;
 padding-bottom: 33px;
 `)])])])]),B("top, top-right, top-left",`
 top: 12px;
 `,[M("&.transitioning >",[O("scrollbar",[M(">",[O("scrollbar-container",`
 min-height: 100vh !important;
 `)])])])]),B("bottom, bottom-right, bottom-left",`
 bottom: 12px;
 `,[M(">",[O("scrollbar",[M(">",[O("scrollbar-container",[O("scrollbar-content",`
 padding-bottom: 12px;
 `)])])])]),O("notification-wrapper",`
 display: flex;
 align-items: flex-end;
 margin-bottom: 0;
 margin-top: 12px;
 `)]),B("top, bottom",`
 left: 50%;
 transform: translateX(-50%);
 `,[O("notification-wrapper",[M("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: scale(0.85);
 `),M("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: scale(1);
 `)])]),B("top",[O("notification-wrapper",`
 transform-origin: top center;
 `)]),B("bottom",[O("notification-wrapper",`
 transform-origin: bottom center;
 `)]),B("top-right, bottom-right",[O("notification",`
 margin-left: 28px;
 margin-right: 16px;
 `)]),B("top-left, bottom-left",[O("notification",`
 margin-left: 16px;
 margin-right: 28px;
 `)]),B("top-right",`
 right: 0;
 `,[Xe("top-right")]),B("top-left",`
 left: 0;
 `,[Xe("top-left")]),B("bottom-right",`
 right: 0;
 `,[Xe("bottom-right")]),B("bottom-left",`
 left: 0;
 `,[Xe("bottom-left")]),B("scrollable",[B("top-right",`
 top: 0;
 `),B("top-left",`
 top: 0;
 `),B("bottom-right",`
 bottom: 0;
 `),B("bottom-left",`
 bottom: 0;
 `)]),O("notification-wrapper",`
 margin-bottom: 12px;
 `,[M("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 opacity: 0;
 margin-top: 0 !important;
 margin-bottom: 0 !important;
 `),M("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 opacity: 1;
 `),M("&.notification-transition-leave-active",`
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier-ease-in),
 max-height .3s var(--n-bezier),
 margin-top .3s linear,
 margin-bottom .3s linear,
 box-shadow .3s var(--n-bezier);
 `),M("&.notification-transition-enter-active",`
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier-ease-out),
 max-height .3s var(--n-bezier),
 margin-top .3s linear,
 margin-bottom .3s linear,
 box-shadow .3s var(--n-bezier);
 `)]),O("notification",`
 background-color: var(--n-color);
 color: var(--n-text-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 font-family: inherit;
 font-size: var(--n-font-size);
 font-weight: 400;
 position: relative;
 display: flex;
 overflow: hidden;
 flex-shrink: 0;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 width: var(--n-width);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 box-sizing: border-box;
 opacity: 1;
 `,[ee("avatar",[O("icon",{color:"var(--n-icon-color)"}),O("base-icon",{color:"var(--n-icon-color)"})]),B("show-avatar",[O("notification-main",`
 margin-left: 40px;
 width: calc(100% - 40px); 
 `)]),B("closable",[O("notification-main",[M("> *:first-child",{paddingRight:"20px"})]),ee("close",`
 position: absolute;
 top: 0;
 right: 0;
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),ee("avatar",`
 position: absolute;
 top: var(--n-padding-top);
 left: var(--n-padding-left);
 width: 28px;
 height: 28px;
 font-size: 28px;
 display: flex;
 align-items: center;
 justify-content: center;
 `,[O("icon","transition: color .3s var(--n-bezier);")]),O("notification-main",`
 padding-top: var(--n-padding-top);
 padding-bottom: var(--n-padding-bottom);
 box-sizing: border-box;
 display: flex;
 flex-direction: column;
 margin-left: 8px;
 width: calc(100% - 8px);
 `,[O("notification-main-footer",`
 display: flex;
 align-items: center;
 justify-content: space-between;
 margin-top: 12px;
 `,[ee("meta",`
 font-size: var(--n-meta-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-description-text-color);
 `),ee("action",`
 cursor: pointer;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-action-text-color);
 `)]),ee("header",`
 font-weight: var(--n-title-font-weight);
 font-size: var(--n-title-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-title-text-color);
 `),ee("description",`
 margin-top: 8px;
 font-size: var(--n-description-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-description-text-color);
 `),ee("content",`
 line-height: var(--n-line-height);
 margin: 12px 0 0 0;
 font-family: inherit;
 white-space: pre-wrap;
 word-wrap: break-word;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-text-color);
 `,[M("&:first-child",{margin:0})])])])])]);function Xe(t){const n=t.split("-")[1]==="left"?"calc(-100%)":"calc(100%)",r="0";return O("notification-wrapper",[M("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: translate(${n}, 0);
 `),M("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: translate(${r}, 0);
 `)])}const Ro=Qn("n-notification-api"),To=Object.assign(Object.assign({},Ie.props),{containerStyle:[String,Object],to:[String,Object],scrollable:{type:Boolean,default:!0},max:Number,placement:{type:String,default:"top-right"},keepAliveOnHover:Boolean}),Oo=q({name:"NotificationProvider",props:To,setup(t){const{mergedClsPrefixRef:e}=Pe(t),n=N([]),r={},i=new Set;function a(g){const h=gn(),A=()=>{i.add(h),r[h]&&r[h].hide()},S=ge(Object.assign(Object.assign({},g),{key:h,destroy:A,hide:A,deactivate:A})),{max:x}=t;if(x&&n.value.length-i.size>=x){let v=!1,m=0;for(const b of n.value){if(!i.has(b.key)){r[b.key]&&(b.destroy(),v=!0);break}m++}v||n.value.splice(m,1)}return n.value.push(S),S}const o=["info","success","warning","error"].map(g=>h=>a(Object.assign(Object.assign({},h),{type:g})));function l(g){i.delete(g),n.value.splice(n.value.findIndex(h=>h.key===g),1)}const c=Ie("Notification","-notification",Co,ai,t,e),s={create:a,info:o[0],success:o[1],warning:o[2],error:o[3],open:f,destroyAll:d},u=N(0);ce(Ro,s),ce(_t,{props:t,mergedClsPrefixRef:e,mergedThemeRef:c,wipTransitionCountRef:u});function f(g){return a(g)}function d(){Object.values(n.value).forEach(g=>{g.hide()})}return Object.assign({mergedClsPrefix:e,notificationList:n,notificationRefs:r,handleAfterLeave:l},s)},render(){var t,e,n;const{placement:r}=this;return y(fe,null,(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t),this.notificationList.length?y(un,{to:(n=this.to)!==null&&n!==void 0?n:"body"},y(_o,{style:this.containerStyle,scrollable:this.scrollable&&r!=="top"&&r!=="bottom",placement:r},{default:()=>this.notificationList.map(i=>y(Eo,Object.assign({ref:a=>{const o=i.key;a===null?delete this.notificationRefs[o]:this.notificationRefs[o]=a}},vn(i,["destroy","hide","deactivate"]),{internalKey:i.key,onInternalAfterLeave:this.handleAfterLeave,keepAliveOnHover:i.keepAliveOnHover===void 0?this.keepAliveOnHover:i.keepAliveOnHover})))})):null)}});var k={Request:"Request",Singleton:"Singleton",Transient:"Transient"},L={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Ge={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},xo=0;function Ke(){return xo++}var Bo=function(){function t(e,n){this.id=Ke(),this.activated=!1,this.serviceIdentifier=e,this.scope=n,this.type=L.Invalid,this.constraint=function(r){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===k.Singleton?this.activated:!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}(),Po=function(){function t(){}return t.prototype.getConstructorMetadata=function(e){var n=Reflect.getMetadata(Ri,e),r=Reflect.getMetadata(Ti,e);return{compilerGeneratedMetadata:n,userGeneratedMetadata:r||{}}},t.prototype.getPropertiesMetadata=function(e){var n=Reflect.getMetadata(Oi,e)||[];return n},t}(),tt={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function Sr(t){return t instanceof RangeError||t.message===xi}var Io=function(t,e){try{return t()}catch(n){throw Sr(n)&&(n=e()),n}};function Ue(t){if(typeof t=="function"){var e=t;return e.name}else{if(typeof t=="symbol")return t.toString();var e=t;return e}}function Bn(t,e,n){var r="",i=n(t,e);return i.length!==0&&(r=`
Registered bindings:`,i.forEach(function(a){var o="Object";a.implementationType!==null&&(o=bt(a.implementationType)),r=r+`
 `+o,a.constraint.metaData&&(r=r+" - "+a.constraint.metaData)})),r}function Ar(t,e){return t.parentRequest===null?!1:t.parentRequest.serviceIdentifier===e?!0:Ar(t.parentRequest,e)}function Lo(t){function e(r,i){i===void 0&&(i=[]);var a=Ue(r.serviceIdentifier);return i.push(a),r.parentRequest!==null?e(r.parentRequest,i):i}var n=e(t);return n.reverse().join(" --> ")}function Er(t){t.childRequests.forEach(function(e){if(Ar(e,e.serviceIdentifier)){var n=Lo(e);throw new Error(Bi+" "+n)}else Er(e)})}function No(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return r!==null&&(n+=r.toString()+`
`),i!==null&&i.forEach(function(a){n+=a.toString()+`
`})," "+t+`
 `+t+" - "+n}else return" "+t}function bt(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}function Do(t){return t.toString().slice(7,-1)}var Cr=function(){function t(e){this.id=Ke(),this.container=e}return t.prototype.addPlan=function(e){this.plan=e},t.prototype.setCurrentRequest=function(e){this.currentRequest=e},t}(),Mo=function(){function t(e,n){this.parentContext=e,this.rootRequest=n}return t}(),mn=function(){function t(e){this._cb=e}return t.prototype.unwrap=function(){return this._cb()},t}(),$o=function(){function t(e){this.str=e}return t.prototype.startsWith=function(e){return this.str.indexOf(e)===0},t.prototype.endsWith=function(e){var n="",r=e.split("").reverse().join("");return n=this.str.split("").reverse().join(""),this.startsWith.call({str:n},r)},t.prototype.contains=function(e){return this.str.indexOf(e)!==-1},t.prototype.equals=function(e){return this.str===e},t.prototype.value=function(){return this.str},t}(),wt=function(){function t(e,n,r,i){this.id=Ke(),this.type=e,this.serviceIdentifier=r;var a=typeof n=="symbol"?Do(n):n;this.name=new $o(a||""),this.identifier=n,this.metadata=new Array;var o=null;typeof i=="string"?o=new we(re,i):i instanceof we&&(o=i),o!==null&&this.metadata.push(o)}return t.prototype.hasTag=function(e){for(var n=0,r=this.metadata;n<r.length;n++){var i=r[n];if(i.key===e)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(rt)},t.prototype.matchesArray=function(e){return this.matchesTag(rt)(e)},t.prototype.isNamed=function(){return this.hasTag(re)},t.prototype.isTagged=function(){return this.metadata.some(function(e){return An.every(function(n){return e.key!==n})})},t.prototype.isOptional=function(){return this.matchesTag(ir)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===re})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return An.every(function(n){return e.key!==n})}):null},t.prototype.matchesNamedTag=function(e){return this.matchesTag(re)(e)},t.prototype.matchesTag=function(e){var n=this;return function(r){for(var i=0,a=n.metadata;i<a.length;i++){var o=a[i];if(o.key===e&&o.value===r)return!0}return!1}},t}(),lt=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};function jo(t,e){var n=bt(e);return Rr(t,n,e,!1)}function Rr(t,e,n,r){var i=t.getConstructorMetadata(n),a=i.compilerGeneratedMetadata;if(a===void 0){var o=sr+" "+e+".";throw new Error(o)}var l=i.userGeneratedMetadata,c=Object.keys(l),s=n.length===0&&c.length>0,u=c.length>n.length,f=s||u?c.length:n.length,d=Fo(r,e,a,l,f),g=Tr(t,n,e),h=lt(lt([],d,!0),g,!0);return h}function ko(t,e,n,r,i){var a=i[t.toString()]||[],o=xr(a),l=o.unmanaged!==!0,c=r[t],s=o.inject||o.multiInject;if(c=s||c,c instanceof mn&&(c=c.unwrap()),l){var u=c===Object,f=c===Function,d=c===void 0,g=u||f||d;if(!e&&g){var h=Ii+" argument "+t+" in class "+n+".";throw new Error(h)}var A=new wt(Ge.ConstructorArgument,o.targetName,c);return A.metadata=a,A}return null}function Fo(t,e,n,r,i){for(var a=[],o=0;o<i;o++){var l=o,c=ko(l,t,e,n,r);c!==null&&a.push(c)}return a}function zo(t,e,n,r){var i=t||e;if(i===void 0){var a=sr+" for property "+String(n)+" in class "+r+".";throw new Error(a)}return i}function Tr(t,e,n){for(var r=t.getPropertiesMetadata(e),i=[],a=Object.getOwnPropertySymbols(r),o=Object.keys(r),l=o.concat(a),c=0,s=l;c<s.length;c++){var u=s[c],f=r[u],d=xr(f),g=d.targetName||u,h=zo(d.inject,d.multiInject,u,n),A=new wt(Ge.ClassProperty,g,h);A.metadata=f,i.push(A)}var S=Object.getPrototypeOf(e.prototype).constructor;if(S!==Object){var x=Tr(t,S,n);i=lt(lt([],i,!0),x,!0)}return i}function Or(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=bt(n),i=Rr(t,r,n,!0),a=i.map(function(c){return c.metadata.filter(function(s){return s.key===ar})}),o=[].concat.apply([],a).length,l=i.length-o;return l>0?l:Or(t,n)}else return 0}function xr(t){var e={};return t.forEach(function(n){e[n.key.toString()]=n.value}),{inject:e[or],multiInject:e[rt],targetName:e[Pi],unmanaged:e[ar]}}var _n=function(){function t(e,n,r,i,a){this.id=Ke(),this.serviceIdentifier=e,this.parentContext=n,this.parentRequest=r,this.target=a,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=r===null?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();function ct(t){return t._bindingDictionary}function Uo(t,e,n,r,i,a){var o=t?rt:or,l=new we(o,n),c=new wt(e,r,n,l);if(i!==void 0){var s=new we(i,a);c.metadata.push(s)}return c}function Pn(t,e,n,r,i){var a=qe(n.container,i.serviceIdentifier),o=[];return a.length===tt.NoBindingsAvailable&&n.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),a=qe(n.container,i.serviceIdentifier)),e?o=a:o=a.filter(function(l){var c=new _n(l.serviceIdentifier,n,r,l,i);return l.constraint(c)}),qo(i.serviceIdentifier,o,i,n.container),o}function qo(t,e,n,r){switch(e.length){case tt.NoBindingsAvailable:if(n.isOptional())return e;var i=Ue(t),a=Ni;throw a+=No(i,n),a+=Bn(r,i,qe),new Error(a);case tt.OnlyOneBindingAvailable:return e;case tt.MultipleBindingsAvailable:default:if(n.isArray())return e;var i=Ue(t),a=Di+" "+i;throw a+=Bn(r,i,qe),new Error(a)}}function Br(t,e,n,r,i,a){var o,l;if(i===null){o=Pn(t,e,r,null,a),l=new _n(n,r,null,o,a);var c=new Mo(r,l);r.addPlan(c)}else o=Pn(t,e,r,i,a),l=i.addChildRequest(a.serviceIdentifier,o,a);o.forEach(function(s){var u=null;if(a.isArray())u=l.addChildRequest(s.serviceIdentifier,s,a);else{if(s.cache)return;u=l}if(s.type===L.Instance&&s.implementationType!==null){var f=jo(t,s.implementationType);if(!r.container.options.skipBaseClassChecks){var d=Or(t,s.implementationType);if(f.length<d){var g=Li(bt(s.implementationType));throw new Error(g)}}f.forEach(function(h){Br(t,!1,h.serviceIdentifier,r,u,h)})}})}function qe(t,e){var n=[],r=ct(t);return r.hasKey(e)?n=r.get(e):t.parent!==null&&(n=qe(t.parent,e)),n}function Wo(t,e,n,r,i,a,o,l){l===void 0&&(l=!1);var c=new Cr(e),s=Uo(n,r,i,"",a,o);try{return Br(t,l,i,c,null,s),c}catch(u){throw Sr(u)&&Er(c.plan.rootRequest),u}}function Vo(t,e,n,r){var i=new wt(Ge.Variable,"",e,new we(n,r)),a=new Cr(t),o=new _n(e,a,null,[],i);return o}function V(t){var e=typeof t=="object"&&t!==null||typeof t=="function";return e&&typeof t.then=="function"}function Pr(t){return V(t)?!0:Array.isArray(t)&&t.some(V)}var Ho=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{s(r.next(u))}catch(f){o(f)}}function c(u){try{s(r.throw(u))}catch(f){o(f)}}function s(u){u.done?a(u.value):i(u.value).then(l,c)}s((r=r.apply(t,e||[])).next())})},Go=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(s){return function(u){return c([s,u])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=e.call(t,n)}catch(u){s=[6,u],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Ko=function(t,e){return e.scope===k.Singleton&&e.activated?e.cache:e.scope===k.Request&&t.has(e.id)?t.get(e.id):null},Yo=function(t,e,n){e.scope===k.Singleton&&Qo(e,n),e.scope===k.Request&&Jo(t,e,n)},Jo=function(t,e,n){t.has(e.id)||t.set(e.id,n)},Qo=function(t,e){t.cache=e,t.activated=!0,V(e)&&Xo(t,e)},Xo=function(t,e){return Ho(void 0,void 0,void 0,function(){var n,r;return Go(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return n=i.sent(),t.cache=n,[3,3];case 2:throw r=i.sent(),t.cache=null,t.activated=!1,r;case 3:return[2]}})})},Fe;(function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"})(Fe||(Fe={}));var Zo=function(t){var e=null;switch(t.type){case L.ConstantValue:case L.Function:e=t.cache;break;case L.Constructor:case L.Instance:e=t.implementationType;break;case L.DynamicValue:e=t.dynamicValue;break;case L.Provider:e=t.provider;break;case L.Factory:e=t.factory;break}if(e===null){var n=Ue(t.serviceIdentifier);throw new Error(Mi+" "+n)}},es=function(t){switch(t.type){case L.Factory:return{factory:t.factory,factoryType:Fe.Factory};case L.Provider:return{factory:t.provider,factoryType:Fe.Provider};case L.DynamicValue:return{factory:t.dynamicValue,factoryType:Fe.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}},xe=globalThis&&globalThis.__assign||function(){return xe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xe.apply(this,arguments)},Ir=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{s(r.next(u))}catch(f){o(f)}}function c(u){try{s(r.throw(u))}catch(f){o(f)}}function s(u){u.done?a(u.value):i(u.value).then(l,c)}s((r=r.apply(t,e||[])).next())})},Lr=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(s){return function(u){return c([s,u])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=e.call(t,n)}catch(u){s=[6,u],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},ts=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};function ns(t,e){return t.reduce(function(n,r){var i=e(r),a=r.target.type;return a===Ge.ConstructorArgument?n.constructorInjections.push(i):(n.propertyRequests.push(r),n.propertyInjections.push(i)),n.isAsync||(n.isAsync=Pr(i)),n},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function rs(t,e,n){var r;if(e.length>0){var i=ns(e,n),a=xe(xe({},i),{constr:t});i.isAsync?r=is(a):r=Nr(a)}else r=new t;return r}function Nr(t){var e,n=new((e=t.constr).bind.apply(e,ts([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach(function(r,i){var a=r.target.identifier,o=t.propertyInjections[i];n[a]=o}),n}function is(t){return Ir(this,void 0,void 0,function(){var e,n;return Lr(this,function(r){switch(r.label){case 0:return[4,In(t.constructorInjections)];case 1:return e=r.sent(),[4,In(t.propertyInjections)];case 2:return n=r.sent(),[2,Nr(xe(xe({},t),{constructorInjections:e,propertyInjections:n}))]}})})}function In(t){return Ir(this,void 0,void 0,function(){var e,n,r,i;return Lr(this,function(a){for(e=[],n=0,r=t;n<r.length;n++)i=r[n],Array.isArray(i)?e.push(Promise.all(i)):e.push(i);return[2,Promise.all(e)]})})}function Ln(t,e){var n=as(t,e);return V(n)?n.then(function(){return e}):e}function as(t,e){var n,r;if(Reflect.hasMetadata(En,t)){var i=Reflect.getMetadata(En,t);try{return(r=(n=e)[i.value])===null||r===void 0?void 0:r.call(n)}catch(a){throw new Error($i(t.name,a.message))}}}function os(t,e){t.scope!==k.Singleton&&ss(t,e)}function ss(t,e){var n="Class cannot be instantiated in "+(t.scope===k.Request?"request":"transient")+" scope.";if(typeof t.onDeactivation=="function")throw new Error(qt(e.name,n));if(Reflect.hasMetadata(Wt,e))throw new Error(ji(e.name,n))}function ls(t,e,n,r){os(t,e);var i=rs(e,n,r);return V(i)?i.then(function(a){return Ln(e,a)}):Ln(e,i)}var cs=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{s(r.next(u))}catch(f){o(f)}}function c(u){try{s(r.throw(u))}catch(f){o(f)}}function s(u){u.done?a(u.value):i(u.value).then(l,c)}s((r=r.apply(t,e||[])).next())})},us=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(s){return function(u){return c([s,u])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=e.call(t,n)}catch(u){s=[6,u],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},bn=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,i=e.target&&e.target.isArray(),a=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(i&&a)return r.map(function(l){var c=bn(t);return c(l)});if(e.target.isOptional()&&n.length===0)return;var o=n[0];return vs(t,e,o)}},fs=function(t,e){var n=es(t);return Io(function(){return n.factory.bind(t)(e)},function(){return new Error(ki(n.factoryType,e.currentRequest.serviceIdentifier.toString()))})},ds=function(t,e,n){var r,i=e.childRequests;switch(Zo(n),n.type){case L.ConstantValue:case L.Function:r=n.cache;break;case L.Constructor:r=n.implementationType;break;case L.Instance:r=ls(n,n.implementationType,i,bn(t));break;default:r=fs(n,e.parentContext)}return r},hs=function(t,e,n){var r=Ko(t,e);return r!==null||(r=n(),Yo(t,e,r)),r},vs=function(t,e,n){return hs(t,n,function(){var r=ds(t,e,n);return V(r)?r=r.then(function(i){return Nn(e,n,i)}):r=Nn(e,n,r),r})};function Nn(t,e,n){var r=gs(t.parentContext,e,n),i=ms(t.parentContext.container),a,o=i.next();do{a=o.value;var l=t.parentContext,c=t.serviceIdentifier,s=ys(a,c);V(r)?r=Dr(s,l,r):r=ps(s,l,r),o=i.next()}while(o.done!==!0&&!ct(a).hasKey(t.serviceIdentifier));return r}var gs=function(t,e,n){var r;return typeof e.onActivation=="function"?r=e.onActivation(t,n):r=n,r},ps=function(t,e,n){for(var r=t.next();!r.done;){if(n=r.value(e,n),V(n))return Dr(t,e,n);r=t.next()}return n},Dr=function(t,e,n){return cs(void 0,void 0,void 0,function(){var r,i;return us(this,function(a){switch(a.label){case 0:return[4,n];case 1:r=a.sent(),i=t.next(),a.label=2;case 2:return i.done?[3,4]:[4,i.value(e,r)];case 3:return r=a.sent(),i=t.next(),[3,2];case 4:return[2,r]}})})},ys=function(t,e){var n=t._activations;return n.hasKey(e)?n.get(e).values():[].values()},ms=function(t){for(var e=[t],n=t.parent;n!==null;)e.push(n),n=n.parent;var r=function(){var a=e.pop();return a!==void 0?{done:!1,value:a}:{done:!0,value:void 0}},i={next:r};return i};function _s(t){var e=bn(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}var oe=function(t,e){var n=t.parentRequest;return n!==null?e(n)?!0:oe(n,e):!1},je=function(t){return function(e){var n=function(r){return r!==null&&r.target!==null&&r.target.matchesTag(t)(e)};return n.metaData=new we(t,e),n}},Ze=je(re),Nt=function(t){return function(e){var n=null;if(e!==null)if(n=e.bindings[0],typeof t=="string"){var r=n.serviceIdentifier;return r===t}else{var i=e.bindings[0].implementationType;return t===i}return!1}},ut=function(){function t(e){this._binding=e}return t.prototype.when=function(e){return this._binding.constraint=e,new W(this._binding)},t.prototype.whenTargetNamed=function(e){return this._binding.constraint=Ze(e),new W(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){if(e===null)return!1;var n=e.target!==null&&!e.target.isNamed()&&!e.target.isTagged();return n},new W(this._binding)},t.prototype.whenTargetTagged=function(e,n){return this._binding.constraint=je(e)(n),new W(this._binding)},t.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(n){return n!==null&&Nt(e)(n.parentRequest)},new W(this._binding)},t.prototype.whenParentNamed=function(e){return this._binding.constraint=function(n){return n!==null&&Ze(e)(n.parentRequest)},new W(this._binding)},t.prototype.whenParentTagged=function(e,n){return this._binding.constraint=function(r){return r!==null&&je(e)(n)(r.parentRequest)},new W(this._binding)},t.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(n){return n!==null&&oe(n,Nt(e))},new W(this._binding)},t.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(n){return n!==null&&!oe(n,Nt(e))},new W(this._binding)},t.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(n){return n!==null&&oe(n,Ze(e))},new W(this._binding)},t.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(n){return n!==null&&!oe(n,Ze(e))},new W(this._binding)},t.prototype.whenAnyAncestorTagged=function(e,n){return this._binding.constraint=function(r){return r!==null&&oe(r,je(e)(n))},new W(this._binding)},t.prototype.whenNoAncestorTagged=function(e,n){return this._binding.constraint=function(r){return r!==null&&!oe(r,je(e)(n))},new W(this._binding)},t.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(n){return n!==null&&oe(n,e)},new W(this._binding)},t.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(n){return n!==null&&!oe(n,e)},new W(this._binding)},t}(),W=function(){function t(e){this._binding=e}return t.prototype.onActivation=function(e){return this._binding.onActivation=e,new ut(this._binding)},t.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new ut(this._binding)},t}(),le=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new ut(this._binding),this._bindingOnSyntax=new W(this._binding)}return t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,n){return this._bindingWhenSyntax.whenTargetTagged(e,n)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,n){return this._bindingWhenSyntax.whenParentTagged(e,n)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,n)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,n){return this._bindingWhenSyntax.whenNoAncestorTagged(e,n)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}(),bs=function(){function t(e){this._binding=e}return t.prototype.inRequestScope=function(){return this._binding.scope=k.Request,new le(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=k.Singleton,new le(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=k.Transient,new le(this._binding)},t}(),Dn=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new ut(this._binding),this._bindingOnSyntax=new W(this._binding),this._bindingInSyntax=new bs(e)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,n){return this._bindingWhenSyntax.whenTargetTagged(e,n)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,n){return this._bindingWhenSyntax.whenParentTagged(e,n)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,n)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,n){return this._bindingWhenSyntax.whenNoAncestorTagged(e,n)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}(),ws=function(){function t(e){this._binding=e}return t.prototype.to=function(e){return this._binding.type=L.Instance,this._binding.implementationType=e,new Dn(this._binding)},t.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+Fi);var e=this._binding.serviceIdentifier;return this.to(e)},t.prototype.toConstantValue=function(e){return this._binding.type=L.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=k.Singleton,new le(this._binding)},t.prototype.toDynamicValue=function(e){return this._binding.type=L.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new Dn(this._binding)},t.prototype.toConstructor=function(e){return this._binding.type=L.Constructor,this._binding.implementationType=e,this._binding.scope=k.Singleton,new le(this._binding)},t.prototype.toFactory=function(e){return this._binding.type=L.Factory,this._binding.factory=e,this._binding.scope=k.Singleton,new le(this._binding)},t.prototype.toFunction=function(e){if(typeof e!="function")throw new Error(zi);var n=this.toConstantValue(e);return this._binding.type=L.Function,this._binding.scope=k.Singleton,n},t.prototype.toAutoFactory=function(e){return this._binding.type=L.Factory,this._binding.factory=function(n){var r=function(){return n.container.get(e)};return r},this._binding.scope=k.Singleton,new le(this._binding)},t.prototype.toAutoNamedFactory=function(e){return this._binding.type=L.Factory,this._binding.factory=function(n){return function(r){return n.container.getNamed(e,r)}},new le(this._binding)},t.prototype.toProvider=function(e){return this._binding.type=L.Provider,this._binding.provider=e,this._binding.scope=k.Singleton,new le(this._binding)},t.prototype.toService=function(e){this.toDynamicValue(function(n){return n.container.get(e)})},t}(),Ss=function(){function t(){}return t.of=function(e,n,r,i,a){var o=new t;return o.bindings=e,o.middleware=n,o.deactivations=i,o.activations=r,o.moduleActivationStore=a,o},t}();function As(t){return typeof t=="object"&&t!==null&&"clone"in t&&typeof t.clone=="function"}var _e=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(e,n){if(e==null)throw new Error(Me);if(n==null)throw new Error(Me);var r=this._map.get(e);r!==void 0?r.push(n):this._map.set(e,[n])},t.prototype.get=function(e){if(e==null)throw new Error(Me);var n=this._map.get(e);if(n!==void 0)return n;throw new Error(Cn)},t.prototype.remove=function(e){if(e==null)throw new Error(Me);if(!this._map.delete(e))throw new Error(Cn)},t.prototype.removeIntersection=function(e){var n=this;this.traverse(function(r,i){var a=e.hasKey(r)?e.get(r):void 0;if(a!==void 0){var o=i.filter(function(l){return!a.some(function(c){return l===c})});n._setValue(r,o)}})},t.prototype.removeByCondition=function(e){var n=this,r=[];return this._map.forEach(function(i,a){for(var o=[],l=0,c=i;l<c.length;l++){var s=c[l],u=e(s);u?r.push(s):o.push(s)}n._setValue(a,o)}),r},t.prototype.hasKey=function(e){if(e==null)throw new Error(Me);return this._map.has(e)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(n,r){n.forEach(function(i){return e.add(r,As(i)?i.clone():i)})}),e},t.prototype.traverse=function(e){this._map.forEach(function(n,r){e(r,n)})},t.prototype._setValue=function(e,n){n.length>0?this._map.set(e,n):this._map.delete(e)},t}(),Es=function(){function t(){this._map=new Map}return t.prototype.remove=function(e){if(this._map.has(e)){var n=this._map.get(e);return this._map.delete(e),n}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(e,n,r){this._getModuleActivationHandlers(e).onDeactivations.add(n,r)},t.prototype.addActivation=function(e,n,r){this._getModuleActivationHandlers(e).onActivations.add(n,r)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(n,r){e._map.set(r,{onActivations:n.onActivations.clone(),onDeactivations:n.onDeactivations.clone()})}),e},t.prototype._getModuleActivationHandlers=function(e){var n=this._map.get(e);return n===void 0&&(n=this._getEmptyHandlersStore(),this._map.set(e,n)),n},t.prototype._getEmptyHandlersStore=function(){var e={onActivations:new _e,onDeactivations:new _e};return e},t}(),ft=globalThis&&globalThis.__assign||function(){return ft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ft.apply(this,arguments)},K=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{s(r.next(u))}catch(f){o(f)}}function c(u){try{s(r.throw(u))}catch(f){o(f)}}function s(u){u.done?a(u.value):i(u.value).then(l,c)}s((r=r.apply(t,e||[])).next())})},Y=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(s){return function(u){return c([s,u])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=e.call(t,n)}catch(u){s=[6,u],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Cs=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Mr=function(){function t(e){var n=e||{};if(typeof n!="object")throw new Error(""+Gi);if(n.defaultScope===void 0)n.defaultScope=k.Transient;else if(n.defaultScope!==k.Singleton&&n.defaultScope!==k.Transient&&n.defaultScope!==k.Request)throw new Error(""+Ki);if(n.autoBindInjectable===void 0)n.autoBindInjectable=!1;else if(typeof n.autoBindInjectable!="boolean")throw new Error(""+Yi);if(n.skipBaseClassChecks===void 0)n.skipBaseClassChecks=!1;else if(typeof n.skipBaseClassChecks!="boolean")throw new Error(""+Ji);this.options={autoBindInjectable:n.autoBindInjectable,defaultScope:n.defaultScope,skipBaseClassChecks:n.skipBaseClassChecks},this.id=Ke(),this._bindingDictionary=new _e,this._snapshots=[],this._middleware=null,this._activations=new _e,this._deactivations=new _e,this.parent=null,this._metadataReader=new Po,this._moduleActivationStore=new Es}return t.merge=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new t,o=Cs([e,n],r,!0).map(function(s){return ct(s)}),l=ct(a);function c(s,u){s.traverse(function(f,d){d.forEach(function(g){u.add(g.serviceIdentifier,g.clone())})})}return o.forEach(function(s){c(s,l)}),a},t.prototype.load=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=this._getContainerModuleHelpersFactory(),i=0,a=e;i<a.length;i++){var o=a[i],l=r(o.id);o.registry(l.bindFunction,l.unbindFunction,l.isboundFunction,l.rebindFunction,l.unbindAsyncFunction,l.onActivationFunction,l.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return K(this,void 0,void 0,function(){var r,i,a,o,l;return Y(this,function(c){switch(c.label){case 0:r=this._getContainerModuleHelpersFactory(),i=0,a=e,c.label=1;case 1:return i<a.length?(o=a[i],l=r(o.id),[4,o.registry(l.bindFunction,l.unbindFunction,l.isboundFunction,l.rebindFunction,l.unbindAsyncFunction,l.onActivationFunction,l.onDeactivationFunction)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n.forEach(function(i){var a=e._removeModuleBindings(i.id);e._deactivateSingletons(a),e._removeModuleHandlers(i.id)})},t.prototype.unloadAsync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return K(this,void 0,void 0,function(){var r,i,a,o;return Y(this,function(l){switch(l.label){case 0:r=0,i=e,l.label=1;case 1:return r<i.length?(a=i[r],o=this._removeModuleBindings(a.id),[4,this._deactivateSingletonsAsync(o)]):[3,4];case 2:l.sent(),this._removeModuleHandlers(a.id),l.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.bind=function(e){var n=this.options.defaultScope||k.Transient,r=new Bo(e,n);return this._bindingDictionary.add(e,r),new ws(r)},t.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},t.prototype.rebindAsync=function(e){return K(this,void 0,void 0,function(){return Y(this,function(n){switch(n.label){case 0:return[4,this.unbindAsync(e)];case 1:return n.sent(),[2,this.bind(e)]}})})},t.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var n=this._bindingDictionary.get(e);this._deactivateSingletons(n)}this._removeServiceFromDictionary(e)},t.prototype.unbindAsync=function(e){return K(this,void 0,void 0,function(){var n;return Y(this,function(r){switch(r.label){case 0:return this._bindingDictionary.hasKey(e)?(n=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}})})},t.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse(function(n,r){e._deactivateSingletons(r)}),this._bindingDictionary=new _e},t.prototype.unbindAllAsync=function(){return K(this,void 0,void 0,function(){var e,n=this;return Y(this,function(r){switch(r.label){case 0:return e=[],this._bindingDictionary.traverse(function(i,a){e.push(n._deactivateSingletonsAsync(a))}),[4,Promise.all(e)];case 1:return r.sent(),this._bindingDictionary=new _e,[2]}})})},t.prototype.onActivation=function(e,n){this._activations.add(e,n)},t.prototype.onDeactivation=function(e,n){this._deactivations.add(e,n)},t.prototype.isBound=function(e){var n=this._bindingDictionary.hasKey(e);return!n&&this.parent&&(n=this.parent.isBound(e)),n},t.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},t.prototype.isBoundNamed=function(e,n){return this.isBoundTagged(e,re,n)},t.prototype.isBoundTagged=function(e,n,r){var i=!1;if(this._bindingDictionary.hasKey(e)){var a=this._bindingDictionary.get(e),o=Vo(this,e,n,r);i=a.some(function(l){return l.constraint(o)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,n,r)),i},t.prototype.snapshot=function(){this._snapshots.push(Ss.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var e=this._snapshots.pop();if(e===void 0)throw new Error(Ui);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(i,a){return a(i)},r)},t.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},t.prototype.get=function(e){var n=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(n)},t.prototype.getAsync=function(e){return K(this,void 0,void 0,function(){var n;return Y(this,function(r){return n=this._getNotAllArgs(e,!1),[2,this._get(n)]})})},t.prototype.getTagged=function(e,n,r){var i=this._getNotAllArgs(e,!1,n,r);return this._getButThrowIfAsync(i)},t.prototype.getTaggedAsync=function(e,n,r){return K(this,void 0,void 0,function(){var i;return Y(this,function(a){return i=this._getNotAllArgs(e,!1,n,r),[2,this._get(i)]})})},t.prototype.getNamed=function(e,n){return this.getTagged(e,re,n)},t.prototype.getNamedAsync=function(e,n){return this.getTaggedAsync(e,re,n)},t.prototype.getAll=function(e){var n=this._getAllArgs(e);return this._getButThrowIfAsync(n)},t.prototype.getAllAsync=function(e){var n=this._getAllArgs(e);return this._getAll(n)},t.prototype.getAllTagged=function(e,n,r){var i=this._getNotAllArgs(e,!0,n,r);return this._getButThrowIfAsync(i)},t.prototype.getAllTaggedAsync=function(e,n,r){var i=this._getNotAllArgs(e,!0,n,r);return this._getAll(i)},t.prototype.getAllNamed=function(e,n){return this.getAllTagged(e,re,n)},t.prototype.getAllNamedAsync=function(e,n){return this.getAllTaggedAsync(e,re,n)},t.prototype.resolve=function(e){var n=this.isBound(e);n||this.bind(e).toSelf();var r=this.get(e);return n||this.unbind(e),r},t.prototype._preDestroy=function(e,n){if(Reflect.hasMetadata(Wt,e)){var r=Reflect.getMetadata(Wt,e);return n[r.value]()}},t.prototype._removeModuleHandlers=function(e){var n=this._moduleActivationStore.remove(e);this._activations.removeIntersection(n.onActivations),this._deactivations.removeIntersection(n.onDeactivations)},t.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition(function(n){return n.moduleId===e})},t.prototype._deactivate=function(e,n){var r=this,i=Object.getPrototypeOf(n).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var a=this._deactivateContainer(n,this._deactivations.get(e.serviceIdentifier).values());if(V(a))return this._handleDeactivationError(a.then(function(){return r._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,n,i)}),i)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,n,i);if(V(o))return this._handleDeactivationError(o,i)}catch(l){throw new Error(qt(i.name,l.message))}},t.prototype._handleDeactivationError=function(e,n){return K(this,void 0,void 0,function(){var r;return Y(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return i.sent(),[3,3];case 2:throw r=i.sent(),new Error(qt(n.name,r.message));case 3:return[2]}})})},t.prototype._deactivateContainer=function(e,n){for(var r=this,i=n.next();i.value;){var a=i.value(e);if(V(a))return a.then(function(){return r._deactivateContainerAsync(e,n)});i=n.next()}},t.prototype._deactivateContainerAsync=function(e,n){return K(this,void 0,void 0,function(){var r;return Y(this,function(i){switch(i.label){case 0:r=n.next(),i.label=1;case 1:return r.value?[4,r.value(e)]:[3,3];case 2:return i.sent(),r=n.next(),[3,1];case 3:return[2]}})})},t.prototype._getContainerModuleHelpersFactory=function(){var e=this,n=function(u,f){u._binding.moduleId=f},r=function(u){return function(f){var d=e.bind(f);return n(d,u),d}},i=function(){return function(u){return e.unbind(u)}},a=function(){return function(u){return e.unbindAsync(u)}},o=function(){return function(u){return e.isBound(u)}},l=function(u){return function(f){var d=e.rebind(f);return n(d,u),d}},c=function(u){return function(f,d){e._moduleActivationStore.addActivation(u,f,d),e.onActivation(f,d)}},s=function(u){return function(f,d){e._moduleActivationStore.addDeactivation(u,f,d),e.onDeactivation(f,d)}};return function(u){return{bindFunction:r(u),isboundFunction:o(),onActivationFunction:c(u),onDeactivationFunction:s(u),rebindFunction:l(u),unbindFunction:i(),unbindAsyncFunction:a()}}},t.prototype._getAll=function(e){return Promise.all(this._get(e))},t.prototype._get=function(e){var n=ft(ft({},e),{contextInterceptor:function(i){return i},targetType:Ge.Variable});if(this._middleware){var r=this._middleware(n);if(r==null)throw new Error(qi);return r}return this._planAndResolve()(n)},t.prototype._getButThrowIfAsync=function(e){var n=this._get(e);if(Pr(n))throw new Error(Wi(e.serviceIdentifier));return n},t.prototype._getAllArgs=function(e){var n={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e};return n},t.prototype._getNotAllArgs=function(e,n,r,i){var a={avoidConstraints:!1,isMultiInject:n,serviceIdentifier:e,key:r,value:i};return a},t.prototype._planAndResolve=function(){var e=this;return function(n){var r=Wo(e._metadataReader,e,n.isMultiInject,n.targetType,n.serviceIdentifier,n.key,n.value,n.avoidConstraints);r=n.contextInterceptor(r);var i=_s(r);return i}},t.prototype._deactivateIfSingleton=function(e){var n=this;if(!!e.activated)return V(e.cache)?e.cache.then(function(r){return n._deactivate(e,r)}):this._deactivate(e,e.cache)},t.prototype._deactivateSingletons=function(e){for(var n=0,r=e;n<r.length;n++){var i=r[n],a=this._deactivateIfSingleton(i);if(V(a))throw new Error(Vi)}},t.prototype._deactivateSingletonsAsync=function(e){return K(this,void 0,void 0,function(){var n=this;return Y(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(i){return n._deactivateIfSingleton(i)}))];case 1:return r.sent(),[2]}})})},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,n,r){return this.parent?this._deactivate.bind(this.parent)(e,n):this._bindingDeactivationAndPreDestroy(e,n,r)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,n,r){return K(this,void 0,void 0,function(){return Y(this,function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,n)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,n,r)];case 3:i.sent(),i.label=4;case 4:return[2]}})})},t.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch{throw new Error(Hi+" "+Ue(e))}},t.prototype._bindingDeactivationAndPreDestroy=function(e,n,r){var i=this;if(typeof e.onDeactivation=="function"){var a=e.onDeactivation(n);if(V(a))return a.then(function(){return i._preDestroy(r,n)})}return this._preDestroy(r,n)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(e,n,r){return K(this,void 0,void 0,function(){return Y(this,function(i){switch(i.label){case 0:return typeof e.onDeactivation!="function"?[3,2]:[4,e.onDeactivation(n)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(r,n)];case 3:return i.sent(),[2]}})})},t}();function $r(){return Qi(new we(ir,!0))}function jr(){return hn({push(t){if(t.created_at>ne())return ie.BREAK}})}function Rs(t){return{push(e,n){return Ts(e,t,n.length)?ie.NEXT:ie.BREAK}}}function Ts(t,e,n){return e.length===0?!0:e.some(r=>Os(t,r,n))}function Os(t,e,n){const{ids:r,kinds:i,authors:a,since:o,until:l,limit:c,search:s}=e;return r&&!r.includes(t.id)||i&&!i.includes(t.kind)||a&&!a.includes(t.pubkey)||o&&!(t.created_at>=o)||l&&!(t.created_at<=l)||c&&!(n<c)?!1:xs(e,t.tags)?!(s&&!JSON.stringify(t).toLowerCase().includes(s.toLowerCase())):!1}function xs(t,e){for(let n in t)if(n[0]==="#"){let r=n.slice(1),i=t[`#${r}`];if(i&&!e.find(([a,o])=>a===r&&i.includes(o)))return!1}return!0}const Mn=q({__name:"CollectProvideItem",props:{event:null,data:null,collect:null,uncollect:null},setup(t){const e=t,{collect:n,uncollect:r,data:i}=oi(e),a=nr(),o=Q(()=>!!e.event&&a.hasByData(e.event,e.data));function l(){c.value?(r.value.add(i.value.name),n.value.delete(i.value.name)):(n.value.add(i.value.name),r.value.delete(i.value.name))}const c=Q(()=>n.value.has(i.value.name)?!0:r.value.has(i.value.name)?!1:o.value);return(s,u)=>{const f=fa,d=at,g=da;return z(),Re(g,null,{suffix:R(()=>[T(d,null,{default:R(()=>[T(f,{checked:C(c),"onUpdate:checked":l},null,8,["checked"])]),_:1})]),default:R(()=>[se("span",null,D(`${C(i).name}(${C(i).size})`),1)]),_:1})}}}),Bs={class:"flex flex-col h-full w-full"},Ps=q({__name:"CollectProvide",setup(t){const e=wi(),n=nr(),r=Q(()=>n.getList()),i=N(new Set),a=N(new Set),o=Si(),l=Ai(),c=Ei(),s=Xi(async()=>await n.getCollect("default"));async function u(){const S=e.event.value;if(!!S){for(const x of i.value)await n.addCollectByEvent(x,S);for(const x of a.value)await n.deleteCollectByEvent(x,S);o(S),l(S.pubkey),c(S.pubkey),i.value.clear(),a.value.clear(),e.show.value=!1}}const f=N(!1);function d(){f.value=!0}const g=N("");function h(){const S=e.event.value;!S||(n.addCollectByEvent(g.value,S),o(S),l(S.pubkey),c(S.pubkey))}const A=Q(()=>e.event.value);return(S,x)=>{const v=ga,m=ur,b=at,_=ha;return z(),G(fe,null,[T(Ht,{placement:"bottom",height:"100%",show:f.value,"onUpdate:show":x[1]||(x[1]=E=>f.value=E),closable:""},{default:R(()=>[T(b,{vertical:""},{default:R(()=>[T(v,{value:g.value,"onUpdate:value":x[0]||(x[0]=E=>g.value=E),placeholder:C(j)("name")},null,8,["value","placeholder"]),T(m,{onClick:h},{default:R(()=>[J(D(C(j)("complete")),1)]),_:1})]),_:1})]),_:1},8,["show"]),T(Ht,{placement:"bottom",height:"80%",show:C(e).show.value,"onUpdate:show":x[2]||(x[2]=E=>C(e).show.value=E),closable:""},{footer:R(()=>[T(m,{onClick:d},{default:R(()=>[J(D(C(j)("create")),1)]),_:1})]),default:R(()=>[se("div",Bs,[T(cr,{class:"flex-shrink flex-1"},{default:R(()=>[T(_,{bordered:""},{default:R(()=>[!C(s)&&C(A)?(z(),Re(Mn,{collect:i.value,uncollect:a.value,key:"deafault",event:C(A),data:{name:"default",map:new Map,size:0}},null,8,["collect","uncollect","event","data"])):Z("",!0),C(A)?(z(!0),G(fe,{key:1},Xn(C(r),E=>(z(),Re(Mn,{collect:i.value,uncollect:a.value,key:E.name,event:C(A),data:E},null,8,["collect","uncollect","event","data"]))),128)):Z("",!0)]),_:1})]),_:1}),T(m,{onClick:u},{default:R(()=>[J(D(C(j)("complete")),1)]),_:1})])]),_:1},8,["show"]),Le(S.$slots,"default")],64)}}}),Is=q({__name:"LoadProgressProvide",setup(t){return ya(),(e,n)=>Le(e.$slots,"default")}}),Ls={key:0},Ns={key:0},Ds={key:1},Ms={key:2},$s={key:3},js={key:4},ks={key:5},Fs={key:6},zs={key:7},Us={class:"mt-4"},qs={class:"flex w-full"},Ws=q({__name:"NostrConnect",setup(t){const e=_a(),n=Zi(p.NostrConnect),r=Q(()=>{if(e.value)return n.createNostrConnectEventLine({pubkey:e.value})}),i=N(new Set),a=N([]),o=N();zt(()=>{var d;(d=r.value)==null||d.feat.onRequestAuthorization(g=>{const h=g.requistOpt.id;i.value.has(h)||(i.value.add(g.requistOpt.id),a.value.push(g))})});const l=N(!1);zt(()=>{var g;const d=a.value.length;o.value||d>0?((g=o.value)!=null||(o.value=a.value.pop()),l.value=!0):l.value=!1});const c=N();function s(){var d;(d=o.value)==null||d.allow(c.value),o.value=void 0}function u(){var g;o.value&&((g=o.value)==null||g.refuse(c.value),o.value=void 0)}function f(d,g){return si(async()=>await dn.nip04.decrypt(d,g))}return(d,g)=>{const h=ba,A=at,S=wa,x=ur,v=at;return z(),G(fe,null,[T(Ht,{show:l.value,placement:"top",height:400,closable:""},{header:R(()=>{var m;return[J(D(o.value&&C(j)((m=o.value)==null?void 0:m.requistOpt.method))+" ",1),a.value.length>0?(z(),G("span",Ls," ("+D(a.value.length)+") ",1)):Z("",!0)]}),default:R(()=>[T(cr,null,{default:R(()=>{var m,b,_,E,P,$,H;return[o.value?(z(),G("span",Ns,D(o.value.event.pubkey.slice(0,10)),1)):Z("",!0),((m=o.value)==null?void 0:m.requistOpt.method)==="describe"?(z(),G("div",Ds,D(C(j)("want_to_obtain_descriptive_information")),1)):Z("",!0),((b=o.value)==null?void 0:b.requistOpt.method)==="connect"?(z(),G("div",Ms,D(C(j)("want_to_establish_a_connection_with_you")),1)):Z("",!0),((_=o.value)==null?void 0:_.requistOpt.method)==="get_relays"?(z(),G("div",$s,D(C(j)("want_to_obtain_your_relays")),1)):Z("",!0),((E=o.value)==null?void 0:E.requistOpt.method)==="get_public_key"?(z(),G("div",js,D(C(j)("want_to_obtain_your_public_key")),1)):Z("",!0),((P=o.value)==null?void 0:P.requistOpt.method)==="nip04_encrypt"?(z(),G("div",ks,[J(D(C(j)("want_to_encrypt_the_following_content"))+" ",1),se("p",null,[J(D(C(j)("send_to")),1),T(Tn,{pubkey:o.value.requistOpt.params[0]},null,8,["pubkey"])]),se("p",null,D(o.value.requistOpt.params[1]),1)])):Z("",!0),(($=o.value)==null?void 0:$.requistOpt.method)==="nip04_decrypt"?(z(),G("div",Fs,[J(D(C(j)("want_to_decrypt_the_following_content"))+" ",1),se("p",null,[J(D(C(j)("sender")),1),T(Tn,{pubkey:o.value.requistOpt.params[0]},null,8,["pubkey"])]),se("p",null,D(f(...o.value.requistOpt.params)),1)])):Z("",!0),((H=o.value)==null?void 0:H.requistOpt.method)==="sign_event"?(z(),G("div",zs,[J(D(C(j)("want_to_sign_the_following_event"))+" ",1),T(Ci,{event:o.value.requistOpt.params[0]},null,8,["event"])])):Z("",!0),se("p",Us,D(C(j)("not_asking_anymore")),1),T(S,{value:c.value,"onUpdate:value":g[0]||(g[0]=X=>c.value=X),name:"radiogroup"},{default:R(()=>[T(A,null,{default:R(()=>[(z(!0),G(fe,null,Xn([[15*60*1e3,`15${C(j)("minutes")}`],[24*3600*1e3,`1${C(j)("day")}`],[7*24*3600*1e3,`7${C(j)("day")}`],[30*24*3600*1e3,`30${C(j)("day")}`]],X=>(z(),Re(h,{key:X[0],value:X[0]},{default:R(()=>[J(D(X[1]),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]}),_:1})]),footer:R(()=>[se("div",qs,[T(v,{class:"w-full",vertical:""},{default:R(()=>[T(A,{class:""},{default:R(()=>[T(x,{onClick:s},{default:R(()=>[J(D(C(j)("allow")),1)]),_:1}),T(x,{onClick:u},{default:R(()=>[J(D(C(j)("refuse")),1)]),_:1})]),_:1})]),_:1})])]),_:1},8,["show"]),Le(d.$slots,"default")],64)}}});function dt(t){var e,n;return(n=t==null?void 0:t.targetEventBeltline)!=null?n:((e=t==null?void 0:t.from)!=null?e:He).createChild(Object.assign({slef:ge({})},t))}function kr(){const t=new Set;return hn({push(e){if(t.has(e.content))return ie.BREAK;t.add(e.content)}})}const Vs=t=>`createRefreshLoadStaff:${JSON.stringify(t)}`,$n={...Zn,duration:1e3*60},wn=Ne()((t,e=20,n)=>{var x;const r=new WeakMap,i=Vs(t),a=(x=li(i,$n))!=null?x:{loadBufferOpt:n==null?void 0:n.loadBufferOpt,refreshBufferOpt:{minSince:ne(),...n==null?void 0:n.refreshBufferOpt}},o=A(a.loadBufferOpt),l=A(a.refreshBufferOpt);return{initialization(){var m;const v=(m=n==null?void 0:n.eventBeltline)!=null?m:this.beltline;S(v,l,!0),S(v,o,!1)},feat:{loadBufferOpt:o,refreshBufferOpt:l,firstLoad(){const v=this.beltline.feat.loadBufferOpt;v.isLoading=!0;const m=this.beltline,b=m.createChild().addFilters(t.map(_=>({..._,limit:e}))).addStaff(de()).addStaff(he()).addStaff({push(){v.bufferCounter.count+1>=e&&(v.isLoading=!1)}});setTimeout(()=>{v.isLoading=!1},20),m.onAddRelayUrlsAfter(_=>{b.addRelayUrls(_)}),b.addRelayUrls(m.getRelayUrls()),v.bufferLine.addExtends(b)},refresh(){const v=(m,b)=>{const _=b.until,E=b.until+b.timeIncrement;if(E>ne()){if(m(),b.timeIncrement=b.timeIncrement/2,b.timeIncrement<60&&(b.timeIncrement=60),_>ne()){b.until=ne();return}}else b.until=E;return t.map(P=>({...P,since:_,until:E}))};s(this.beltline.feat.refreshBufferOpt,this.beltline,v)},load(){const v=(m,b)=>{const _=b.since,E=b.since=b.since-b.timeIncrement;if(!(E<1640966400&&(m(),_<1640966400)))return t.map(P=>({...P,since:E,until:_}))};s(this.beltline.feat.loadBufferOpt,this.beltline,v)}}};function c(v){clearInterval(v.intervalId),v.isLoading=!1}function s(v,m,b){if(c(v),t.length===0)return;const _=m.getRelayUrls(),E=v.bufferLine.getList(),P=E.splice(E.length-e,e);P.length<e&&f(v,_,P.length,(...$)=>{const H=b(...$);return u(m),H}),g(P,m)}function u(v){er(i,{loadBufferOpt:{timeIncrement:v.feat.loadBufferOpt.timeIncrement},refreshBufferOpt:{timeIncrement:v.feat.refreshBufferOpt.timeIncrement}},$n)}function f(v,m,b,_){var P;v.bufferCounter.count>e&&(v.timeIncrement=Math.floor(v.timeIncrement/(v.bufferCounter.count/e))),v.timeIncrement<60&&(v.timeIncrement=60),v.bufferCounter.set(b),c(v),v.isLoading=!0,v.intervalId=setInterval(E,(P=n==null?void 0:n.interval)!=null?P:3e3),setTimeout(()=>E(!0));function E($){if(v.isLoading=!0,v.bufferCounter.count>=e){c(v);return}else $||(v.timeIncrement=v.timeIncrement*2);const H=_(()=>c(v),v);if(!!H&&m.size!==0)for(const X of m)v.bufferLine.addExtends(v.bufferLine.createChild().addStaff(he()).addStaff(de()).addFilters(H).addRelayUrl(X))}}function d(v,m){r.set(v,{event:v,opt:m})}function g(v,m){for(const b of v){const _=h(b);m.pushEvent(b,_==null?void 0:_.opt)}}function h(v){const m=r.get(v);return r.delete(v),m}function A(v){return Object.assign({bufferLine:void 0,bufferCounter:ci(0),timeIncrement:1200,until:ne(),since:ne(),createTime:ne(),minSince:1640966400,intervalId:void 0,isLoading:!1},v)}function S(v,m,b){var E;const _=fn(()=>{const P=m.bufferLine.getList(),$=P.splice(P.length-e,e);g($,v)},((E=n==null?void 0:n.interval)!=null?E:3e3)+1e3);m.bufferLine=v.createChild().addStaff(yt()).addStaff({push(P,$,H){d(P,H),m.bufferCounter.reduce(),_()}}),b?m.bufferLine.addStaffOfReverseSortByCreateAt():m.bufferLine.addStaffOfSortByCreateAt()}}),Fr=Ne()(()=>({initialization(){this.beltline.feat.loadBufferOpt.bufferLine.addStaff(st(),{unshift:!0}),this.beltline.feat.refreshBufferOpt.bufferLine.addStaff(st(),{unshift:!0})}})),Hs=Ne()(t=>({initialization(){const e=it.channelMetadataEventMap.get(t);e&&this.beltline.pushEvent(e),this.beltline.feat.onHasLatestEvent(n=>{it.channelMetadataEventMap.set(t,n)})}}));var Gs=Object.defineProperty,Ks=Object.getOwnPropertyDescriptor,Ys=(t,e,n,r)=>{for(var i=r>1?void 0:r?Ks(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Gs(e,n,i),i},Js=(t,e)=>(n,r)=>e(n,r,t),Mt;let Gt=(Mt=class{constructor(t){this.rootEventBeltline=t}getChannelMetadataBeltlineByChannelId(t){return te(`getChannelMetadataBeltlineByChannelId:${t}`,()=>{const e=dt({describe:"getChannelMetadataBeltlineByChannelId",from:this.rootEventBeltline}).addFilter({ids:[t],kinds:[40]}).addFilter({kinds:[41],"#e":[t]}).addStaff(Te()).addStaff(rr()).addStaff(de()).addStaff(he()).addStaff(Hs(t)).addStaff(Oe());return e.feat.withEvent()||e.addStaff(Vt(t)).addReadUrl(),e},{useMemoryCache:!0,useLocalStorage:!1})}getChannelMessageBeltline(t,e){return te(`etChannelMessageBeltline:${t}`,()=>{const n=dt({describe:"getChannelMessageBeltline",from:this.rootEventBeltline}).addStaff(wn([{kinds:[42],"#e":[t]}])).addStaff(Fr()).addStaff(yt()).addStaff(jr()).addStaff(kr()).addStaff(fr()).addStaffOfSortByCreateAt();return setTimeout(()=>{n.addExtends(n.createChild().addRelayUrls(e==null?void 0:e.urls).onAddRelayUrlsAfter(r=>{n.addRelayUrls(r)}).addFilter({ids:[t],kinds:[40]}).addFilter({kinds:[41],"#e":[t]}).addFilter({kinds:[42],"#e":[t],since:ne()}).addStaff(Vt(t)).addReadUrl()),n.feat.firstLoad()},0),n},{useLocalStorage:!1})}},w(Mt,"logger",logger),Mt);Gt=Ys([F(),Js(0,U(p.RootEventBeltline))],Gt);function Ye(t){return U(new mn(()=>t))}var Qs=Object.defineProperty,Xs=Object.getOwnPropertyDescriptor,Zs=(t,e,n,r)=>{for(var i=r>1?void 0:r?Xs(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Qs(e,n,i),i},el=(t,e)=>(n,r)=>e(n,r,t);const uu=window[Symbol.for("loggerFactory")].create("src/api/Contact.ts");let Kt=class{constructor(t){this.createEventBeltline=t}getContactListLineByPubkey(t,e){return te(`getContactListLineByPubkey:${t}`,()=>{const n=this.createEventBeltline.createEventBeltlineReactive().addFilter({kinds:[3],authors:[t]}).addStaff(Te()).addStaff(de()).addStaff(he()).addStaff({feat:{getContactList(){const i=this.beltline.feat.getLatestEvent();return i?ea(i.tags):[]}}}).addStaff(Oe());return(async()=>{n.addRelayUrls(e==null?void 0:e.urls),n.addStaff(ve(t)),n.addReadUrl()})(),n},{useLocalStorage:!1})}getFollowerLineByPubkey(t,e){return te(`getFollowerLineByPubkey:${t}`,()=>{const n=this.createEventBeltline.createEventBeltlineReactive({name:"getFollowerLineByPubkey"}).addStaff(wn([{kinds:[3],"#p":[t]}],100)).addStaff(yt()).addStaff(ve(t)).addReadUrl().addRelayUrls(e==null?void 0:e.urls);return n.feat.load(),n},{useLocalStorage:!1,duration:1e5})}};Kt=Zs([F(),el(0,Ye(p.CreateEventBeltline))],Kt);var tl=Object.defineProperty,nl=Object.getOwnPropertyDescriptor,rl=(t,e,n,r)=>{for(var i=r>1?void 0:r?nl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&tl(e,n,i),i},il=(t,e)=>(n,r)=>e(n,r,t);let Yt=class{constructor(t){this.rootEventBeltline=t}createEventBeltline(t){var e,n;return(n=t==null?void 0:t.targetEventBeltline)!=null?n:((e=t==null?void 0:t.from)!=null?e:this.rootEventBeltline).createChild(Object.assign({},t))}createEventBeltlineReactive(t){var e,n;return(n=t==null?void 0:t.targetEventBeltline)!=null?n:((e=t==null?void 0:t.from)!=null?e:this.rootEventBeltline).createChild(Object.assign({slef:ge({})},t))}};Yt=rl([F(),il(0,Ye(p.RootEventBeltline))],Yt);const al=Ne()(t=>{function e(){return`${t.kind}:${t.pubkey}:${t.identifier}`}return{initialization(){try{const n=it.replaceable.get(e());n&&this.beltline.pushEvent(n)}catch{}this.beltline.feat.onHasLatestEvent(n=>{it.replaceable.set(e(),n)})}}});var ol=Object.defineProperty,sl=Object.getOwnPropertyDescriptor,ll=(t,e,n,r)=>{for(var i=r>1?void 0:r?sl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&ol(e,n,i),i},jn=(t,e)=>(n,r)=>e(n,r,t);let Jt=class{constructor(t,e){w(this,"_deleteionLine",null);this.rootEventBeltline=t,this.createEventBeltline=e}getDeleteionLine(){var t;return(t=this._deleteionLine)!=null?t:this.createEventBeltline.createEventBeltline()}async eventDeletion(t,e,n){return new Promise(async(r,i)=>{this.getDeleteionLine().publish({kind:5,pubkey:await dn.getPublicKey(),tags:t.map(a=>["e",a])},ui(ot.getWriteList(),e!=null?e:new Set),n)})}eventDeletionOne(t,e){this.eventDeletion([t],e==null?void 0:e.urls,e)}publishEvent(t){this.rootEventBeltline.createChild().publish(t,ot.getWriteList())}createGetEventLineByAddress(t){const e=Sa(t);if(e)return this.createGetEventLineByAddressPointer(e);throw new Error("Not an address")}createGetEventLineByAddressPointer(t,e){return te(`createGetEventLineByAddressPointer:${Aa.naddrEncode(t)}`,()=>{const n={["#d"]:[t.identifier],authors:[t.pubkey],kinds:[t.kind]},r=dt({describe:"\u83B7\u53D6Event\u901A\u8FC7id"}).addFilter(n).addStaff(Oe()).addStaff(Te()).addStaff(al(t)).addStaff(st()).addStaff(de()).addStaff(he());let i=!1;const a=async()=>{i||(i=!0,r.addStaff(ve(t.pubkey)),!await r.feat.timeoutWithEvent()&&((e==null?void 0:e.urls)&&e.urls.size>0&&(r.addRelayUrls(e.urls),await r.feat.timeoutWithEvent())||(r.addReadUrl(),await r.feat.timeoutWithEvent())))};return nt(`createGetEventLineByAddressPointer:${t.kind}:${t.pubkey}:${t.identifier}`,()=>{a()},20*1e3),r.feat.withEvent()||a(),r},{useLocalStorage:!1})}getEventLineById(t,e){return te("getEventLineById"+t,()=>{const n=dt({describe:"\u83B7\u53D6Event\u901A\u8FC7id"}).addFilter({ids:[t],limit:1}).addStaff(ta()).addStaff(Oe()).addStaff(st()).addStaff(de()).addStaff(he());if(n.addStaff(na(t)),n.feat.withEvent()||(n.addExtends(He),n.feat.withEvent()))return n;const r=async()=>{(e==null?void 0:e.urls)&&e.urls.size>0&&(n.addRelayUrls(e.urls),await n.feat.timeoutWithEvent())||e!=null&&e.pubkey&&(n.addStaff(ve(e.pubkey)),await n.feat.timeoutWithEvent())||(n.addReadUrl(),await n.feat.timeoutWithEvent())};return nt(`getEventLineById:${t}`,()=>{r()},20*1e3),n},{useLocalStorage:!1})}};Jt=ll([F(),jn(0,U(p.RootEventBeltline)),jn(1,U(p.CreateEventBeltline))],Jt);function cl(t){const{filters:e=[],include:n=new Set(["ids","#e","authors","#p"])}=t!=null?t:{};let r=!1;return hn({async initialization(){const i=[...this.beltline.getFilters(),...e],a=On(["authors","#p"].filter(l=>n.has(l)),i);for(const l of a){if(await ze(1e3),r)return;this.beltline.addStaff(ve(l))}const o=On(["ids","#e"].filter(l=>n.has(l)),i);for(const l of o){if(await ze(1e3),r)return;this.beltline.addStaff(Vt(l))}},feat:{stopAutoAddRelayUrlByFilter(){r=!0}}})}const ul=Ne()(()=>({push(t){if(this.beltline.getNostrContainer().get(p.MuteListSynchronizer).getMuteList().publicList.has(t.pubkey))return ie.BREAK}})),St=()=>function(t,e,n){var o,l;const r=t.constructor,i=(l=(o=r.logger)!=null?o:t.logger)!=null?l:logger,a=n.value;return n.value=function(...c){i.silly(`Calling\xA0"${r.name}:${e}"\xA0with\xA0arguments:`,c);const s=a.apply(this,c);return i.silly(`Return\xA0value\xA0of\xA0"${r.name}:${e}":`,s),s},n};var fl=Object.defineProperty,dl=Object.getOwnPropertyDescriptor,zr=(t,e,n,r)=>{for(var i=r>1?void 0:r?dl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&fl(e,n,i),i},kn=(t,e)=>(n,r)=>e(n,r,t);const Fn=window[Symbol.for("loggerFactory")].create("src/api/GeneralEventEventBeltline.ts");var $t;let ht=($t=class{constructor(t,e){this.rootEventBeltline=t,this.createEventBeltline=e}createGeneralEventEventBeltline(t){return te(`createShortTextEventBeltline:${JSON.stringify(t.filters)}`,()=>{var i;const e=(i=t.limit)!=null?i:10,n=t.filters,r=this.createEventBeltline.createEventBeltlineReactive(fi(t,{describe:"\u901A\u7528\u4E8B\u4EF6\u67E5\u8BE2"})).addStaff(yt()).addStaff(ul()).addStaff(fr()).addStaff(kr()).addStaff(jr()).addStaff(wn(n,e)).addStaff(Fr()).addStaffOfReverseSortByCreateAt();if(Fn.debug("filters",r),n.length===0)return r;if(r.addReadUrl().addRelayUrls(t.urls).addRelayUrls(t.addUrls),t.pubkeys)for(const a of t.pubkeys)r.addStaff(ve(a,{urls:t.urls}));else t.urls||r.addStaff(cl({filters:n}));return r.feat.firstLoad(),r},{useLocalStorage:!1})}},w($t,"logger",Fn),$t);zr([St()],ht.prototype,"createGeneralEventEventBeltline",1);ht=zr([F(),kn(0,U(p.RootEventBeltline)),kn(1,Ye(p.CreateEventBeltline))],ht);var hl=Object.defineProperty,vl=Object.getOwnPropertyDescriptor,Ur=(t,e,n,r)=>{for(var i=r>1?void 0:r?vl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&hl(e,n,i),i},gl=(t,e)=>(n,r)=>e(n,r,t),jt;let vt=(jt=class{constructor(t){this.generalEventEventBeltline=t}createPinEventLine(t){return te(`createTipEventLine:${t.pubkey}`,()=>this.generalEventEventBeltline.createGeneralEventEventBeltline({filters:[{kinds:[10001],authors:[t.pubkey]}],...t}).addStaff(Te()),{useLocalStorage:!1})}},w(jt,"logger",logger),jt);Ur([St()],vt.prototype,"createPinEventLine",1);vt=Ur([F(),gl(0,U(new mn(()=>p.GeneralEventEventBeltline)))],vt);var pl=Object.defineProperty,yl=Object.getOwnPropertyDescriptor,qr=(t,e,n,r)=>{for(var i=r>1?void 0:r?yl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&pl(e,n,i),i},zn=(t,e)=>(n,r)=>e(n,r,t);const ml=window[Symbol.for("loggerFactory")].create("src/api/shortTextEventBeltline.ts");var kt;let gt=(kt=class{constructor(t,e){this.rootEventBeltline=t,this.generalEventEventBeltline=e}getShortTextEventBeltline(t,e){const n=t==null?void 0:t.map(r=>({kinds:[1],authors:[r]}));return this.generalEventEventBeltline.createGeneralEventEventBeltline({filters:n})}getReferenceMessage(t){return this.generalEventEventBeltline.createGeneralEventEventBeltline({filters:[{"#e":t,kinds:[1]}]})}},w(kt,"logger",ml),kt);qr([St()],gt.prototype,"getShortTextEventBeltline",1);gt=qr([F(),zn(0,U(p.RootEventBeltline)),zn(1,Ye(p.GeneralEventEventBeltline))],gt);var _l=Object.defineProperty,bl=Object.getOwnPropertyDescriptor,wl=(t,e,n,r)=>{for(var i=r>1?void 0:r?bl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&_l(e,n,i),i},Un=(t,e)=>(n,r)=>e(n,r,t);let Qt=class{constructor(t,e){this.eventApi=t,this.createEventBeltline=e}async sendUserMetadataByPubkey(t){return new Promise(async(e,n)=>{setTimeout(n,2e4),this.eventApi.publishEvent({kind:0,content:JSON.stringify(t)})})}getUserRelayUrlConfigByPubkey(t){return te(`getUserRelayUrlConfigByPubkey:${t}`,()=>{const e=this.createEventBeltline.createEventBeltlineReactive().addFilter({kinds:[10002],authors:[t]}).addStaff(Te()).addStaff(Rn(10002,t)).addStaff(ra()).addStaff(ia()).addStaff(Oe()).addExtends(He);return e.feat.withEvent()||e.createChild().addStaff(ve(t)),e},{useLocalStorage:!1})}getUserMetadataLineByPubkey(t,e){const{urls:n}=e!=null?e:{};return te(`getUserMetadataLineByPubkey:${t}`,()=>{const r=this.createEventBeltline.createEventBeltlineReactive().createChild({slef:ge({})}).addFilter({authors:[t],kinds:[0]}).addStaff(Te()).addStaff(Rn(0,t)).addStaff(rr()).addStaff(de()).addStaff(he()).addStaff(Oe()),i=async()=>{r.addRelayUrls(n),await ze(1e3),r.addStaff(ve(t)),await ze(1e3),r.addReadUrl()};return r.feat.isHas()?nt(`getUserMetadataLineByPubkey0${t}`,i,be.syncInterval4):nt(`getUserMetadataLineByPubkey1${t}`,i,be.syncInterval),r},{useLocalStorage:!1})}};Qt=wl([F(),Un(0,U(p.EventApi)),Un(1,U(p.CreateEventBeltline))],Qt);var Sl=Object.defineProperty,Al=Object.getOwnPropertyDescriptor,El=(t,e,n,r)=>{for(var i=r>1?void 0:r?Al(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Sl(e,n,i),i};let We=class extends La{constructor(e,n){super(e,n);w(this,"data");w(this,"changeAt",null);this.data=this.createDefault(),this.getLocalEvent()}async eventToFilter(e){return[]}async createKey(e){return""}async setData(e,n){this.data=n}async getData(){return this.data}async getDataKeys(){return[""]}getDataSync(){return this.data}async toChanged(){this.changeAt=ne()}hasChange(){return!!this.changeAt}async getChangeAt(){return this.changeAt}async changesSaved(){this.changeAt=null}getLocalEvent(){return this.getEvent("")}getUpdateAt(){return super.getUpdateAt("")}clear(){this.data=this.createDefault(),super.clear()}};We=El([F()],We);var Cl=Object.defineProperty,Rl=Object.getOwnPropertyDescriptor,Tl=(t,e,n,r)=>{for(var i=r>1?void 0:r?Rl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Cl(e,n,i),i};let pt=class extends We{constructor(t){super(t)}async getFilters(){return(await this.getAddressPointers()).map(t=>({kinds:[t.kind],authors:[t.pubkey],["#d"]:[t.identifier]}))}};pt=Tl([F()],pt);var Ol=Object.defineProperty,xl=Object.getOwnPropertyDescriptor,Bl=(t,e,n,r)=>{for(var i=r>1?void 0:r?xl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Ol(e,n,i),i};let Xt=class extends pt{constructor(){super("NostrConnectedsynchronizer"),this.sync()}createDefault(){return new Set}async getAddressPointers(){const t=await mt();return t?[{kind:xn,identifier:"NostrConnectedsynchronizer",pubkey:t}]:[]}async serializeToData(t){return new Set(t.tags.filter(e=>e[0]==="p"&&e[1]).map(e=>e[1]))}async deserializeToEvent(t,e){return await De({kind:xn,created_at:e,tags:[...Array.from(t,n=>["p",n])]})}hasConnected(t){return this.getNostrConnectedList().has(t)}connect(t){const e=this.getNostrConnectedList();e.has(t)||(e.add(t),this.toChanged(),this.save())}disConnect(t){const e=this.getNostrConnectedList();!e.has(t)||(e.delete(t),this.toChanged(),this.save())}getNostrConnectedList(){return this.getDataSync()}};Xt=Bl([F()],Xt);var Pl=Object.defineProperty,Il=Object.getOwnPropertyDescriptor,Ll=(t,e,n,r)=>{for(var i=r>1?void 0:r?Il(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Pl(e,n,i),i},Nl=(t,e)=>(n,r)=>e(n,r,t);let Zt=class{constructor(t){this.relayEmiter=t,this.listen()}listen(){this.relayEmiter.onAuth(t=>{this.sendAuth(t)})}async sendAuth(t){try{const e=await De({kind:22242,tags:[["relay",t.url],["challenge",t.challenge]]},{intercept:!1});this.relayEmiter.emitReqAuth(t.url,e)}catch{}}};Zt=Ll([F(),Nl(0,U(p.RelayEmiter))],Zt);const Dl=Ne()(()=>({initialization(){this.beltline.feat.pushEvent=function(t,e){e.push(t)}}}));var Ml=Object.defineProperty,$l=Object.getOwnPropertyDescriptor,Sn=(t,e,n,r)=>{for(var i=r>1?void 0:r?$l(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Ml(e,n,i),i},Ae=(t,e)=>(n,r)=>e(n,r,t);const ue=window[Symbol.for("loggerFactory")].create("src/nostr/eventBeltline.ts");let en=class{constructor(t){return t.__proto__=this.__proto__,t}};en=Sn([F()],en);let qn=0;var Ft;let Be=(Ft=class extends en{constructor(e,n,r,i,a){var o,l,c,s,u,f,d,g,h,A,S;super((o=e==null?void 0:e.slef)!=null?o:{});w(this,"logger",ue);w(this,"__EventBeltline__",!0);w(this,"id",qn++);w(this,"name",String(qn));w(this,"staffs",[]);w(this,"feat");w(this,"subidMap",new Map);w(this,"options");w(this,"urls",new Set);w(this,"filters",[]);w(this,"eventList",[]);w(this,"parent",null);w(this,"children",new Set);w(this,"extends",new Set);w(this,"extendTo",new Set);w(this,"root");w(this,"idGenerator");w(this,"relayEmiter");w(this,"relayConfiguratorFactory");w(this,"nostrContainer");w(this,"eventEmitter",new tr.exports.EventEmitter().setMaxListeners(200));ue.info("nostrContainer",n),this.idGenerator=(c=(l=e==null?void 0:e.idGenerator)!=null?l:r)!=null?c:Je("idGenerator",ue),this.relayEmiter=(u=(s=e==null?void 0:e.relayEmiter)!=null?s:i)!=null?u:Je("relayEmiter",ue),this.relayConfiguratorFactory=(d=(f=e==null?void 0:e.relayConfiguratorFactory)!=null?f:a)!=null?d:Je("getRelayConfigurator",ue),this.nostrContainer=(h=(g=e==null?void 0:e.nostrContainer)!=null?g:n)!=null?h:Je("nostrContainer",ue),this.options=e!=null?e:{},e&&(e.name&&(this.name=e.name),e.describe&&(this.name=e==null?void 0:e.describe)),this.root=(A=e==null?void 0:e.root)!=null?A:this,this.parent=(S=e==null?void 0:e.parent)!=null?S:null,this.feat={beltline:this},this.addFiltersStaff(this.filters,{unshift:!0}),this.addStaff(Dl())}static isEventBeltlin(e){return typeof e=="object"&&(e instanceof Be||Boolean(e.__EventBeltline__))}getNostrContainer(){return this.nostrContainer}getRelayEmiter(){return this.relayEmiter}getRelayConfigurator(){return this.relayConfiguratorFactory()}getRoot(){return this.root}getExtends(){return this.extends}getExtendTo(){return this.extendTo}addExtends(e,n){if(this.extends.add(e),e.extendTo.add(this),n!=null&&n.preventPushHistory)return this;for(const r of e.getList())this.pushEvent(r);return this}pushEvent(e,n,r=new Set){var l,c,s,u,f;if(r.has(this))return;r.add(this);const{subId:i,url:a}=n!=null?n:{};for(const d of this.staffs)(l=d.beforePush)==null||l.call(d,e,this.eventList);let o=ie.NEXT;for(const d of this.staffs){const g=(s=(c=d.push)==null?void 0:c.call(d,e,this.eventList,{lastState:o,subId:i,url:a}))!=null?s:ie.NEXT;if(o=g,g!==ie.NEXT)break}for(const d of this.staffs)o=(f=(u=d.afterPush)==null?void 0:u.call(d,e,this.eventList,o))!=null?f:o;o===ie.NEXT&&this.feat.pushEvent(e,this.eventList,{lastState:o,subId:i,url:a}),o===ie.NEXT&&this.extendTo.forEach(d=>{d.pushEvent(e,n,r)})}getRelayUrls(){return this.urls}addReadUrl(){return this.relayConfiguratorFactory&&this.addRelayUrls(this.relayConfiguratorFactory().getReadList()),this}addRelayUrl(e){return this.addRelayUrls(new Set().add(e)),this}addRelayUrls(e){if(!e)return this;if(e.size===0)return this;const n=di(this.urls,e);for(const r of n)this.urls.add(r);return this.reqs(n,this.filters),this.eventEmitter.emit("add-relay-urls",n,e),this}onAddRelayUrlsAfter(e){return this.eventEmitter.on("add-relay-urls",e),this}getFilters(){return this.filters}addFilter(e){return this.addFilters([e]),this}addFilters(e){return this.filters.push(...e),this.reqs(this.urls,e),this.eventEmitter.emit("add-filters",e),this}onAddFilters(e){return this.eventEmitter.on("add-filters",e),this}removeStaff(e){hi(this.staffs,e)}addStaff(e,n){return this.initializationStaff(e),n!=null&&n.unshift?this.staffs.unshift(e):this.staffs.push(e),this}initializationStaff(e){var n;e.feat&&Object.assign(this.feat,e.feat),e.beltline=this,(n=e.initialization)==null||n.call(e)}addFilterStaff(e,n){return this.addFiltersStaff([e],n),this}addFiltersStaff(e,n){const r=Rs(e);return this.addStaff(r,n),this}setParent(e){return this.parent=e,this}addChild(e){return this.children.add(e),this}createChild(e){const n=new Be(Object.assign({},{relayEmiter:this.relayEmiter,idGenerator:this.idGenerator,relayConfiguratorFactory:this.relayConfiguratorFactory,nostrContainer:this.nostrContainer,root:this.root,parent:this,slef:{}},e));return this.addChild(n),n}closeReq(){var e;for(const n of this.staffs)(e=n.onClose)==null||e.call(n);for(const n of this.children)n.closeReq();for(const[n,r]of this.subidMap)this._closeReq(n,r);this.eventEmitter.removeAllListeners()}_closeReq(e,n){this.relayEmiter.emitRequest("closeReq",{subId:e,url:n})}closeReqBySubid(e){if(!e)return;const n=this.subidMap.get(e);!n||this._closeReq(e,n)}offLine(){}map(e){return this.eventList.map(e)}getList(){return this.eventList}addStaffOfSortByCreateAt(){return this.addStaff({initialization(){this.beltline.feat.pushEvent=function(e,n){const r=vi(n,e.created_at,"created_at");n.splice(r,0,e)}}}),this}addStaffOfReverseSortByCreateAt(){return this.addStaff({initialization(){this.beltline.feat.pushEvent=function(e,n){const r=gi(n,e.created_at,"created_at");n.splice(r,0,e)}}}),this}reqs(e,n){n.length!==0&&(e==null||e.forEach(async r=>{try{this.req(r,n)}catch(i){ue.error(i)}}))}async publish(e,n,r){var c,s;const i=new Set(n);let a=!1;try{!dr(e)&&(a=!0)}catch{a=!0}if(a||(r==null?void 0:r.addUrl)){a=!0;const u=(c=e.tags)!=null?c:[],f=lr(u);for(const d of i)f.has(d)||u.push(["r",d]);$e(i,f),e.tags=u}let o=e;if(a){if(e.pubkey&&e.pubkey!==await mt())return;o=await De(e)}this.pushEvent(o),r!=null&&r.onOK&&this.relayEmiter.on("ok",o.id,r.onOK);const l=new Set;for(const u of(s=r==null?void 0:r.autoPublishToTagR)==null||s?i:n)this.toPublish(u,o),l.add(u);for(const u of this.getRelayUrls())l.has(u)||this.toPublish(u,o);return this.onAddRelayUrlsAfter(u=>{for(const f of u)l.has(f)||this.toPublish(f,o)}),o}req(e,n){const r=this.idGenerator.createId();this.onReceiveEvent(r),this.setSubidMap(r,e),this.relayEmiter.emitRequest("req",{subId:r,url:e,filters:n})}onReceiveEvent(e,n=new WeakSet){n.has(this)||(n.add(this),this.relayEmiter.on("event",e,({event:r,url:i})=>{this.pushEvent(r,{subId:e,url:i})}))}async toPublish(e,n){this.relayEmiter.emitRequest("publish",{event:n,url:e})}setSubidMap(e,n){this.subidMap.set(e,n),this.eventEmitter.emit("afterReq",{subId:e,url:n})}onAfterReq(e){return this.eventEmitter.on("afterReq",e),this}getUrlBySubId(e){return this.subidMap.get(e)}},w(Ft,"logger",ue),Ft);Sn([St()],Be.prototype,"createChild",1);Be=Sn([F(),Ae(0,U(Symbol.for("EventBeltline:options"))),Ae(0,$r()),Ae(1,U(p.NostrContainer)),Ae(2,U(p.IdGenerator)),Ae(3,U(p.RelayEmiter)),Ae(4,U(p.RelayConfiguratorFactory))],Be);var jl=Object.defineProperty,kl=Object.getOwnPropertyDescriptor,Fl=(t,e,n,r)=>{for(var i=r>1?void 0:r?kl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&jl(e,n,i),i};let tn=class{createId(){return pi()}};tn=Fl([F()],tn);var zl=Object.defineProperty,Ul=Object.getOwnPropertyDescriptor,ql=(t,e,n,r)=>{for(var i=r>1?void 0:r?Ul(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&zl(e,n,i),i},Wn=(t,e)=>(n,r)=>e(n,r,t);let nn=class{constructor(t){w(this,"eventEmiter",new tr.exports);w(this,"queue");w(this,"disabledQueue");var e,n,r;this.disabledQueue=(e=t==null?void 0:t.disabledQueue)!=null?e:!1,this.queue=(r=t==null?void 0:t.queue)!=null?r:yi((n=be.relayEmiterQueueInterval)!=null?n:be.relayEmiterQueueInterval=5),this.eventEmiter.setMaxListeners(1e3)}emit(t,e,n){const r=this.createEventName(t,e);!this.checkUp(r)||this.queueInsert(()=>{this.eventEmiter.emit(r,n)},be.priority[t])}queueInsert(t,e){if(this.disabledQueue){t();return}this.queue.insert(t,e)}checkUp(t){return this.eventEmiter.listenerCount(t)>0}emitEvent(t,e){this.eventEmiter.emit("event",e),this.emit("event",t,e)}onEvent(t){this.eventEmiter.on("event",t)}emitAuth(t){this.eventEmiter.emit("auth",t)}onAuth(t){this.eventEmiter.on("auth",t)}emitReqAuth(t,e){this.eventEmiter.emit("req-auth",{url:t,event:e})}onReqAuth(t){this.eventEmiter.on("req-auth",t)}on(t,e,n,r){this.eventEmiter.on(this.createEventName(t,e),n),r!=null&&r.overtime&&setTimeout(()=>{this.removeListener(t,e,n)},r.overtime)}once(t,e,n){this.eventEmiter.once(this.createEventName(t,e),n)}removeListener(t,e,n){this.eventEmiter.removeListener(this.createEventName(t,e),n)}onRequest(t,e){this.eventEmiter.on(t,e)}emitRequest(t,e){const n=t;!this.checkUp(n)||this.queueInsert(()=>{this.eventEmiter.emit(t,e)},be.priority[t])}removeRequestListener(t,e){this.eventEmiter.removeListener(t,e)}removeRequestAllListener(t){this.eventEmiter.removeAllListeners(t)}removeRequestAllTypeListener(){for(const t of["req","closeReq","publish","close"])this.removeRequestAllListener(t)}removeAllListener(t){["eose","event","notice","ok"].forEach(e=>this.eventEmiter.removeAllListeners(this.createEventName(e,t)))}createEventName(t,e){return`${t}:${e}`}};nn=ql([F(),Wn(0,U(Symbol())),Wn(0,$r())],nn);const ke=window[Symbol.for("loggerFactory")].create("src/nostr/server/Relay.ts");ke.info();class Wl{constructor(e,n,r){w(this,"ws");w(this,"pool");w(this,"subIds",new Set);w(this,"timeout");w(this,"isClose",!1);w(this,"relayEmiter");w(this,"publishIds",new Set);this.ws=e,this.ws.onmessage=this.handleMessage.bind(this),this.relayEmiter=n,this.pool=r}handleMessage(e){try{const n=JSON.parse(e.data);ke.debug("handleMessage",this.ws.url,n);let r="";if(Array.isArray(n))switch(n[0]){case"EVENT":r=n[1];let i=n[2];if(!Ea(i)){ke.error("Incomplete event");return}if(!dr(i)){ke.error("Event signature error");return}this.relayEmiter.emitEvent(r,{url:this.ws.url,event:i,subId:r});break;case"NOTICE":this.relayEmiter.emit("notice",r,{message:n[1],url:this.ws.url});break;case"EOSE":r=n[1],this.relayEmiter.emit("eose",r,{url:this.ws.url});break;case"OK":let a=n[1];this.relayEmiter.emit("ok",a,{ok:n[2],message:n[3],url:this.ws.url}),this.closePublish(a);break;case"AUTH":const o=n[1];this.relayEmiter.emitAuth({url:this.ws.url,challenge:o});break;default:break}}catch{return}}auth(e){this.send(["AUTH",e])}send(e){ke.http("send:",e[0],this.ws.url,e),window.sendCount++,this.ws.send(JSON.stringify(e))}createSubId(){return Math.random().toString().slice(2)}req(e,n=this.createSubId()){this.addSubId(n);try{this.send(["REQ",n,...e])}catch{this.deleteSubId(n)}return n}closePublish(e){!this.publishIds.has(e)||(this.publishIds.delete(e),this.autoClose())}publish(e){this.send(["EVENT",e]),this.publishIds.add(e.id),setTimeout(()=>{this.closePublish(e.id)},6e4)}closeReq(e){!this.subIds.has(e)||(this.deleteSubId(e),this.send(["CLOSE",e]))}addSubId(e){this.isClose&&(this.isClose=!0,this.pool.getPool().set(this.ws.url,this)),this.subIds.add(e),this.pool.allSubIds.add(e)}deleteSubId(e){!this.subIds.has(e)||(this.subIds.delete(e),this.pool.allSubIds.delete(e),this.relayEmiter.removeAllListener(e),this.autoClose())}close(){if(!this.isClose){this.isClose=!0;for(const e of this.subIds)this.deleteSubId(e);this.ws.close(),this.pool.close(this.ws.url),this.relayEmiter.emit("close",this.ws.url,{url:this.ws.url})}}clearAutoClose(){clearTimeout(this.timeout),this.timeout=void 0}autoClose(){this.subIds.size>0||this.publishIds.size>0||(this.timeout=setTimeout(()=>{this.subIds.size>0||this.publishIds.size>0||this.close()},6e4))}}const et=window[Symbol.for("loggerFactory")].create("src/nostr/server/websocket.ts");async function Vl(t){return new Promise((e,n)=>{try{const r=new URL(t);try{et.http("Start connecting:",t);const i=new WebSocket(r);i.onopen=()=>{et.http("Successfully connected:",t),e(i)},i.onerror=a=>{et.http("connect failed:",t),n(a)}}catch{}}catch{et.error("Incorrect connection",t)}})}var Hl=Object.defineProperty,Gl=Object.getOwnPropertyDescriptor,Kl=(t,e,n,r)=>{for(var i=r>1?void 0:r?Gl(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Hl(e,n,i),i},Yl=(t,e)=>(n,r)=>e(n,r,t);window[Symbol.for("loggerFactory")].create("src/nostr/server/RelayPool.ts");window.sendCount=0;let rn=class{constructor(t){w(this,"pool");w(this,"allSubIds");this.relayEmiter=t;const e=ge(this);return e.allSubIds=new Set,e.pool=new Map,e.listen(),e}async listen(){this.relayEmiter.onRequest("req",async({url:t,subId:e,filters:n})=>{(await this.getRelay(t)).req(n,e)}),this.relayEmiter.onRequest("closeReq",async({url:t,subId:e})=>{this.allSubIds.delete(e);const n=this.getRelayFromPool(t);!n||n.closeReq(e)}),this.relayEmiter.onRequest("publish",async({url:t,event:e})=>{(await this.getRelay(t)).publish(e)}),this.relayEmiter.onRequest("close",async({url:t})=>{const e=this.getRelayFromPool(t);!e||e.close()}),this.relayEmiter.onReqAuth(async({url:t,event:e})=>{(await this.getRelay(t)).auth(e)})}getPool(){return this.pool}async getRelay(t){const e=this.pool.get(t);return e||await this.createRelayPool(t)}getRelayFromPool(t){return this.pool.get(t)}async createRelayPool(t){return new Promise(async(e,n)=>{const r=await Vl(t);r.onerror=a=>{this.close(t)},r.onclose=()=>{this.close(t)};const i=new Wl(r,this.relayEmiter,this);this.pool.set(t,i),e(i)})}close(t){var e;!this.pool.has(t)||((e=this.getRelayFromPool(t))==null||e.close(),this.pool.delete(t))}};rn=Kl([F(),Yl(0,U(p.RelayEmiter))],rn);var Jl=Object.defineProperty,Ql=Object.getOwnPropertyDescriptor,Xl=(t,e,n,r)=>{for(var i=r>1?void 0:r?Ql(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Jl(e,n,i),i},Dt=(t,e)=>(n,r)=>e(n,r,t);let an=class extends pt{constructor(e,n,r){const i="follower-channel";super(i);w(this,"identifier");w(this,"kind",30001);this.userApi=e,this.eventApi=n,this.cahnnelMessageBeltline=r,this.identifier=i,this.sync()}createDefault(){return new Map}async getAddressPointers(){const e=await dn.getPublicKey();return[{identifier:this.identifier,kind:this.kind,pubkey:e}]}async serializeToData(e){const n=new Map,r=aa(e.tags);for(const i of r){const{eventId:a,relay:o,marker:l}=i;this.getData();const c={channelMeta:{relayUrls:[o]},channelId:a,relayUrls:new Set};n.get(a)||this.reqMetadata(a,c),n.set(a,c)}return n}async deserializeToEvent(e,n){const r=[];r.push(["d",this.identifier]);for(const[i,a]of e.entries()){const o=a.channelMeta.relayUrls;if(o){const l=o[0];if(l){r.push(["e",i,l]);continue}}r.push(["e",i])}return De({kind:this.kind,tags:r})}getFollowChannel(){return this.getDataSync()}hasJoin(e){return this.getFollowChannel().has(e)}setChannelmetadata(e,n){const r=this.getFollowChannel().get(e);r&&(r.channelMeta=n)}async joinChannel(e,n){var o;if(!e)return;const r=this.getFollowChannel();if(r.get(e))return;await this.toChanged();const a={channelId:e,channelMeta:(o=n==null?void 0:n.channelMetadata)!=null?o:{},relayUrls:new Set};n!=null&&n.channelMetadata||this.reqMetadata(e,a),r.set(e,a),this.save()}reqMetadata(e,n){const r=this.cahnnelMessageBeltline.getChannelMetadataBeltlineByChannelId(e),i=fn((o,l)=>{var c;Object.assign(n.channelMeta,o),$e(n.relayUrls,(c=n.channelMeta.relayUrls)!=null?c:[])},3e3);r.feat.onHasMetadata(i),this.eventApi.getEventLineById(e).feat.onHasEventOnce(o=>{const l=o.pubkey;n.creator=l,n.event=o;const c=lr(o.tags);$e(n.relayUrls,c),this.userApi.getUserRelayUrlConfigByPubkey(l).feat.onHasReadWriteList(s=>{$e(n.relayUrls,s.writeUrl),$e(n.relayUrls,s.readUrl)})})}leaveChannel(e){if(!e)return;const n=this.getFollowChannel();!n.has(e)||(this.toChanged(),n.delete(e),this.save())}};an=Xl([F(),Dt(0,U(p.UserApi)),Dt(1,U(p.EventApi)),Dt(2,Ye(p.CahnnelMessageBeltline))],an);var Zl=Object.defineProperty,ec=Object.getOwnPropertyDescriptor,tc=(t,e,n,r)=>{for(var i=r>1?void 0:r?ec(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Zl(e,n,i),i};let on=class extends We{constructor(){super("MuteListEventSync");w(this,"kind",1e4)}createDefault(){return{publicList:new Set}}async getFilters(){const e=await mt();return e?[{authors:[e],kinds:[1e4]}]:[]}async serializeToData(e){return{publicList:new Set(e.tags.filter(r=>r[0]==="p"&&r[1]).map(r=>r[1]))}}async deserializeToEvent(e,n){const r=[...Array.from(e.publicList,a=>["p",a])];return await De({kind:this.kind,tags:r,created_at:n})}getMuteList(){return this.getDataSync()}async addPubkey(e,n){const r=this.getMuteList();r.publicList.has(e)||(r.publicList.add(e),this.toChanged(),this.save(n))}deletePubkey(e,n){const r=this.getMuteList();!r.publicList.has(e)||(r.publicList.delete(e),this.toChanged(),this.save(n))}};on=tc([F()],on);const nc=(t,e,n)=>mi(t,fn(e,n.delay),n);var rc=Object.defineProperty,ic=Object.getOwnPropertyDescriptor,ac=(t,e,n,r)=>{for(var i=r>1?void 0:r?ic(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&rc(e,n,i),i},Hn;const oc=(Hn=window.defaultRelayUrls)!=null?Hn:["wss://no.str.cr","wss://no-str.org","wss://nos.lol","wss://nostr.com.de","wss://relay.mostr.pub","wss://relay.nostr.wirednet.jp","wss://no-str.org","wss://brb.io"];let sn=class extends We{constructor(){super("RelayConfigurator",{isAutoAddRelayurl:!0})}createDefault(){return{[pe]:new Set,[ye]:new Set}}async getFilters(){const t=await mt();return t?[{kinds:[10002],authors:[t]}]:[]}async serializeToData(t){const{relayConfiguration:e,readUrl:n,writeUrl:r}=oa(t.tags);return e}async deserializeToEvent(t,e){const n=sa(t);return await De({kind:10002,tags:n,created_at:e})}getConfiguration(){return this.getDataSync()}getWriteList(){return this.getConfiguration()[ye]}getReadList(){return this.getConfiguration()[pe]}getOtherList(){return sc()}addWriteRead(t){this.addRead(t),this.addWrite(t)}addWrite(t){this.toChanged(),this.getRule(t).write=!0,this.getConfiguration()[ye].add(t)}remoteWrite(t){this.toChanged(),this.getRule(t).write=!1,this.getConfiguration()[ye].delete(t)}addRead(t){this.toChanged(),this.getRule(t).read=!0,this.getConfiguration()[pe].add(t)}remoteRead(t){this.toChanged(),this.getRule(t).read=!1,this.getConfiguration()[pe].delete(t)}remove(t){this.toChanged(),delete this.getDataSync()[t],this.getConfiguration()[ye].delete(t),this.getConfiguration()[pe].delete(t)}setRule(t,e,n){if(this.toChanged(),!e&&!n)this.remove(t);else{const r=this.getRule(t);r.read=e,r.write=n,n?this.getConfiguration()[ye].add(t):this.getConfiguration()[ye].delete(t),e?this.getConfiguration()[pe].add(t):this.getConfiguration()[pe].delete(t)}}getRule(t){var e;return(e=this.getConfiguration()[t])!=null?e:this.getConfiguration()[t]={}}hasReadByUrl(t){return this.getReadList().has(t)}hasWriteByUrl(t){return this.getWriteList().has(t)}broadcast(t){var a;const e=this.getLocalEvent();if(!e||e.tags.length===0)return;const n=this.getOtherList(),r=Object.assign((a=t==null?void 0:t.slef)!=null?a:{},{numberOfErrors:0,numberOfSuccesses:0,numberOfOvertime:0,total:n.size}),i=new Set;return ma.on("ok",e.id,({ok:o,message:l,url:c})=>{i.add(c),o?r.numberOfSuccesses+=1:r.numberOfErrors+=1}),He.publish(e,n),setTimeout(()=>{n.forEach(o=>{i.has(o)||(r.numberOfOvertime+=1)})},1e3*30),r}};sn=ac([F()],sn);const ln="__other_urls",Wr={...Zn,useLocalStorage:!0,duration:1e3*60};function sc(){const t=te(ln,Vn,Wr);return Array.isArray(t)?new Set(t):t instanceof Set?t:(_i(ln),Vn())}function Vn(){const t=ge(new Set),e=He.createChild().addStaff(de()).addStaff(he()).addFilter({kinds:[10002],limit:100}).addStaff({push(n){const{writeUrl:r,readUrl:i}=la(n.tags);for(const a of r)t.add(a);for(const a of i)t.add(a)}});return setTimeout(async()=>{var i;const n=Array.from(new Set([...ot.getReadList(),...ot.getWriteList(),...oc].slice(0,10)));let r=0;for(;t.size<((i=be.getOtherUrlsRequestLimitSize)!=null?i:50);){await ze(2e3);const a=n[r];if(!a)return;e.addRelayUrls(new Set().add(a)),r++}},0),nc(t,()=>{er(ln,[...t],Wr)},{deep:!0}),t}const I=window[Symbol.for("loggerFactory")].create("src/nostr/nostrRuntime.ts");function lc(){I.silly("createNostrContainer");const t=new Mr({skipBaseClassChecks:!0});return uc(t),cc(t),dc(t),hc(t),I.silly("AuthenticationOfClientsToRelays"),t.bind(p.AuthenticationOfClientsToRelays).to(Zt).inSingletonScope(),t.get(p.AuthenticationOfClientsToRelays),t}function cc(t){fc(t),I.silly("IdGenerator"),t.bind(p.IdGenerator).to(tn).inSingletonScope(),I.silly("NostrApi"),I.silly("RelayEmiter"),t.bind(p.RelayEmiter).to(nn).inSingletonScope();const e=t.get(p.RelayEmiter);Ee({relayEmiter:e}),I.silly("RelayPool"),t.bind(p.RelayPool).to(rn).inSingletonScope();const n=t.get(p.RelayPool);Ee({relayPool:n}),I.silly("RelayConfiguratorFactory"),t.bind(p.RelayConfiguratorFactory).toFactory(()=>()=>t.get(p.RelayConfiguratorSynchronizer)),I.silly("RootEventBeltline"),t.bind(p.RootEventBeltline).to(Be).inSingletonScope();const r=t.get(p.RootEventBeltline);Ee({rootEventBeltline:r}),t.bind(p.AutoRandomRequestStaff).to(ca).inSingletonScope(),e.onEvent(({subId:a,event:o,url:l})=>{r.pushEvent(o,{subId:a})}),I.silly("RelayConfiguratorSynchronizer"),t.bind(p.RelayConfiguratorSynchronizer).to(sn).inSingletonScope();const i=t.get(p.RelayConfiguratorSynchronizer);Ee({relayConfigurator:i}),I.silly("CreateEventBeltline"),t.bind(p.CreateEventBeltline).to(Yt).inSingletonScope()}function uc(t){t.bind(p.NostrContainer).toDynamicValue(()=>t).inSingletonScope(),t.bind(Mr).toDynamicValue(()=>t).inSingletonScope(),Ee({nostrContainer:t})}function fc(t){switch(Na()){case Se.WindowNostr:xa(),t.bind(p.NostrApi).toDynamicValue(()=>Ba()).inSingletonScope();break;case Se.PrivateKey:const n=localStorage.getItem(Ta);if(!n){It(Se.NotLogin);break}t.bind(p.NostrApi).toDynamicValue(()=>new Oa(n!=null?n:void 0)).inSingletonScope();break;case Se.NostrContent:const r=localStorage.getItem("pubkey");if(!r){It(Se.NotLogin);break}t.bind(p.NostrApi).toDynamicValue(()=>new Ra(r)).inSingletonScope();break;default:It(Se.NotLogin),t.bind(p.NostrApi).toDynamicValue(()=>new Ca).inSingletonScope();break}Ee({nostrApi:t.get(p.NostrApi)})}function cn(t){return async e=>{const n=await t();return e.container.resolve(n)}}function dc(t){I.silly("PinListSynchronizer"),t.bind(p.PinListSynchronizer).toDynamicValue(cn(async()=>(await Ut(()=>import("./PinListSynchronizer.cc1dce6f.js"),["./PinListSynchronizer.cc1dce6f.js","./error.469adc75.js","./nostr.c03670ae.js","./index.8f62a545.js","./index.90e3f0af.css","./login.0b8718d8.js","./nostr.ad89cf30.js","./NaddrLink.vue_vue_type_script_setup_true_lang.e9edc141.js","./nostr.0043d5e6.js","./use.b23b6c29.js","./Staff.e039c64f.js","./createEventSourceTracers.1da380d1.js","./Markdown.05f716d1.js","./CategorizedBookmarksSynchronizer.87c6986d.js","./SynchronizerAbstract.b6083252.js","./Papaw.635c4eff.js","./RegExpUtils.102c01f0.js","./utils.e1137b57.js","./is-browser.f4df612e.js","./Scrollbar.8d5a1903.js","./use-rtl.6d35c504.js","./cssr.21c6f8e2.js","./use-css-vars-class.1ada0b07.js","./fade-in-scale-up.cssr.5ebe4351.js","./use-locale.cbb1f83b.js","./Loading.0b953150.js","./use-style.d8216a24.js","./Follower.7ba57362.js","./Icon.1c3d6ebf.js","./replaceable.815b8f5c.js","./Button.22997a19.js","./create-key.7b548031.js","./Tooltip.d86a0762.js","./Popover.6590eae2.js","./format-length.3612bbc8.js","./Card.6e48fdd4.js","./index.62f1e1b0.js","./keysOf.8a025f7e.js","./Close.dba1bcea.js","./Close.7d56270d.js","./Icon.904bc99e.js","./Empty.81d9c633.js","./UserLink.vue_vue_type_script_setup_true_lang.0cad1bf3.js","./RelayAddButton.vue_vue_type_script_setup_true_lang.03e333cd.js","./RelayConnectList.vue_vue_type_script_setup_true_lang.2443e1f7.js","./RelayInfoView.0394eae9.js","./Ellipsis.021c946e.js","./Ellipsis.b57e5c64.css","./use-theme-vars.c704e62a.js","./ListItem.5a517004.js","./MavonEditor.aa4b0597.js","./MavonEditor.9ea755d8.css","./Tag.7e30ed31.js","./Space.32f062de.js","./get-slot.4ceacf82.js","./DrawerProvide.vue_vue_type_script_setup_true_lang.da186b5d.js","./DrawerContent.bb261013.js","./index.71604e6f.js","./Scrollbar.c7e90ffe.js","./LoadProgress.a8e5dee8.js","./Scrollbar.75edf2b0.js","./Scrollbar.f1879afa.css","./fade-in-height-expand.cssr.a4865c47.js","./naiveUi.02e209d9.js","./composables.10bdf172.js","./Input.90533fe2.js","./nostrApiUse.43d55506.js","./ContentBlacklistView.1f898a24.js","./Dropdown.09a70bb4.js","./render.568a1ab1.js","./create.2deeaf6a.js","./profile-2-400x400.3309f571.js","./Papaw.ae4bc42d.css","./Checkbox.fc71365b.js","./PubkeyLink.vue_vue_type_script_setup_true_lang.1d1b2ee1.js","./RadioGroup.b3ff4b7f.js","./injectWindowNostr.759c669e.js","./NostrConnect.ef90b4f4.js","./Upload.39a290a3.js","./Warning.6502c178.js","./Add.d66e299e.js","./Upload.b5c9ebfa.js","./Modal.2a8cd6ad.js","./omit.ef9bf2ca.js"],import.meta.url)).PinListSynchronizer)).inSingletonScope(),I.silly("NostrConnectedSynchronizer"),t.bind(p.NostrConnectedSynchronizer).to(Xt).inSingletonScope(),I.silly("ContactConfigurationSynchronizer"),t.bind(p.ContactConfigurationSynchronizer).toDynamicValue(cn(async()=>(await Ut(()=>import("./ContactConfigurationSynchronizer.d8c58934.js"),["./ContactConfigurationSynchronizer.d8c58934.js","./NaddrLink.vue_vue_type_script_setup_true_lang.e9edc141.js","./nostr.0043d5e6.js","./use.b23b6c29.js","./index.8f62a545.js","./index.90e3f0af.css","./nostr.c03670ae.js","./Staff.e039c64f.js","./nostr.ad89cf30.js","./error.469adc75.js","./login.0b8718d8.js","./createEventSourceTracers.1da380d1.js","./Markdown.05f716d1.js","./Papaw.635c4eff.js","./RegExpUtils.102c01f0.js","./utils.e1137b57.js","./is-browser.f4df612e.js","./Scrollbar.8d5a1903.js","./use-rtl.6d35c504.js","./cssr.21c6f8e2.js","./use-css-vars-class.1ada0b07.js","./fade-in-scale-up.cssr.5ebe4351.js","./use-locale.cbb1f83b.js","./Loading.0b953150.js","./use-style.d8216a24.js","./Follower.7ba57362.js","./Icon.1c3d6ebf.js","./replaceable.815b8f5c.js","./Button.22997a19.js","./create-key.7b548031.js","./Tooltip.d86a0762.js","./Popover.6590eae2.js","./format-length.3612bbc8.js","./Card.6e48fdd4.js","./index.62f1e1b0.js","./keysOf.8a025f7e.js","./Close.dba1bcea.js","./Close.7d56270d.js","./Icon.904bc99e.js","./Empty.81d9c633.js","./UserLink.vue_vue_type_script_setup_true_lang.0cad1bf3.js","./RelayAddButton.vue_vue_type_script_setup_true_lang.03e333cd.js","./RelayConnectList.vue_vue_type_script_setup_true_lang.2443e1f7.js","./RelayInfoView.0394eae9.js","./Ellipsis.021c946e.js","./Ellipsis.b57e5c64.css","./use-theme-vars.c704e62a.js","./ListItem.5a517004.js","./MavonEditor.aa4b0597.js","./MavonEditor.9ea755d8.css","./Tag.7e30ed31.js","./Space.32f062de.js","./get-slot.4ceacf82.js","./DrawerProvide.vue_vue_type_script_setup_true_lang.da186b5d.js","./DrawerContent.bb261013.js","./index.71604e6f.js","./Scrollbar.c7e90ffe.js","./LoadProgress.a8e5dee8.js","./Scrollbar.75edf2b0.js","./Scrollbar.f1879afa.css","./fade-in-height-expand.cssr.a4865c47.js","./naiveUi.02e209d9.js","./composables.10bdf172.js","./Input.90533fe2.js","./nostrApiUse.43d55506.js","./ContentBlacklistView.1f898a24.js","./Dropdown.09a70bb4.js","./render.568a1ab1.js","./create.2deeaf6a.js","./profile-2-400x400.3309f571.js","./Papaw.ae4bc42d.css","./CategorizedBookmarksSynchronizer.87c6986d.js","./SynchronizerAbstract.b6083252.js","./Checkbox.fc71365b.js","./PubkeyLink.vue_vue_type_script_setup_true_lang.1d1b2ee1.js","./RadioGroup.b3ff4b7f.js","./injectWindowNostr.759c669e.js","./NostrConnect.ef90b4f4.js","./Upload.39a290a3.js","./Warning.6502c178.js","./Add.d66e299e.js","./Upload.b5c9ebfa.js","./Modal.2a8cd6ad.js","./omit.ef9bf2ca.js"],import.meta.url)).ContactConfigurationSynchronizer)),I.silly("MuteListSynchronizer"),t.bind(p.MuteListSynchronizer).to(on).inSingletonScope(),I.silly("FollowChannelSynchronizer"),t.bind(p.FollowChannelSynchronizer).to(an).inSingletonScope()}function hc(t){I.silly("GeneralEventEventBeltline"),t.bind(p.GeneralEventEventBeltline).to(ht).inSingletonScope(),I.silly("CreateShortTextEventBeltline"),t.bind(p.CreateShortTextEventBeltline).to(gt).inSingletonScope(),I.silly("CreatePinEventLine"),t.bind(p.PinApi).to(vt).inSingletonScope(),I.silly("EventApi"),t.bind(p.EventApi).to(Jt).inSingletonScope(),I.silly("CahnnelMessageBeltline"),t.bind(p.CahnnelMessageBeltline).to(Gt).inSingletonScope(),I.silly("LikeApi"),t.bind(p.LikeApi).toDynamicValue(cn(async()=>await(await Ut(()=>import("./Papaw.635c4eff.js").then(e=>e.v),["./Papaw.635c4eff.js","./index.8f62a545.js","./index.90e3f0af.css","./use.b23b6c29.js","./nostr.c03670ae.js","./Staff.e039c64f.js","./RegExpUtils.102c01f0.js","./utils.e1137b57.js","./is-browser.f4df612e.js","./Scrollbar.8d5a1903.js","./use-rtl.6d35c504.js","./cssr.21c6f8e2.js","./use-css-vars-class.1ada0b07.js","./fade-in-scale-up.cssr.5ebe4351.js","./use-locale.cbb1f83b.js","./Loading.0b953150.js","./use-style.d8216a24.js","./Follower.7ba57362.js","./Icon.1c3d6ebf.js","./replaceable.815b8f5c.js","./Button.22997a19.js","./create-key.7b548031.js","./Tooltip.d86a0762.js","./Popover.6590eae2.js","./format-length.3612bbc8.js","./nostr.ad89cf30.js","./createEventSourceTracers.1da380d1.js","./nostr.0043d5e6.js","./Card.6e48fdd4.js","./index.62f1e1b0.js","./keysOf.8a025f7e.js","./Close.dba1bcea.js","./Close.7d56270d.js","./Icon.904bc99e.js","./NaddrLink.vue_vue_type_script_setup_true_lang.e9edc141.js","./error.469adc75.js","./login.0b8718d8.js","./Markdown.05f716d1.js","./Empty.81d9c633.js","./UserLink.vue_vue_type_script_setup_true_lang.0cad1bf3.js","./RelayAddButton.vue_vue_type_script_setup_true_lang.03e333cd.js","./RelayConnectList.vue_vue_type_script_setup_true_lang.2443e1f7.js","./RelayInfoView.0394eae9.js","./Ellipsis.021c946e.js","./Ellipsis.b57e5c64.css","./use-theme-vars.c704e62a.js","./ListItem.5a517004.js","./MavonEditor.aa4b0597.js","./MavonEditor.9ea755d8.css","./Tag.7e30ed31.js","./Space.32f062de.js","./get-slot.4ceacf82.js","./DrawerProvide.vue_vue_type_script_setup_true_lang.da186b5d.js","./DrawerContent.bb261013.js","./index.71604e6f.js","./Scrollbar.c7e90ffe.js","./LoadProgress.a8e5dee8.js","./Scrollbar.75edf2b0.js","./Scrollbar.f1879afa.css","./fade-in-height-expand.cssr.a4865c47.js","./naiveUi.02e209d9.js","./composables.10bdf172.js","./Input.90533fe2.js","./nostrApiUse.43d55506.js","./ContentBlacklistView.1f898a24.js","./Dropdown.09a70bb4.js","./render.568a1ab1.js","./create.2deeaf6a.js","./profile-2-400x400.3309f571.js","./Papaw.ae4bc42d.css"],import.meta.url)).LikeApi)).inSingletonScope(),I.silly("UserApi"),t.bind(p.UserApi).to(Qt).inSingletonScope(),I.silly("NostrConnect"),t.bind(p.NostrConnect).to(Ia).inSingletonScope(),I.silly("LoginApi"),t.bind(p.LoginApi).to(Pa).inSingletonScope(),I.silly("ContactApi"),t.bind(p.ContactApi).to(Kt).inSingletonScope()}const vc=q({__name:"NostrContainerProvade",setup(t){const e=lc();return window.nostrApi=e,ua(e),(n,r)=>Le(n.$slots,"default")}}),gc=q({__name:"UploadProvide",setup(t){const e=Ma(),n=$a(),r=Da();return(i,a)=>{const o=ja;return z(),Re(o,{abstract:"",ref_key:"uploadRef",ref:e,fileList:C(n),"onUpdate:fileList":a[0]||(a[0]=l=>bi(n)?n.value=l:null),"show-preview-button":"","show-download-button":"","show-cancel-button":"","show-remove-button":"",customRequest:C(r)},{default:R(()=>[Le(i.$slots,"default")]),_:3},8,["fileList","customRequest"])}}}),pc=["id"],yc=q({__name:"Provides",setup(t){return(e,n)=>{const r=uo,i=Oo,a=mo,o=oo;return z(),Re(vc,null,{default:R(()=>[T(va,null,{default:R(({id:l})=>[se("div",{id:l,class:"w-full h-screen overflow-hidden"},[T(o,null,{default:R(()=>[T(a,null,{default:R(()=>[T(i,{placement:"bottom"},{default:R(()=>[T(r,null,{default:R(()=>[T(Is,null,{default:R(()=>[T(gc,null,{default:R(()=>[T(Ws,null,{default:R(()=>[T(Ps,null,{default:R(()=>[Le(e.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3})]),_:3})]),_:3})]),_:3})]),_:3})],8,pc)]),_:3})]),_:3})}}}),fu=Object.freeze(Object.defineProperty({__proto__:null,default:yc},Symbol.toStringTag,{value:"Module"}));export{fu as P,We as R,uu as l};
