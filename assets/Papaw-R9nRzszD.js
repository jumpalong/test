var on=Object.defineProperty;var ln=(e,n,a)=>n in e?on(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;var Q=(e,n,a)=>(ln(e,typeof n!="symbol"?n+"":n,a),a);import{c as cn,f as P,u as un,g as ct,bO as dn,k as C,h as tt,a1 as Te,o as u,m as S,w,n as b,ag as ut,r as D,q as c,_ as N,B as y,E,L as M,R as Be,H as q,Z as Le,bP as pn,bQ as fn,am as H,$ as ee,U as ye,A as U,y as K,z as L,D as dt,F as Z,C as te,bR as nt,bS as vn,bT as hn,bU as _n,bV as mn,bW as yn,V as gn,W as ge,aj as we,bX as wn,ah as bn,j as kn,bv as xn,af as En,p as $n,S as Ce,an as oe,ar as zn,as as Rn,aN as Cn,be as Sn,ap as fe,bY as Pn}from"./index-Bp8Ru9nj.js";import{g as re,A as pt,ag as ft,ac as Ae,u as le,aa as Mn,w as Tn,al as Bn,r as Ln,y as vt,ai as Ie,am as An,Q as In,ae as Dn,an as Nn,a9 as On,x as Hn,d as Un,a4 as Vn,ao as jn,v as Fn,a6 as Wn,$ as qn}from"./ProvideEventLine-XLCKst21.js";import{b as ne,a as O,h as ae,c as _e,s as De,r as ht,d as _t,e as J,f as ie,g as se,u as Kn,i as Zn,j as Jn,k as Gn,l as mt,m as Xn,N as Qn}from"./hkdf-mSU36INM.js";import{N as G}from"./Icon-BUbDyWQc.js";import{_ as Ne}from"./Card-z75eEPHe.js";import{_ as Yn}from"./Tooltip-CWAJuqVc.js";import{_ as e1,u as t1,a as n1,b as a1,c as r1}from"./NaddrLink.vue_vue_type_script_setup_true_lang-RPzJDFtp.js";import{_ as yt}from"./Image-4WjrfnRr.js";import{a as Se,t as s1,e as o1}from"./utils-Bn9avYFz.js";import{_ as gt}from"./DateTime.vue_vue_type_script_setup_true_lang-DsYL1IqC.js";import{_ as i1}from"./Spin-C2RU7Xjq.js";import{_ as l1,a as c1}from"./DrawerContent-KbJmxdI_.js";import{_ as wt}from"./Tag-D0_dwZG-.js";import{d as u1,b as ce}from"./Button-DF3Ei97P.js";import{_ as Oe}from"./Space-D7Gj9TeE.js";import{u as d1}from"./use-theme-vars-CgboMLjC.js";import{S as p1}from"./Scrollbar-D8p4HDwI.js";import{u as f1}from"./use-rtl-gkSu3eK_.js";import{f as v1}from"./fade-in-height-expand.cssr-BOUpW_kQ.js";import{u as h1}from"./use-css-vars-class-DV7GkkKb.js";import{u as _1}from"./naiveUi-DD7D_Mah.js";import{a as m1}from"./ContentBlacklistView-BeC_asw8.js";import{_ as y1}from"./Dropdown-BNXdJGM7.js";import{p as g1}from"./profile-2-400x400-D2vuwnc_.js";import{E as w1}from"./Ellipsis-CGi5D5It.js";import{_ as b1}from"./Empty-oWNKc7k_.js";const k1=cn("collapse-transition",{width:"100%"},[v1()]),x1=Object.assign(Object.assign({},ct.props),{show:{type:Boolean,default:!0},appear:Boolean,collapsed:{type:Boolean,default:void 0}}),E1=P({name:"CollapseTransition",props:x1,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:a,mergedRtlRef:r}=un(e),s=ct("CollapseTransition","-collapse-transition",k1,dn,e,n),o=f1("CollapseTransition",r,n),i=C(()=>e.collapsed!==void 0?e.collapsed:e.show),l=C(()=>{const{self:{bezier:m}}=s.value;return{"--n-bezier":m}}),d=a?h1("collapse-transition",void 0,l,e):void 0;return{rtlEnabled:o,mergedShow:i,mergedClsPrefix:n,cssVars:a?void 0:l,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){return tt(u1,{appear:this.appear},{default:()=>{var e;if(this.mergedShow)return(e=this.onRender)===null||e===void 0||e.call(this),tt("div",Te({class:[`${this.mergedClsPrefix}-collapse-transition`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse-transition--rtl`,this.themeClass],style:this.cssVars},this.$attrs),this.$slots)}})}}),[$1,z1]=re(()=>({id:`d-${Se()}`})),bt=P({__name:"Drawer",props:{show:{type:Boolean},width:{default:"100%"},height:{default:100},placement:{default:"bottom"},title:{default:""},closable:{type:Boolean}},emits:["update:show"],setup(e,{emit:n}){const a=n,{id:r}=z1()??{};return(s,o)=>{const i=l1,l=c1;return u(),S(l,{show:s.show,"onUpdate:show":o[0]||(o[0]=d=>a("update:show",!s.show)),width:s.width,height:s.height,placement:s.placement,"trap-focus":!1,"block-scroll":!1,to:c(r)?`#${c(r)}`:void 0},{default:w(()=>[b(i,{title:s.title,closable:s.closable},ut({default:w(()=>[D(s.$slots,"default")]),_:2},[s.$slots.header?{name:"header",fn:w(()=>[D(s.$slots,"header")]),key:"0"}:void 0,s.$slots.footer?{name:"footer",fn:w(()=>[D(s.$slots,"footer")]),key:"1"}:void 0]),1032,["title","closable"])]),_:3},8,["show","width","height","placement","to"])}}});var R1=Object.defineProperty,B=(e,n)=>{for(var a in n)R1(e,a,{get:n[a],enumerable:!0})},Y=Symbol("verified"),C1=e=>e instanceof Object;function kt(e){if(!C1(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let n=0;n<e.tags.length;n++){let a=e.tags[n];if(!Array.isArray(a))return!1;for(let r=0;r<a.length;r++)if(typeof a[r]=="object")return!1}return!0}var S1={};B(S1,{Queue:()=>B1,QueueNode:()=>xt,binarySearch:()=>He,insertEventIntoAscendingList:()=>T1,insertEventIntoDescendingList:()=>M1,normalizeURL:()=>P1,utf8Decoder:()=>F,utf8Encoder:()=>j});var F=new TextDecoder("utf-8"),j=new TextEncoder;function P1(e){e.indexOf("://")===-1&&(e="wss://"+e);let n=new URL(e);return n.pathname=n.pathname.replace(/\/+/g,"/"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),(n.port==="80"&&n.protocol==="ws:"||n.port==="443"&&n.protocol==="wss:")&&(n.port=""),n.searchParams.sort(),n.hash="",n.toString()}function M1(e,n){const[a,r]=He(e,s=>n.id===s.id?0:n.created_at===s.created_at?-1:s.created_at-n.created_at);return r||e.splice(a,0,n),e}function T1(e,n){const[a,r]=He(e,s=>n.id===s.id?0:n.created_at===s.created_at?-1:n.created_at-s.created_at);return r||e.splice(a,0,n),e}function He(e,n){let a=0,r=e.length-1;for(;a<=r;){const s=Math.floor((a+r)/2),o=n(e[s]);if(o===0)return[s,!0];o<0?r=s-1:a=s+1}return[a,!1]}var xt=class{constructor(e){Q(this,"value");Q(this,"next",null);Q(this,"prev",null);this.value=e}},B1=class{constructor(){Q(this,"first");Q(this,"last");this.first=null,this.last=null}enqueue(e){const n=new xt(e);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const e=this.first;return this.first=e.next,e.value}},L1=class{generateSecretKey(){return se.utils.randomPrivateKey()}getPublicKey(e){return O(se.getPublicKey(e))}finalizeEvent(e,n){const a=e;return a.pubkey=O(se.getPublicKey(n)),a.id=ve(a),a.sig=O(se.sign(ve(a),n)),a[Y]=!0,a}verifyEvent(e){if(typeof e[Y]=="boolean")return e[Y];const n=ve(e);if(n!==e.id)return e[Y]=!1,!1;try{const a=se.verify(e.sig,n,e.pubkey);return e[Y]=a,a}catch{return e[Y]=!1,!1}}};function A1(e){if(!kt(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function ve(e){let n=ie(j.encode(A1(e)));return O(n)}var be=new L1;be.generateSecretKey;be.getPublicKey;var X=be.finalizeEvent,Ue=be.verifyEvent,I1={};B(I1,{Application:()=>Ia,BadgeAward:()=>W1,BadgeDefinition:()=>Sa,BlockedRelaysList:()=>va,BookmarkList:()=>da,Bookmarksets:()=>za,Calendar:()=>ja,CalendarEventRSVP:()=>Fa,ChannelCreation:()=>Ct,ChannelHideMessage:()=>Mt,ChannelMessage:()=>Pt,ChannelMetadata:()=>St,ChannelMuteUser:()=>Tt,ClassifiedListing:()=>Oa,ClientAuth:()=>Bt,CommunitiesList:()=>pa,CommunityDefinition:()=>Ka,CommunityPostApproval:()=>ea,Contacts:()=>U1,CreateOrUpdateProduct:()=>Ta,CreateOrUpdateStall:()=>Ma,Curationsets:()=>Ra,Date:()=>Ua,DraftClassifiedListing:()=>Ha,DraftLong:()=>La,Emojisets:()=>Aa,EncryptedDirectMessage:()=>V1,EncryptedDirectMessages:()=>j1,EventDeletion:()=>F1,FileMetadata:()=>Z1,FileServerPreference:()=>ya,Followsets:()=>xa,GenericRepost:()=>q1,Genericlists:()=>Ea,HTTPAuth:()=>Fe,Handlerinformation:()=>qa,Handlerrecommendation:()=>Wa,Highlights:()=>ia,InterestsList:()=>_a,Interestsets:()=>Pa,JobFeedback:()=>aa,JobRequest:()=>ta,JobResult:()=>na,Label:()=>Y1,LightningPubRPC:()=>wa,LiveChatMessage:()=>J1,LiveEvent:()=>Da,LongFormArticle:()=>Ba,Metadata:()=>N1,Mutelist:()=>la,NWCWalletInfo:()=>ga,NWCWalletRequest:()=>Lt,NWCWalletResponse:()=>ba,NostrConnect:()=>ka,OpenTimestamps:()=>K1,Pinlist:()=>ca,ProblemTracker:()=>G1,ProfileBadges:()=>Ca,PublicChatsList:()=>fa,Reaction:()=>je,RecommendRelay:()=>H1,RelayList:()=>ua,Relaysets:()=>$a,Report:()=>X1,Reporting:()=>Q1,Repost:()=>Ve,SearchRelaysList:()=>ha,ShortTextNote:()=>O1,Time:()=>Va,UserEmojiList:()=>ma,UserStatuses:()=>Na,Zap:()=>oa,ZapGoal:()=>ra,ZapRequest:()=>sa,classifyKind:()=>D1,isEphemeralKind:()=>zt,isParameterizedReplaceableKind:()=>Rt,isRegularKind:()=>Et,isReplaceableKind:()=>$t});function Et(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function $t(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function zt(e){return 2e4<=e&&e<3e4}function Rt(e){return 3e4<=e&&e<4e4}function D1(e){return Et(e)?"regular":$t(e)?"replaceable":zt(e)?"ephemeral":Rt(e)?"parameterized":"unknown"}var N1=0,O1=1,H1=2,U1=3,V1=4,j1=4,F1=5,Ve=6,je=7,W1=8,q1=16,Ct=40,St=41,Pt=42,Mt=43,Tt=44,K1=1040,Z1=1063,J1=1311,G1=1971,X1=1984,Q1=1984,Y1=1985,ea=4550,ta=5999,na=6999,aa=7e3,ra=9041,sa=9734,oa=9735,ia=9802,la=1e4,ca=10001,ua=10002,da=10003,pa=10004,fa=10005,va=10006,ha=10007,_a=10015,ma=10030,ya=10096,ga=13194,wa=21e3,Bt=22242,Lt=23194,ba=23195,ka=24133,Fe=27235,xa=3e4,Ea=30001,$a=30002,za=30003,Ra=30004,Ca=30008,Sa=30009,Pa=30015,Ma=30017,Ta=30018,Ba=30023,La=30024,Aa=30030,Ia=30078,Da=30311,Na=30315,Oa=30402,Ha=30403,Ua=31922,Va=31923,ja=31924,Fa=31925,Wa=31989,qa=31990,Ka=34550,Za={};B(Za,{getHex64:()=>We,getInt:()=>At,getSubscriptionId:()=>Ja,matchEventId:()=>Ga,matchEventKind:()=>Qa,matchEventPubkey:()=>Xa});function We(e,n){let a=n.length+3,r=e.indexOf(`"${n}":`)+a,s=e.slice(r).indexOf('"')+r+1;return e.slice(s,s+64)}function At(e,n){let a=n.length,r=e.indexOf(`"${n}":`)+a+3,s=e.slice(r),o=Math.min(s.indexOf(","),s.indexOf("}"));return parseInt(s.slice(0,o),10)}function Ja(e){let n=e.slice(0,22).indexOf('"EVENT"');if(n===-1)return null;let a=e.slice(n+7+1).indexOf('"');if(a===-1)return null;let r=n+7+1+a,s=e.slice(r+1,80).indexOf('"');if(s===-1)return null;let o=r+1+s;return e.slice(r+1,o)}function Ga(e,n){return n===We(e,"id")}function Xa(e,n){return n===We(e,"pubkey")}function Qa(e,n){return n===At(e,"kind")}var Ya={};B(Ya,{makeAuthEvent:()=>er});function er(e,n){return{kind:Bt,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",n]],content:""}}var tr;try{tr=WebSocket}catch{}var ke={};B(ke,{BECH32_REGEX:()=>It,Bech32MaxSize:()=>qe,decode:()=>xe,encodeBytes:()=>Ee,naddrEncode:()=>lr,neventEncode:()=>ir,noteEncode:()=>sr,nprofileEncode:()=>or,npubEncode:()=>rr,nrelayEncode:()=>cr,nsecEncode:()=>ar});var qe=5e3,It=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function nr(e){const n=new Uint8Array(4);return n[0]=e>>24&255,n[1]=e>>16&255,n[2]=e>>8&255,n[3]=e&255,n}function xe(e){var s,o,i,l,d,m,g,$;let{prefix:n,words:a}=ne.decode(e,qe),r=new Uint8Array(ne.fromWords(a));switch(n){case"nprofile":{let f=pe(r);if(!((s=f[0])!=null&&s[0]))throw new Error("missing TLV 0 for nprofile");if(f[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:O(f[0][0]),relays:f[1]?f[1].map(h=>F.decode(h)):[]}}}case"nevent":{let f=pe(r);if(!((o=f[0])!=null&&o[0]))throw new Error("missing TLV 0 for nevent");if(f[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(f[2]&&f[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(f[3]&&f[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:O(f[0][0]),relays:f[1]?f[1].map(h=>F.decode(h)):[],author:(i=f[2])!=null&&i[0]?O(f[2][0]):void 0,kind:(l=f[3])!=null&&l[0]?parseInt(O(f[3][0]),16):void 0}}}case"naddr":{let f=pe(r);if(!((d=f[0])!=null&&d[0]))throw new Error("missing TLV 0 for naddr");if(!((m=f[2])!=null&&m[0]))throw new Error("missing TLV 2 for naddr");if(f[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((g=f[3])!=null&&g[0]))throw new Error("missing TLV 3 for naddr");if(f[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:F.decode(f[0][0]),pubkey:O(f[2][0]),kind:parseInt(O(f[3][0]),16),relays:f[1]?f[1].map(h=>F.decode(h)):[]}}}case"nrelay":{let f=pe(r);if(!(($=f[0])!=null&&$[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:F.decode(f[0][0])}}case"nsec":return{type:n,data:r};case"npub":case"note":return{type:n,data:O(r)};default:throw new Error(`unknown prefix ${n}`)}}function pe(e){let n={},a=e;for(;a.length>0;){let r=a[0],s=a[1],o=a.slice(2,2+s);if(a=a.slice(2+s),o.length<s)throw new Error(`not enough data to read on TLV ${r}`);n[r]=n[r]||[],n[r].push(o)}return n}function ar(e){return Ee("nsec",e)}function rr(e){return Ee("npub",ae(e))}function sr(e){return Ee("note",ae(e))}function ue(e,n){let a=ne.toWords(n);return ne.encode(e,a,qe)}function Ee(e,n){return ue(e,n)}function or(e){let n=$e({0:[ae(e.pubkey)],1:(e.relays||[]).map(a=>j.encode(a))});return ue("nprofile",n)}function ir(e){let n;e.kind!==void 0&&(n=nr(e.kind));let a=$e({0:[ae(e.id)],1:(e.relays||[]).map(r=>j.encode(r)),2:e.author?[ae(e.author)]:[],3:n?[new Uint8Array(n)]:[]});return ue("nevent",a)}function lr(e){let n=new ArrayBuffer(4);new DataView(n).setUint32(0,e.kind,!1);let a=$e({0:[j.encode(e.identifier)],1:(e.relays||[]).map(r=>j.encode(r)),2:[ae(e.pubkey)],3:[new Uint8Array(n)]});return ue("naddr",a)}function cr(e){let n=$e({0:[j.encode(e)]});return ue("nrelay",n)}function $e(e){let n=[];return Object.entries(e).reverse().forEach(([a,r])=>{r.forEach(s=>{let o=new Uint8Array(s.length+2);o.set([parseInt(a)],0),o.set([s.length],1),o.set(s,2),n.push(o)})}),_e(...n)}var ur={};B(ur,{decrypt:()=>dr,encrypt:()=>Dt});async function Dt(e,n,a){const r=e instanceof Uint8Array?O(e):e,s=De.getSharedSecret(r,"02"+n),o=Nt(s);let i=Uint8Array.from(ht(16)),l=j.encode(a),d=_t(o,i).encrypt(l),m=J.encode(new Uint8Array(d)),g=J.encode(new Uint8Array(i.buffer));return`${m}?iv=${g}`}async function dr(e,n,a){const r=e instanceof Uint8Array?O(e):e;let[s,o]=a.split("?iv="),i=De.getSharedSecret(r,"02"+n),l=Nt(i),d=J.decode(o),m=J.decode(s),g=_t(l,d).decrypt(m);return F.decode(g)}function Nt(e){return e.slice(1,33)}var pr={};B(pr,{NIP05_REGEX:()=>Ot,isValid:()=>hr,queryProfile:()=>Ht,searchDomain:()=>vr,useFetchImplementation:()=>fr});var Ot=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,ze;try{ze=fetch}catch{}function fr(e){ze=e}async function vr(e,n=""){try{const a=`https://${e}/.well-known/nostr.json?name=${n}`;return(await(await ze(a,{redirect:"error"})).json()).names}catch{return{}}}async function Ht(e){var o;const n=e.match(Ot);if(!n)return null;const[a,r="_",s]=n;try{const i=`https://${s}/.well-known/nostr.json?name=${r}`,l=await(await ze(i,{redirect:"error"})).json();let d=l.names[r];return d?{pubkey:d,relays:(o=l.relays)==null?void 0:o[d]}:null}catch{return null}}async function hr(e,n){let a=await Ht(n);return a?a.pubkey===e:!1}var _r={};B(_r,{parse:()=>mr});function mr(e){const n={reply:void 0,root:void 0,mentions:[],profiles:[]},a=[];for(const r of e.tags)r[0]==="e"&&r[1]&&a.push(r),r[0]==="p"&&r[1]&&n.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<a.length;r++){const s=a[r],[o,i,l,d]=s,m={id:i,relays:l?[l]:[]},g=r===0,$=r===a.length-1;if(d==="root"){n.root=m;continue}if(d==="reply"){n.reply=m;continue}if(d==="mention"){n.mentions.push(m);continue}if(g){n.root=m;continue}if($){n.reply=m;continue}n.mentions.push(m)}return n}var yr={};B(yr,{fetchRelayInformation:()=>wr,useFetchImplementation:()=>gr});var Ut;try{Ut=fetch}catch{}function gr(e){Ut=e}async function wr(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var br={};B(br,{getPow:()=>Vt,minePow:()=>kr});function Vt(e){let n=0;for(let a=0;a<e.length;a++){const r=parseInt(e[a],16);if(r===0)n+=4;else{n+=Math.clz32(r)-28;break}}return n}function kr(e,n){let a=0;const r=e,s=["nonce",a.toString(),n.toString()];for(r.tags.push(s);;){const o=Math.floor(new Date().getTime()/1e3);if(o!==r.created_at&&(a=0,r.created_at=o),s[1]=(++a).toString(),r.id=ve(r),Vt(r.id)>=n)break}return r}var xr={};B(xr,{finishRepostEvent:()=>Er,getRepostedEvent:()=>$r,getRepostedEventPointer:()=>jt});function Er(e,n,a,r){return X({kind:Ve,tags:[...e.tags??[],["e",n.id,a],["p",n.pubkey]],content:e.content===""?"":JSON.stringify(n),created_at:e.created_at},r)}function jt(e){if(e.kind!==Ve)return;let n,a;for(let r=e.tags.length-1;r>=0&&(n===void 0||a===void 0);r--){const s=e.tags[r];s.length>=2&&(s[0]==="e"&&n===void 0?n=s:s[0]==="p"&&a===void 0&&(a=s))}if(n!==void 0)return{id:n[1],relays:[n[2],a==null?void 0:a[2]].filter(r=>typeof r=="string"),author:a==null?void 0:a[1]}}function $r(e,{skipVerification:n}={}){const a=jt(e);if(a===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===a.id&&!(!n&&!Ue(r)))return r}var zr={};B(zr,{NOSTR_URI_REGEX:()=>Re,parse:()=>Cr,test:()=>Rr});var Re=new RegExp(`nostr:(${It.source})`);function Rr(e){return typeof e=="string"&&new RegExp(`^${Re.source}$`).test(e)}function Cr(e){const n=e.match(new RegExp(`^${Re.source}$`));if(!n)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:n[0],value:n[1],decoded:xe(n[1])}}var Sr={};B(Sr,{finishReactionEvent:()=>Pr,getReactedEventPointer:()=>Mr});function Pr(e,n,a){const r=n.tags.filter(s=>s.length>=2&&(s[0]==="e"||s[0]==="p"));return X({...e,kind:je,tags:[...e.tags??[],...r,["e",n.id],["p",n.pubkey]],content:e.content??"+"},a)}function Mr(e){if(e.kind!==je)return;let n,a;for(let r=e.tags.length-1;r>=0&&(n===void 0||a===void 0);r--){const s=e.tags[r];s.length>=2&&(s[0]==="e"&&n===void 0?n=s:s[0]==="p"&&a===void 0&&(a=s))}if(!(n===void 0||a===void 0))return{id:n[1],relays:[n[2],a[2]].filter(r=>r!==void 0),author:a[1]}}var Tr={};B(Tr,{matchAll:()=>Br,regex:()=>Ke,replaceAll:()=>Lr});var Ke=()=>new RegExp(`\\b${Re.source}\\b`,"g");function*Br(e){const n=e.matchAll(Ke());for(const a of n)try{const[r,s]=a;yield{uri:r,value:s,decoded:xe(s),start:a.index,end:a.index+r.length}}catch{}}function Lr(e,n){return e.replaceAll(Ke(),(a,r)=>n({uri:a,value:r,decoded:xe(r)}))}var Ar={};B(Ar,{channelCreateEvent:()=>Ir,channelHideMessageEvent:()=>Or,channelMessageEvent:()=>Nr,channelMetadataEvent:()=>Dr,channelMuteUserEvent:()=>Hr});var Ir=(e,n)=>{let a;if(typeof e.content=="object")a=JSON.stringify(e.content);else if(typeof e.content=="string")a=e.content;else return;return X({kind:Ct,tags:[...e.tags??[]],content:a,created_at:e.created_at},n)},Dr=(e,n)=>{let a;if(typeof e.content=="object")a=JSON.stringify(e.content);else if(typeof e.content=="string")a=e.content;else return;return X({kind:St,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:a,created_at:e.created_at},n)},Nr=(e,n)=>{const a=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&a.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),X({kind:Pt,tags:[...a,...e.tags??[]],content:e.content,created_at:e.created_at},n)},Or=(e,n)=>{let a;if(typeof e.content=="object")a=JSON.stringify(e.content);else if(typeof e.content=="string")a=e.content;else return;return X({kind:Mt,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:a,created_at:e.created_at},n)},Hr=(e,n)=>{let a;if(typeof e.content=="object")a=JSON.stringify(e.content);else if(typeof e.content=="string")a=e.content;else return;return X({kind:Tt,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:a,created_at:e.created_at},n)},Ur={};B(Ur,{EMOJI_SHORTCODE_REGEX:()=>Ft,matchAll:()=>Vr,regex:()=>Ze,replaceAll:()=>jr});var Ft=/:(\w+):/,Ze=()=>new RegExp(`\\B${Ft.source}\\B`,"g");function*Vr(e){const n=e.matchAll(Ze());for(const a of n)try{const[r,s]=a;yield{shortcode:r,name:s,start:a.index,end:a.index+r.length}}catch{}}function jr(e,n){return e.replaceAll(Ze(),(a,r)=>n({shortcode:a,name:r}))}var Fr={};B(Fr,{useFetchImplementation:()=>Wr,validateGithub:()=>qr});var Je;try{Je=fetch}catch{}function Wr(e){Je=e}async function qr(e,n,a){try{return await(await Je(`https://gist.github.com/${n}/${a}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var Kr={};B(Kr,{default:()=>Xr,v2:()=>Wt});var Zr=new TextDecoder,I={minPlaintextSize:1,maxPlaintextSize:65535,utf8Encode:Kn,utf8Decode(e){return Zr.decode(e)},getConversationKey(e,n){const a=De.getSharedSecret(e,"02"+n).subarray(1,33);return Zn(ie,a,"nip44-v2")},getMessageKeys(e,n){const a=Jn(ie,e,n,76);return{chacha_key:a.subarray(0,32),chacha_nonce:a.subarray(32,44),hmac_key:a.subarray(44,76)}},calcPaddedLen(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const n=1<<Math.floor(Math.log2(e-1))+1,a=n<=256?32:n/8;return a*(Math.floor((e-1)/a)+1)},writeU16BE(e){if(!Number.isSafeInteger(e)||e<I.minPlaintextSize||e>I.maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const n=new Uint8Array(2);return new DataView(n.buffer).setUint16(0,e,!1),n},pad(e){const n=I.utf8Encode(e),a=n.length,r=I.writeU16BE(a),s=new Uint8Array(I.calcPaddedLen(a)-a);return _e(r,n,s)},unpad(e){const n=new DataView(e.buffer).getUint16(0),a=e.subarray(2,2+n);if(n<I.minPlaintextSize||n>I.maxPlaintextSize||a.length!==n||e.length!==2+I.calcPaddedLen(n))throw new Error("invalid padding");return I.utf8Decode(a)},hmacAad(e,n,a){if(a.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=_e(a,n);return Gn(ie,e,r)},decodePayload(e){if(typeof e!="string")throw new Error("payload must be a valid string");const n=e.length;if(n<132||n>87472)throw new Error("invalid payload length: "+n);if(e[0]==="#")throw new Error("unknown encryption version");let a;try{a=J.decode(e)}catch(o){throw new Error("invalid base64: "+o.message)}const r=a.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const s=a[0];if(s!==2)throw new Error("unknown encryption version "+s);return{nonce:a.subarray(1,33),ciphertext:a.subarray(33,-32),mac:a.subarray(-32)}}};function Jr(e,n,a=ht(32)){const{chacha_key:r,chacha_nonce:s,hmac_key:o}=I.getMessageKeys(n,a),i=I.pad(e),l=mt(r,s,i),d=I.hmacAad(o,l,a);return J.encode(_e(new Uint8Array([2]),a,l,d))}function Gr(e,n){const{nonce:a,ciphertext:r,mac:s}=I.decodePayload(e),{chacha_key:o,chacha_nonce:i,hmac_key:l}=I.getMessageKeys(n,a),d=I.hmacAad(l,r,a);if(!Xn(d,s))throw new Error("invalid MAC");const m=mt(o,i,r);return I.unpad(m)}var Wt={utils:I,encrypt:Jr,decrypt:Gr},Xr={v2:Wt},Qr={};B(Qr,{makeNwcRequestEvent:()=>es,parseConnectionString:()=>Yr});function Yr(e){const{pathname:n,searchParams:a}=new URL(e),r=n,s=a.get("relay"),o=a.get("secret");if(!r||!s||!o)throw new Error("invalid connection string");return{pubkey:r,relay:s,secret:o}}async function es(e,n,a){const s=await Dt(n,e,JSON.stringify({method:"pay_invoice",params:{invoice:a}})),o={kind:Lt,created_at:Math.round(Date.now()/1e3),content:s,tags:[["p",e]]};return X(o,n)}var ts={};B(ts,{getZapEndpoint:()=>as,makeZapReceipt:()=>os,makeZapRequest:()=>rs,useFetchImplementation:()=>ns,validateZapRequest:()=>ss});var Ge;try{Ge=fetch}catch{}function ns(e){Ge=e}async function as(e){try{let n="",{lud06:a,lud16:r}=JSON.parse(e.content);if(a){let{words:i}=ne.decode(a,1e3),l=ne.fromWords(i);n=F.decode(l)}else if(r){let[i,l]=r.split("@");n=new URL(`/.well-known/lnurlp/${i}`,`https://${l}`).toString()}else return null;let o=await(await Ge(n)).json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch{}return null}function rs({profile:e,event:n,amount:a,relays:r,comment:s=""}){if(!a)throw new Error("amount not given");if(!e)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:s,tags:[["p",e],["amount",a.toString()],["relays",...r]]};return n&&o.tags.push(["e",n]),o}function ss(e){let n;try{n=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!kt(n))return"Zap request is not a valid Nostr event.";if(!Ue(n))return"Invalid signature on zap request.";let a=n.tags.find(([o,i])=>o==="p"&&i);if(!a)return"Zap request doesn't have a 'p' tag.";if(!a[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=n.tags.find(([o,i])=>o==="e"&&i);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":n.tags.find(([o,i])=>o==="relays"&&i)?null:"Zap request doesn't have a 'relays' tag."}function os({zapRequest:e,preimage:n,bolt11:a,paidAt:r}){let s=JSON.parse(e),o=s.tags.filter(([l])=>l==="e"||l==="p"||l==="a"),i={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...o,["P",s.pubkey],["bolt11",a],["description",e]]};return n&&i.tags.push(["preimage",n]),i}var is={};B(is,{getToken:()=>ls,hashPayload:()=>Xe,unpackEventFromToken:()=>Kt,validateEvent:()=>Yt,validateEventKind:()=>Jt,validateEventMethodTag:()=>Xt,validateEventPayloadTag:()=>Qt,validateEventTimestamp:()=>Zt,validateEventUrlTag:()=>Gt,validateToken:()=>cs});var qt="Nostr ";async function ls(e,n,a,r=!1,s){const o={kind:Fe,tags:[["u",e],["method",n]],created_at:Math.round(new Date().getTime()/1e3),content:""};s&&o.tags.push(["payload",Xe(s)]);const i=await a(o);return(r?qt:"")+J.encode(j.encode(JSON.stringify(i)))}async function cs(e,n,a){const r=await Kt(e).catch(o=>{throw o});return await Yt(r,n,a).catch(o=>{throw o})}async function Kt(e){if(!e)throw new Error("Missing token");e=e.replace(qt,"");const n=F.decode(J.decode(e));if(!n||n.length===0||!n.startsWith("{"))throw new Error("Invalid token");return JSON.parse(n)}function Zt(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function Jt(e){return e.kind===Fe}function Gt(e,n){const a=e.tags.find(r=>r[0]==="u");return a?a.length>0&&a[1]===n:!1}function Xt(e,n){const a=e.tags.find(r=>r[0]==="method");return a?a.length>0&&a[1].toLowerCase()===n.toLowerCase():!1}function Xe(e){const n=ie(j.encode(JSON.stringify(e)));return O(n)}function Qt(e,n){const a=e.tags.find(s=>s[0]==="payload");if(!a)return!1;const r=Xe(n);return a.length>0&&a[1]===r}async function Yt(e,n,a,r){if(!Ue(e))throw new Error("Invalid nostr event, signature invalid");if(!Jt(e))throw new Error("Invalid nostr event, kind invalid");if(!Zt(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!Gt(e,n))throw new Error("Invalid nostr event, url tag invalid");if(!Xt(e,a))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!Qt(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}const us={},ds={t:"1626764977164",viewBox:"0 0 2240 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4404","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"140",height:"64",class:"mini-header__logo"},ps=E("path",{d:"M2079.810048 913.566175c-10.01309 0-18.554608 0.799768-26.936172-0.159954-16.987063-1.951433-33.974126-1.567544-50.99318-2.079395-10.972811-0.287916-10.652904-0.287916-11.580634-10.90883-2.71921-32.406582-5.694345-64.781173-8.605499-97.155764-2.527266-28.439735-4.926568-56.91146-7.70976-85.319204-2.527266-26.040432-5.566382-52.016883-8.317583-78.025324-2.623238-24.440897-5.054531-48.913784-7.77374-73.322691a12681.114551 12681.114551 0 0 0-10.684895-92.133223c-3.295042-27.128116-6.558094-54.320213-10.205034-81.416339a20559.272961 20559.272961 0 0 0-17.530905-125.979387c-6.398141-44.723002-14.075909-89.22207-22.105576-133.657156-1.439582-7.965685-1.247637-8.253601 6.36615-9.533229 31.670796-5.406429 63.501545-10.01309 95.716183-9.309295 3.486987 0.095972 7.005964 0.159954 10.460959 0.607823 5.662354 0.703795 8.605499 3.454996 8.925406 10.045081 1.119675 22.969325 2.71921 45.938649 4.414717 68.875983 2.71921 37.589076 5.662354 75.178151 8.477537 112.735236 1.791479 24.184971 3.327033 48.305961 5.150503 72.426951 2.911154 38.772732 5.982261 77.513473 8.925406 116.286205 1.791479 23.705111 3.359024 47.474203 5.182494 71.179313 2.783191 34.805885 5.822308 69.579778 8.637489 104.353672 1.791479 22.137566 3.391014 44.307123 5.278466 66.44469 2.783191 32.79047 5.790317 65.580941 8.63749 98.371411 2.143377 25.592562 4.09481 51.249106 6.270178 77.673426zM853.670395 114.918282c4.638652 0 11.644616-0.511851 18.554607 0.127963 8.797443 0.799768 10.49295 3.071107 11.036793 11.900541 2.527266 40.372267 4.894578 80.776524 7.581796 121.180782 2.943145 43.571337 6.174206 87.078693 9.405267 130.586048 2.975135 39.956388 5.950271 79.912775 9.149341 119.869163 3.486987 43.891244 7.357862 87.718507 10.876839 131.609751 2.655228 33.622229 4.926568 67.244457 7.677768 100.898677 2.623238 31.222926 5.694345 62.38187 8.509527 93.572805 2.399303 26.8402 4.830596 53.71239 7.165918 80.58458 0.735786 8.509527 0.127963 9.053369-9.053369 8.829434-24.025018-0.575833-47.922073-3.391014-71.947091-2.71921-5.502401 0.159954-7.101936-2.367312-8.029666-7.581796-1.983424-11.356699-1.663517-22.905343-2.879163-34.390006-3.295042-30.359177-5.182494-60.846317-7.965685-91.269474-2.495275-27.639967-5.502401-55.215953-8.349574-82.82393-2.527266-25.240664-5.02254-50.481329-7.709759-75.753984-2.687219-24.792795-5.534392-49.61758-8.349573-74.442365-2.591247-22.841362-5.118512-45.682723-7.869713-68.524085-4.062819-33.462275-8.093648-66.92455-12.508365-100.322844-4.062819-30.647093-8.66948-61.198214-12.988225-91.813317-5.886289-41.587914-12.508365-83.079855-19.834236-124.411842a1393.96288 1393.96288 0 0 0-5.310457-28.023856c-0.959721-4.702633-0.095972-7.421843 5.278466-8.157629 14.139891-1.887451 28.24779-4.830596 42.451663-6.206196 14.203872-1.311619 28.407744-3.966847 45.106891-2.71921z m1006.075609 403.33878c27.064134 0 27.703949 0.191944 32.054684 24.536869 5.342447 30.03927 9.08536 60.334465 12.636328 90.62966 3.742912 32.278619 7.517815 64.557238 10.972811 96.867848 2.783191 26.008441 5.118512 52.080864 7.74175 78.089305 2.7512 27.256079 5.662354 54.416185 8.509527 81.640274 1.567544 15.387528 3.039117 30.775056 4.798605 46.130593 0.511851 4.446708-0.831758 6.81402-5.214485 7.325871-9.245313 1.055693-18.426645 2.27134-27.639967 3.263052-16.891091 1.82347-33.814173 3.614949-50.737254 5.182493-8.733462 0.799768-9.309294 0.319907-10.940821-8.125638-14.843686-76.617733-29.719363-153.171485-44.435086-229.821208-9.789155-50.961189-19.322384-101.95437-28.919595-152.915559a805.525894 805.525894 0 0 1-3.582959-21.081873c-0.639814-4.030829 0.44787-6.622075 5.022541-7.70976 30.48714-7.133927 61.294186-12.636328 89.733921-14.011927z m-1137.077537 0c28.951586 0 28.823623 0.095972 33.302322 26.360339 6.909992 40.660183 11.804569 81.544301 16.187295 122.556382 4.286754 39.796434 8.957397 79.560878 13.148179 119.357311 2.847173 27.224088 5.086522 54.512157 7.74175 81.704255 1.887451 19.354375 4.126801 38.644769 6.174206 57.967153 0.255926 2.367312 0.383888 4.734624 0.543842 7.133927 0.415879 9.469248 0 10.237025-9.117351 11.164755-18.074747 1.887451-36.181485 3.454996-54.256232 5.246476-6.558094 0.639814-13.084197 1.599535-19.57831 2.239349-8.63749 0.799768-8.925406 0.767777-10.620913-7.965685-6.078234-30.679084-11.964523-61.422149-17.914793-92.101233-14.267853-73.898523-28.69566-147.733065-42.867542-221.631589-5.662354-29.559409-10.524941-59.246781-16.091323-88.838181-1.023702-5.406429-0.255926-7.933694 5.342447-9.245313 30.199223-7.037955 60.590391-12.540355 88.006423-13.947946z m382.128944 309.861946v124.027954c0 1.183656-0.127963 2.399303 0.03199 3.582959 0.607823 6.014252-1.599535 8.66948-7.805731 8.413555-8.157629-0.351898-16.251277-0.127963-24.408906 0.063981-17.019054 0.319907-34.070098-0.351898-51.057162 1.599535-9.405267 1.087684-9.213322 0.511851-10.141052-9.405266-2.783191-31.222926-5.822308-62.413861-8.669481-93.636787-2.623238-28.823623-4.99055-57.711228-7.677768-86.534851-2.71921-29.655381-5.758326-59.214791-8.509527-88.838181-1.887451-19.770254-3.550968-39.508518-5.214485-59.278772-2.175368-25.720525-4.190782-51.409059-6.462122-77.129585-0.959721-10.844848-0.159954-12.380402 10.588923-13.500076a531.877423 531.877423 0 0 1 83.527724-2.591247c6.941982 0.383888 13.851974 1.727498 20.570022 3.359024 8.477536 2.015414 9.405267 3.263052 9.853137 12.124476 0.92773 17.850812 1.855461 35.701624 2.335321 53.584427 0.543842 19.866226 0.095972 39.764443 0.831758 59.63067 1.855461 54.800074 1.567544 109.664129 2.207359 164.528184z m1134.806197 5.630364v117.437869c0 1.983424-0.063981 3.966847 0.03199 5.982262 0.415879 5.150503-1.983424 6.973973-6.878001 6.941982-12.028504-0.095972-24.025018 0-36.021531 0.159954-13.564058 0.127963-27.096125 0.063981-40.628192 1.535553-8.925406 1.023702-8.989387 0.351898-9.789155-8.509527-3.678931-40.660183-7.549806-81.320366-11.260728-122.04453-3.391014-37.525094-6.526103-75.082179-9.981099-112.639265-3.550968-38.740741-7.421843-77.38551-10.90883-116.09426-1.727498-19.386366-3.16708-38.772732-4.606661-58.159097-0.575833-8.445546 0.351898-9.949109 9.885127-10.716886 16.571184-1.311619 33.078387-3.550968 49.777534-3.263051 16.635165 0.319907 33.302322-0.607823 49.841515 2.559256 14.011928 2.687219 14.715723 3.486987 15.547481 18.458635 2.399303 44.051198 1.663517 88.230358 3.231061 132.281556 1.599535 46.89837 0.479861 93.79674 1.759489 146.069549zM1831.498213 305.135c9.789155 0.575833 17.498914 0.095972 25.176683 1.791479 4.894578 1.119675 7.357862 3.327033 7.837723 8.573509 2.303331 25.240664 4.798605 50.51332 7.32587 75.785975 2.015414 20.50604 4.158791 41.012081 6.238188 61.518121l0.191944 1.183656c1.663517 12.924244 1.279628 13.276142-11.292718 13.979937-11.196746 0.607823-22.361501 1.599535-33.558247 2.27134-7.357862 0.44787-9.693183 1.695507-10.90883-9.021378-4.190782-37.813011-9.053369-75.530049-13.692021-113.311069a1185.0316 1185.0316 0 0 0-4.286754-31.798759c-0.92773-5.982261 1.407591-9.277304 7.005964-9.757164 7.357862-0.671805 14.715723-0.863749 19.962198-1.215647z m-1133.398606 0.159954c7.549806 0.415879 15.323547-0.159954 22.937334 1.599535 4.350736 0.991712 6.558094 2.815182 6.973973 7.773741 0.92773 11.83656 2.7512 23.641129 3.870875 35.477689 3.550968 36.309448 6.909992 72.650886 10.237025 108.992324 0.703795 7.901704 0.543842 8.061657-6.84601 8.605499-13.116188 0.959721-26.264367 1.919442-39.412546 2.463284-7.645778 0.351898-8.605499-0.575833-9.56522-8.381564-3.327033-26.744227-6.462122-53.520446-9.661192-80.296664-2.591247-22.073585-4.766615-44.14717-7.901704-66.156773-0.863749-6.078234 1.119675-7.74175 5.982262-8.733462 7.709759-1.567544 15.451509-1.055693 23.385203-1.343609z m399.147998 100.002936c0 23.001315 0.063981 45.97064-0.031991 69.003946 0 10.332997-0.127963 10.396978-10.396978 10.269016a324.289753 324.289753 0 0 1-36.981252-1.919443c-7.933694-0.991712-8.093648-0.735786-8.317583-9.149341-0.799768-28.119828-1.631526-56.239655-2.207359-84.359483-0.415879-19.034468-0.639814-38.004955-1.791479-57.039422-0.607823-9.821146-0.063981-9.917118 9.373276-10.045081 13.915956-0.159954 27.799921 0.479861 41.619904 2.591247 8.317583 1.279628 8.701471 1.279628 8.733462 10.49295 0.063981 23.385204 0.063981 46.770407 0.063981 70.187602h-0.063981z m1135.38203 0.607824c0 23.033306 0.063981 46.034621-0.031991 69.035936 0 9.661192-0.159954 9.725174-9.853137 9.661192a505.32514 505.32514 0 0 1-38.132917-1.791479c-6.302168-0.479861-8.157629-3.135089-7.74175-8.861425 0.063981-0.799768 0-1.599535 0-2.399302-0.959721-44.403095-1.919442-88.7742-2.815182-133.177296-0.031991-2.367312-0.159954-4.734624-0.063982-7.133926 0.127963-8.957397 0.159954-9.181332 9.149341-9.117351 12.380402 0.063981 24.664832 0.703795 37.013243 1.919442 15.067621 1.503563 12.412393 3.359024 12.476375 15.259566 0.063981 22.169557 0.031991 44.403095 0 66.604643z m-1565.593 54.000306c0.287916 12.636328 0.287916 12.604337-11.804569 15.547481-8.221611 2.015414-16.443221 4.222773-24.728813 6.046243-7.069945 1.599535-8.317583 0.703795-9.53323-6.238187-8.445546-47.090314-16.8591-94.212619-25.240664-141.334924-1.695507-9.757164-1.247637-10.364988 8.349573-12.060495 11.804569-2.079396 23.577148-4.126801 35.381717-5.950271 7.517815-1.183656 8.477536-0.767777 9.9811 7.517815 2.975135 16.731138 5.790317 33.526256 7.997675 50.385357 3.423005 26.680246 6.238187 53.456464 9.309295 80.168701 0.255926 1.951433 0.191944 3.966847 0.287916 5.91828z m1064.138735-136.696273c15.451509-2.527266 31.030982-5.086522 46.610454-7.549806 5.598373-0.863749 7.29388 2.655228 8.029666 7.645778 2.655228 18.426645 5.982261 36.725327 8.157629 55.183962 3.19907 26.744227 7.581797 53.360492 8.413555 80.328655 0.063981 2.7512 0.031991 5.566382 0.095972 8.317583 0.159954 4.286754-1.983424 6.494113-5.950271 7.421843-10.556932 2.367312-21.113864 4.734624-31.638805 7.261889-5.054531 1.215647-6.750038-0.92773-7.581796-5.854298-3.16708-18.746552-6.81402-37.397131-10.045081-56.079702-5.47041-30.775056-10.780867-61.582103-16.091323-92.38915-0.127963-1.119675 0-2.303331 0-4.286754z m-710.64147 108.032603c-0.44787 16.37924 0.543842 30.647093-1.695507 44.914947-0.671805 4.510689-1.983424 7.421843-6.846011 7.837722-10.428969 0.863749-20.825947 1.695507-31.190935 2.7512-5.02254 0.543842-6.430131-1.631526-7.261889-6.558094-2.335321-14.55577-1.919442-29.303484-3.327033-43.923234-2.655228-27.607976-3.774903-55.407897-5.566383-83.111846-0.44787-6.750038-1.119675-13.436095-1.663516-20.186134-0.287916-3.774903 1.215647-5.886289 5.246475-6.046242 13.500077-0.543842 26.936172-3.007126 40.50023-2.527266 7.933694 0.287916 8.605499 0.799768 9.181331 8.797443 0.351898 5.534392 0.255926 11.132765 0.383889 16.699147l2.239349 81.352357z m1134.902169-15.867388c0 19.066459 0.223935 38.132918-0.031991 57.199376-0.159954 9.917118-1.279628 10.780867-10.652904 11.644616-9.277304 0.863749-18.490626 1.567544-27.735939 2.559256-5.214485 0.543842-7.645778-0.991712-7.965685-6.973973-1.34361-25.336637-3.16708-50.673273-4.926568-75.977919-1.3756-20.985901-2.943145-41.939811-4.414717-62.893722-0.159954-2.399303-0.031991-4.798605-0.191944-7.165917-0.223935-4.190782 1.055693-6.654066 5.758326-6.81402 13.116188-0.44787 26.136404-2.975135 39.348564-2.495274 8.061657 0.287916 8.18962 0.415879 8.797444 8.797443 1.951433 27.32006 2.143377 54.704102 2.015414 82.120134zM628.295894 756.171918c16.571184 18.234701 17.402942 39.828425 11.932532 62.413861-5.502401 22.585436-18.042756 41.204025-33.23834 57.903171-25.49659 27.895893-56.303637 48.497905-89.062116 65.99682-56.399609 30.135242-116.190232 50.161422-178.572103 61.997982-44.882956 8.477536-90.053828 15.00364-135.704561 17.498914-13.915956 0.767777-27.799921 1.407591-41.715876 1.311619-10.077071 0-20.186133 0.287916-30.231214-0.063981-8.541518-0.319907-9.789155-1.791479-10.49295-10.716886-2.591247-32.022693-4.798605-64.077378-7.645778-96.100071-3.327033-37.109215-7.229899-74.18644-10.812858-111.295654-2.623238-26.8402-4.894578-53.744381-7.773741-80.520599-3.327033-31.542833-7.069945-63.021684-10.716885-94.564517-3.327033-29.111539-6.526103-58.28706-10.045081-87.430591-3.934856-32.278619-7.997676-64.493257-12.31642-96.707894a8228.968456 8228.968456 0 0 0-13.212161-92.996973 5984.500754 5984.500754 0 0 0-24.312934-152.627642 3243.825263 3243.825263 0 0 0-23.67312-123.740038c-1.151665-5.502401 0.511851-7.709759 5.342448-9.725174C52.335283 47.609843 98.465876 28.063524 144.724432 8.77313c8.605499-3.582959 17.434933-6.590085 26.584274-8.285592 6.334159-1.183656 7.965685 0.127963 7.773741 6.494113-0.479861 16.283268 0.191944 32.630517-1.407591 48.849803a161.393095 161.393095 0 0 0-0.639814 13.084197c-0.735786 58.383032-1.439582 116.798056 0.095972 175.213079 1.34361 51.185124 4.030829 102.338258 7.005964 153.491392 2.335321 40.372267 5.694345 80.744534 9.149341 121.052819 3.391014 39.508518 7.517815 78.953054 11.38869 118.461572 0.735786 7.517815 1.407591 8.221611 9.949108 7.069945a381.329176 381.329176 0 0 1 50.833227-4.190782c52.880632-0.127963 104.897514 7.133927 156.338564 19.322384 45.010919 10.684895 88.806191 24.920757 130.777993 44.818975 20.793957 9.853136 40.692174 21.241827 58.830902 35.701624 6.174206 4.862587 11.676606 10.46096 16.891091 16.315259z m1126.840512-9.597211c20.47405 17.946784 27.927883 39.924397 22.105576 67.116494-4.830596 22.425483-15.771416 41.268006-30.359177 58.127107-23.417194 27.096125-51.856929 47.698138-82.631985 64.909136-60.334465 33.782182-124.603787 55.727804-192.168151 68.396122a1151.089465 1151.089465 0 0 1-111.455609 15.547481c-21.177845 1.82347-42.451662 4.09481-66.220754 2.623238h-27.76793c-5.406429 0-8.477536-1.695507-8.925406-8.125638-2.047405-28.087837-4.414717-56.143683-6.941983-84.19953-2.687219-29.623391-5.662354-59.246781-8.477536-88.870172-2.559256-27.224088-4.926568-54.512157-7.709759-81.736245-2.559256-25.656544-5.502401-51.249106-8.285592-76.873659-2.591247-24.057008-5.086522-48.114017-7.933695-72.139035-3.423005-29.111539-7.037955-58.223079-10.652904-87.334618-3.391014-27.160107-6.750038-54.288222-10.364987-81.416338a6133.577429 6133.577429 0 0 0-12.156467-87.142675c-5.694345-37.653057-11.804569-75.178151-17.818822-112.767227a3259.14881 3259.14881 0 0 0-29.111539-158.993792c-0.44787-2.335321-0.671805-4.734624-1.3756-7.005964-1.663517-5.118512-0.063981-7.837722 4.958559-9.821146C1191.012355 47.641834 1238.61452 24.448575 1288.2321 6.149893c6.494113-2.431293 13.052207-5.150503 20.058171-5.854299 6.302168-0.639814 7.901704 0.383888 7.29388 7.101936-3.327033 36.43741-1.407591 73.066765-3.135089 109.536166-1.407591 29.751354-1.247637 59.598679 0.255926 89.382023 0.351898 7.549806 0.639814 15.131602 0.575832 22.649418-0.383888 35.765606 1.503563 71.499221 3.327033 107.200845 2.335321 47.186286 5.758326 94.276601 9.245313 141.398906 2.527266 34.006117 5.822308 67.948253 9.021379 101.922379 1.695507 18.586598 3.518977 37.141206 5.822308 55.631832 1.247637 10.205034 1.759489 10.301006 11.772578 8.957396 17.658868-2.399303 35.349726-4.350736 53.200539-4.09481 62.637796 0.799768 124.027954 10.684895 184.266447 27.863902 40.788146 11.580634 80.488608 26.040432 117.981712 46.290547a253.55831 253.55831 0 0 1 47.218277 32.438573zM308.676783 922.811488c23.161269-11.068783 135.608589-98.947243 144.533995-113.279078-54.576139-23.513166-109.344222-45.362816-168.239105-63.24562l23.70511 176.524698z m1277.196815-107.520752c2.879163-3.103098 2.559256-5.502401-1.343609-7.229899-7.773741-3.550968-15.4835-7.325871-23.353213-10.556932-42.003793-17.179007-84.19953-33.814173-127.482951-47.37823-3.774903-1.151665-7.645778-3.774903-12.476374-1.535554l23.321222 173.45359c3.454996 0.767777 4.798605-0.831758 6.33416-1.919442 39.316574-28.855614 78.889073-57.35933 116.638102-88.390312 6.36615-5.182494 12.668318-10.396978 18.362663-16.443221z",fill:"var(--brand_blue)","p-id":"4405"},null,-1),fs=[ps];function vs(e,n){return u(),y("svg",ds,fs)}const hs=N(us,[["render",vs]]),Qe=e=>(pn("data-v-e484e7f0"),e=e(),fn(),e),_s=Qe(()=>E("div",null,[E("div",{class:"diamond"})],-1)),ms=Qe(()=>E("div",null,[E("div",{class:"diamond"})],-1)),ys=Qe(()=>E("div",null,[E("div",{class:"diamond"})],-1)),gs=[_s,ms,ys],ws=P({__name:"PlayButton",props:{value:{type:Boolean,default:!0}},emits:["update:value"],setup(e,{emit:n}){const a=e,r=n,s=M(a.value);return Be(()=>{s.value=a.value}),q(s,()=>{r("update:value",s.value)}),(o,i)=>(u(),y("div",{class:Le(["play",{pause:!s.value}]),onClick:i[0]||(i[0]=()=>s.value=!s.value)},gs,2))}}),bs=N(ws,[["__scopeId","data-v-e484e7f0"]]),ks={class:"flex flex-shrink-0 w-40 h-40"},xs=["src"],Es=E("span",{"data-mce-type":"bookmark",style:{display:"inline-block",width:"0px",overflow:"hidden","line-height":"0"},class:"mce_SELRES_start"},null,-1),$s=[Es],zs=P({__name:"ContentBilibiliWebsite",props:{bv:{}},setup(e){const n=e,{bv:a}=H(n),r=C(()=>`//player.bilibili.com/player.html?bvid=${a.value}&&page=1&as_wide=1&high_quality=1&danmaku=0`),[s]=pt(),o=M(!1),{duration:i,transitionActive:l,safeActive:d,show:m,hidden:g}=ft();let $=null;return m(),q(o,()=>{clearTimeout($),$=setTimeout(()=>{o.value?g():m()},3e3)}),(f,h)=>{const z=hs,R=G,v=Ne;return u(),y("div",{ref_key:"bilibili_player_ref",ref:s,class:"w-full rounded-xl overflow-hidden relative"},[b(v,{class:"h-full w-full"},{default:w(()=>[c(d)?(u(),y("div",{key:0,class:"w-full h-full flex flex-col justify-center items-center absolute left-0 right-0 top-0 bottom-0",style:ee({opacity:c(l)?1:0,transition:`opacity ${c(i)}ms ease `})},[b(R,{class:"absolute top-[25%]",style:ee({transform:"translate(0,-50%)"}),size:"15em",color:"rgb(0, 174, 236)"},{default:w(()=>[b(z,{class:"h-40 w-40"})]),_:1},8,["style"]),E("div",ks,[b(bs,{value:c(o),"onUpdate:value":h[0]||(h[0]=_=>ye(o)?o.value=_:null)},null,8,["value"])])],4)):U("",!0),c(o)?(u(),y("iframe",{key:1,class:"w-full h-full",src:c(r),allowfullscreen:"",height:"0",width:"100%",scrolling:"no",frameborder:"0",sandbox:"allow-top-navigation allow-same-origin allow-forms allow-scripts"},$s,8,xs)):U("",!0)]),_:1})],512)}}}),Rs=""+new URL("7z-DHelqFvk.png",import.meta.url).href,Cs=["src"],Ss=P({__name:"Icon7z",setup(e){return(n,a)=>(u(),y("img",{class:"h-full w-auto",src:c(Rs),alt:""},null,8,Cs))}}),Ps={},Ms={version:"1.1",xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd",height:"1024",width:"1024",viewBox:"0 0 1024 1024"},Ts=E("path",{d:"M766.1 57.2c-0.8-0.8-1.6-1.4-2.4-2.2l-50-50c-2.8-2.8-8.2-5-12.1-5H286c-58.1 0-105.4 47.2-105.4 105.1v465.5h82.5V105.1c0-12.4 10.5-22.9 22.9-22.9h364.4v152c0 58 47.3 105.1 105.4 105.1h152.4v579.5c0 12.4-10.5 22.9-22.9 22.9H286c-12.4 0-22.9-10.5-22.9-22.9v-57.9h-82.5v57.9c0 58 47.3 105.1 105.4 105.1h599.2c58.1 0 105.4-47.2 105.4-105.1V288.4c0-3.9-2.2-9.3-5-12l-50.2-50c-0.8-0.8-1.5-1.6-2.3-2.4l-167-166.8z m-33.2 177V129.1c0-3.9 2.2-4.8 5-2.1l125.3 125c2.8 2.8 1.8 5-2.1 5H755.8c-12.4 0.1-22.9-10.4-22.9-22.8z",fill:"#04a7f5"},null,-1),Bs=E("path",{d:"M679.7 598.5H68c-15.1 0-27.5 12.3-27.5 27.4v180.6c0 15.1 12.4 27.4 27.5 27.4h611.7c15.1 0 27.5-12.3 27.5-27.4V626c0-15.1-12.4-27.5-27.5-27.5z m-345.1 59.3l-77.3 107.4h77.2v26.4H213.6v-18l78.7-106.9h-72.9v-26.4h115.1v17.5z m67.6 7.6h-13v101.1h13v25.1h-58v-25.1H357V665.4h-12.8v-25.1h58v25.1z m113.4 60c-11.4 9.3-25.6 13.8-42.6 13.4h-16.6v52.7h-32.2V640.3h52.1c37.6 0 56.4 16 56.4 47.9 0 15.5-5.7 27.9-17.1 37.2z",fill:"#034767"},null,-1),Ls=E("path",{d:"M470.7 665.3h-14.3v48.8h14c18.9 0 28.4-8.2 28.4-24.7 0-16.1-9.4-24.1-28.1-24.1z",fill:"#034767"},null,-1),As=E("path",{d:"M468.4 81.5h71v47.4h-71zM397.4 128.9h71v47.3h-71zM468.4 176.2h71v47.3h-71zM397.4 223.5h71v47.3h-71zM468.4 270.8h71v47.3h-71zM397.4 318.1h71v47.3h-71zM468.4 365.4h71v47.3h-71zM397.4 412.7h142V460h-142zM397.4 460h15.1v47.3h-15.1zM523.7 460h15.7v47.3h-15.7zM539.4 543.1c0 13.1-11 11.5-24.5 11.5H422c-13.6 0-24.5 1.7-24.5-11.3V531v-23.6h141.9v35.7z",fill:"#034767"},null,-1),Is=[Ts,Bs,Ls,As];function Ds(e,n){return u(),y("svg",Ms,Is)}const Ns=N(Ps,[["render",Ds]]),Os=""+new URL("xlsx-Bg8Dh2tM.png",import.meta.url).href,Hs=["src"],Us=P({__name:"xlsx",setup(e){return(n,a)=>(u(),y("img",{class:"h-full w-auto",src:c(Os),alt:""},null,8,Hs))}}),Vs={},js={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Fs=E("path",{d:"M270.1 741.7c0 23.4 19.1 42.5 42.6 42.5h48.7v120.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V784.1h85v120.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V784.1h48.7c23.5 0 42.6-19.1 42.6-42.5V346.4h-486v395.3zm357.1-600.1l44.9-65c2.6-3.8 2-8.9-1.5-11.4c-3.5-2.4-8.5-1.2-11.1 2.6l-46.6 67.6c-30.7-12.1-64.9-18.8-100.8-18.8c-35.9 0-70.1 6.7-100.8 18.8l-46.6-67.5c-2.6-3.8-7.6-5.1-11.1-2.6c-3.5 2.4-4.1 7.4-1.5 11.4l44.9 65c-71.4 33.2-121.4 96.1-127.8 169.6h486c-6.6-73.6-56.7-136.5-128-169.7zM409.5 244.1a26.9 26.9 0 1 1 26.9-26.9a26.97 26.97 0 0 1-26.9 26.9zm208.4 0a26.9 26.9 0 1 1 26.9-26.9a26.97 26.97 0 0 1-26.9 26.9zm223.4 100.7c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V400.1c.1-30.6-24.3-55.3-54.6-55.3zm-658.6 0c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V400.1c0-30.6-24.5-55.3-54.6-55.3z",fill:"currentColor"},null,-1),Ws=[Fs];function qs(e,n){return u(),y("svg",js,Ws)}const Ks=N(Vs,[["render",qs]]),Zs={},Js={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Gs=E("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7l7-7z",fill:"currentColor"},null,-1),Xs=[Gs];function Qs(e,n){return u(),y("svg",Js,Xs)}const Ys=N(Zs,[["render",Qs]]),eo={class:"flex h-20"},to={class:"flex-1 flex-shrink flex items-center"},no=P({__name:"ContentDownloadBlock",props:{url:{}},setup(e){const n=e,{url:a}=H(n),r=C(()=>{const o=a.value.lastIndexOf("/"),i=a.value.slice(o+1)??a.value;return decodeURI(i)}),s=()=>{window.open(a.value)};return(o,i)=>{const l=Yn,d=Ks,m=G,g=Us,$=Ns,f=Ss,h=Ne;return u(),S(h,{class:"mt-2"},{default:w(()=>[E("div",eo,[E("div",to,[b(l,{trigger:"hover"},{trigger:w(()=>[K(L(c(r)),1)]),default:w(()=>[K(" "+L(c(a)),1)]),_:1})]),E("div",{class:"flex-shrink h-20 w-20 flex justify-center items-center",onClick:s},[c(a).endsWith(".apk")?(u(),S(m,{key:0,size:"3em"},{default:w(()=>[b(d)]),_:1})):c(a).endsWith(".xlsx")?(u(),S(m,{key:1,size:"3em"},{default:w(()=>[b(g)]),_:1})):c(a).endsWith(".zip")?(u(),S(m,{key:2,size:"3em"},{default:w(()=>[b($)]),_:1})):c(a).endsWith(".7z")?(u(),S(m,{key:3,size:"3em"},{default:w(()=>[b(f)]),_:1})):(u(),S(m,{key:4,size:"3em"},{default:w(()=>[b(Ys)]),_:1}))])])]),_:1})}}}),ao=["src"],ro=P({__name:"ContentYouTubeWebsite",props:{v:{}},setup(e){const n=e,{v:a}=H(n),r=C(()=>`https://www.youtube.com/embed/${a.value}?controls=0`),[s]=pt();return(o,i)=>{const l=Ne;return u(),y("div",{ref_key:"target",ref:s,class:"w-full rounded-xl overflow-hidden relative"},[b(l,{class:"h-full w-full"},{default:w(()=>[E("iframe",{class:"w-full h-full",src:c(r),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,ao)]),_:1})],512)}}}),so={class:"w-full"},oo=["href"],io=P({__name:"ContentWebsite",props:{src:{}},setup(e){const n=e,{src:a}=H(n),r=C(()=>{const i=/bilibili.com.*(BV[A-Za-z0-9]{5,20})\//[Symbol.match](a.value);if(!i)return;const l=i[1];if(l)return l}),s=C(()=>{const i=/youtube.com\/.*v=([a-zA-Z0-9]+)/[Symbol.match](a.value);if(!i)return;const l=i[1];if(l)return l}),o=`apk,pdf,zip,excel,xlsx,7z,exe,docx,doc,docx,zip,rar,apk,ipa,txt,exe,7z,e,z,ct,ke,cetrainer,db,tar,pdf,w3x
epub,mobi,azw,azw3,osk,osz,xpa,cpk,lua,jar,dmg,ppt,pptx,xls,xlsx,mp3
ipa,iso,img,gho,ttf,ttc,txf,dwg,bat,imazingapp,dll,crx,xapk,conf
deb,rp,rpm,rplib,mobileconfig,appimage,lolgezi,flac
cad,hwt,accdb,ce,xmind,enc,bds,bdi,ssf,it
pkg,cfg`.split(",").map(i=>`.${i}`);return(i,l)=>(u(),y("div",so,[c(r)?(u(),S(zs,{key:0,bv:c(r)},null,8,["bv"])):c(s)?(u(),S(ro,{key:1,v:c(s)},null,8,["v"])):c(o).some(d=>c(a).endsWith(d))?(u(),S(no,{key:2,url:c(a)},null,8,["url"])):(u(),y("a",{key:3,class:"break-words",href:c(a),target:"_blank"},L(c(a)),9,oo))]))}}),lo=P({__name:"UserLink",props:{value:{},withPrefix:{type:Boolean,default:!0}},setup(e){const n=e,{value:a}=H(n),r=C(()=>null),s=C(()=>{var i;return(i=r.value)==null?void 0:i.feat.useMetadata()}),o=C(()=>{if(!s.value)return a.value.slice(0,10);for(const i of["name","display_name","displayName","username"]){const l=s.value[i];if((l==null?void 0:l.length)??0>0)return l}return a.value.slice(0,10)});return(i,l)=>{const d=dt("RouterLink");return u(),S(d,{to:{name:"profile",params:{value:c(a)}}},{default:w(()=>[E("span",null,L(i.withPrefix?"@":"")+L(c(o)??c(a).slice(0,10)),1)]),_:1},8,["to"])}}}),co=["onClick"],uo={key:0},po={key:1,class:"p-0 m-0 w-full h-auto"},fo={controls:"",class:"overflow-hidden rounded-2xl w-full m-0 p-0 h-auto"},vo=["src"],ho=["href"],_o=["href"],mo={key:8,class:"break-words block"},yo=["textContent"],go=P({__name:"Content",props:{event:{},contenteditable:{type:Boolean},disabledReply:{type:Boolean}},setup(e){const n=e,{event:a,contenteditable:r}=H(n);function s(h,z,R,v){let _=0;const p=z[Symbol.matchAll](h);for(const x of p){let k=x.index,T=x[0];nt(k)&&(k-_>0&&R(h.slice(_,k)),v(T,k,x),_=k+T.length)}h.length-_>0&&R(h.slice(_))}const o=[(h,z,R,v)=>{s(z,hn(),_=>{h(_)},(_,p,x)=>{let k=x[1];_&&k&&R.push(l(_,k,v.tags))})},(h,z,R,v)=>{s(z,/(nostr:|&|@)((naddr)[a-zA-Z0-9]+)/g,_=>{h(_)},(_,p,x)=>{const k=x[2];k&&R.push(["naddr",k])})},(h,z,R,v)=>{s(z,/(nostr:|&|@)((nevent|note)[a-zA-Z0-9]+)/g,_=>{h(_)},(_,p,x)=>{const k=x[2];k&&R.push(["e",k])})},(h,z,R,v)=>{s(z,/(nostr:|@)((nprofile|npub)[a-zA-Z0-9]+)/g,_=>{h(_)},(_,p,x)=>{const k=x[2];k&&R.push(["p",`@${k}`,k])})},(h,z,R,v)=>{s(z,_n(),_=>{h(_)},(_,p,x)=>{const k=x[1];k&&R.push(["t",`#${k}`,k])})},(h,z,R)=>{R.push(["text",z])}];function i(h,z,R){const v=p=>{const x=o[p];return x?k=>{k&&x(v(p+1),k,z,R)}:()=>{}};v(0)(h)}function l(h,z,R){const v=parseInt(z);if(!nt(v))return["text",h];const _=R[v];if(!_)return["text",h];const p=_[1];if(!p)return["text",h];switch(_[0]){case"p":case"e":return["e",ke.neventEncode({id:p})];case"t":return["t",`#${p}`,p];default:return["text",h]}}function d(h,z){h.split(`
`).forEach(R=>{const v=[];s(R,vn(),_=>{i(_,v,a.value)},(_,p,x)=>{let k=_;[".jpg",".jpeg",".png",".gif",".bmp"].some(T=>k.endsWith(T))?v.push(["img",k,k]):[".mov",".mp4",".av1"].some(T=>k.endsWith(T))?v.push(["video",k,k]):R===k?v.push(["website",k,k]):v.push(["url",k,k])}),v.push(["enter",""]),z.push(v)})}const m=C(()=>{const h=[];return d(a.value.content,h),h}),[g,$]=Ae();function f(h,z){["e","p","url","website","img","video","t"].some(R=>h[0]===R)&&z.stopPropagation()}return(h,z)=>{const R=yt,v=dt("RouterLink");return u(),y("div",{class:"w-full",ref_key:"target",ref:g},[E("div",null,[(u(!0),y(Z,null,te(c(m),_=>(u(),y("div",{key:String(_),class:"w-full flex flex-wrap justify-start items-start"},[(u(!0),y(Z,null,te(_,p=>(u(),y("span",{key:p[1],class:Le(["flex justify-start items-start",{"w-full":["e","website","img","video"].some(x=>p[0]===x)}]),onClick:x=>f(p,x)},[p[0]==="img"?(u(),y("div",uo,[b(R,{class:"img w-full",src:p[1]},null,8,["src"])])):p[0]==="video"?(u(),y("div",po,[E("video",fo,[E("source",{src:p[1]},null,8,vo)])])):p[0]==="website"?(u(),S(io,{key:p[1],src:p[1]},null,8,["src"])):p[0]==="url"?(u(),y("a",{key:3,class:"break-words",href:p[2]},L(p[1]),9,ho)):p[0]==="t"?(u(),S(v,{key:4,to:{name:"tag",params:{value:p[2]}}},{default:w(()=>[K(L(p[1]),1)]),_:2},1032,["to"])):p[0]==="naddr"?(u(),S(e1,{key:5,addr:p[1]},null,8,["addr"])):p[0]==="p"?(u(),S(lo,{key:6,value:p[2]},null,8,["value"])):p[0]==="url"?(u(),y("a",{key:7,class:"break-words block",style:{"word-break":"break-all","text-overflow":"ellipsis","word-wrap":"break-word"},href:p[2]},L(p[1]),9,_o)):p[0]==="enter"?(u(),y("br",mo)):(u(),y("span",{key:9,class:"flex",style:{"table-layout":"fixed","word-break":"break-all","word-wrap":"break-word"},textContent:L(p[1].replace(" "," "))},null,8,yo))],10,co))),128))]))),128))])],512)}}}),wo=N(go,[["__scopeId","data-v-3e507c9e"]]);var at;const en=typeof window<"u",bo=e=>typeof e=="string",ko=()=>{},rt=en&&((at=window==null?void 0:window.navigator)==null?void 0:at.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function me(e){return typeof e=="function"?e():c(e)}const xo={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function tn(e){return mn()?(yn(e),!0):!1}function Eo(e){return typeof e=="function"?C(e):M(e)}function nn(e){var n;const a=me(e);return(n=a==null?void 0:a.$el)!=null?n:a}const $o=en?window:void 0;function he(...e){let n,a,r,s;if(bo(e[0])||Array.isArray(e[0])?([a,r,s]=e,n=$o):[n,a,r,s]=e,!n)return ko;Array.isArray(a)||(a=[a]),Array.isArray(r)||(r=[r]);const o=[],i=()=>{o.forEach(g=>g()),o.length=0},l=(g,$,f,h)=>(g.addEventListener($,f,h),()=>g.removeEventListener($,f,h)),d=q(()=>[nn(n),me(s)],([g,$])=>{i(),g&&o.push(...a.flatMap(f=>r.map(h=>l(g,f,h,$))))},{immediate:!0,flush:"post"}),m=()=>{d(),i()};return tn(m),m}const zo=500;function st(e,n,a){var r,s;const o=C(()=>nn(e));let i;function l(){i&&(clearTimeout(i),i=void 0)}function d(g){var $,f,h,z;($=a==null?void 0:a.modifiers)!=null&&$.self&&g.target!==o.value||(l(),(f=a==null?void 0:a.modifiers)!=null&&f.prevent&&g.preventDefault(),(h=a==null?void 0:a.modifiers)!=null&&h.stop&&g.stopPropagation(),i=setTimeout(()=>n(g),(z=a==null?void 0:a.delay)!=null?z:zo))}const m={capture:(r=a==null?void 0:a.modifiers)==null?void 0:r.capture,once:(s=a==null?void 0:a.modifiers)==null?void 0:s.once};he(o,"pointerdown",d,m),he(o,"pointerup",l,m),he(o,"pointerleave",l,m)}const Ro={[xo.mounted](e,n){typeof n.value=="function"?st(e,n.value,{modifiers:n.modifiers}):st(e,...n.value)}},ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},it="__vueuse_ssr_handlers__";ot[it]=ot[it]||{};function an(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientHeight<e.scrollHeight||n.overflowY==="auto"&&e.clientWidth<e.scrollWidth)return!0;{const a=e.parentNode;return!a||a.tagName==="BODY"?!1:an(a)}}function Co(e){const n=e||window.event,a=n.target;return an(a)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}function So(e,n=!1){const a=M(n);let r=null,s;q(Eo(e),l=>{if(l){const d=l;s=d.style.overflow,a.value&&(d.style.overflow="hidden")}},{immediate:!0});const o=()=>{const l=me(e);!l||a.value||(rt&&(r=he(l,"touchmove",d=>{Co(d)},{passive:!1})),l.style.overflow="hidden",a.value=!0)},i=()=>{const l=me(e);!l||!a.value||(rt&&(r==null||r()),l.style.overflow=s,a.value=!1)};return tn(i),C({get(){return a.value},set(l){l?o():i()}})}const Po=()=>{let e=!1;const n=M(!1);return(a,r)=>{if(n.value=r.value,e)return;e=!0;const s=So(a,r.value);q(n,o=>s.value=o)}};Po();const Pe=M(null);function Vl(){const e=gn(),n=le(Mn),a=C(()=>e.params.value),r=C(()=>Tn(a.value)),s=C(()=>{var o;return(o=r.value)==null?void 0:o.id});return C(()=>{var i,l;return s.value?((i=Pe.value)==null?void 0:i.id)===s.value?Pe.value:n.getEventById(s.value,{urls:new Set((l=r.value)==null?void 0:l.relays)}).getLatestEvent():null})}function Ye(){const e=ge();return n=>{if(typeof n=="string"){e.push({name:"short-text-note",params:{value:n}});return}Pe.value=n,e.push({name:"short-text-note",params:{value:Bn(n)}})}}const Mo=P({__name:"DrawerProvide",setup(e){const{id:n}=$1();return(a,r)=>D(a.$slots,"default",{id:c(n)})}}),To=P({__name:"LazyItem",props:{show:{type:[null,Boolean],default:null},minHeight:{default:0},transitionDuration:{default:500},disabled:{type:Boolean},delay:{default:500}},emits:["update:show"],setup(e,{emit:n}){const a=e,{transitionDuration:r,delay:s,disabled:o}=H(a),i=n,l=M(),d=M(),m=a.show===void 0||a.show===null?Ae(s.value,{target:l})[1]:we(a,"show"),{transitionActive:g,safeActive:$,duration:f,show:h,hidden:z,transitioning:R}=ft(r);q(m,p=>{p?h():z(),i("update:show",p)});const{height:v}=wn(d),_=M(0);return q(v,p=>{if(p){_.value=p;return}else return}),(p,x)=>{const k=i1;return u(),y("div",{ref_key:"wrap",ref:l,class:"overflow-hidden relative",style:ee({minHeight:c($)?"0px":typeof p.minHeight=="number"?`${p.minHeight}px`:p.minHeight,height:c(g)?`${c(_)}px`:"0px",transition:`height ${c(f)}ms ease-out`})},[p.minHeight>100&&(!c($)||c(R))?(u(),y("div",{key:0,class:"absolute left-0 right-0 top-0 bottom-0 flex items-center justify-center",style:ee({opacity:c(g)?0:1,transition:`opacity ${c(f)}ms ease-out`})},[b(k,{size:"medium"})],4)):U("",!0),c($)?(u(),y("div",{key:1,ref_key:"target",ref:d,style:ee({opacity:c(g)?1:0,transition:`opacity ${c(f)}ms ease-in`})},[D(p.$slots,"default")],4)):U("",!0)],4)}}}),Bo=P({__name:"LazyItemDisabled",props:{show:{type:[null,Boolean],default:null},minHeight:{default:0},transitionDuration:{default:500},disabled:{type:Boolean},delay:{default:500}},setup(e){const n=e;return(a,r)=>a.disabled?D(a.$slots,"default",{key:0}):(u(),S(To,bn(Te({key:1},n)),{default:w(()=>[D(a.$slots,"default")]),_:3},16))}}),[jl,Lo]=re(e=>e),[Fl,Ao]=re(e=>{const n=C(()=>{var a;return new Set((((a=e.value)==null?void 0:a.tags.filter(r=>r[0]==="e"&&r[1]&&(!r[3]||r[3]==="reply")))??[]).map(r=>r[1]))});return{focusEvent:e,parents:n}}),Io={},Do={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 496 512"},No=E("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200s-89.7 200-200 200zm84-143.4c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.6-11.5-33.8-3.1c-10.2 8.5-11.5 23.6-3.1 33.8c30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8c-10.2-8.4-25.3-7.1-33.8 3.1zM136.5 211c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7c3.6-1.1 6-4.5 5.7-8.3c-3.3-42.1-32.2-71.4-56-71.4s-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3c3.4 1.1 7.4-.5 9.3-3.7l9.5-17zM328 152c-23.8 0-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3c3.5 1.1 7.4-.5 9.3-3.7l9.5-17c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7c3.6-1.1 6-4.5 5.7-8.3c-3.3-42.1-32.2-71.4-56-71.4z",fill:"currentColor"},null,-1),Oo=[No];function Ho(e,n){return u(),y("svg",Do,Oo)}const Uo=N(Io,[["render",Ho]]),Vo={},jo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Fo=E("path",{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H273v428h.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4c20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3c40.4-23.5 65.5-66.1 65.5-111c0-28.3-9.3-55.5-26.1-77.7zM112 132v364c0 17.7 14.3 32 32 32h65V100h-65c-17.7 0-32 14.3-32 32z",fill:"currentColor"},null,-1),Wo=[Fo];function qo(e,n){return u(),y("svg",jo,Wo)}const Ko=N(Vo,[["render",qo]]),Zo={},Jo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Go=E("path",{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4c20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3c40.4-23.5 65.5-66.1 65.5-111c0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5c-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 0 1-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0 1 33.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4l21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4l21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5l21.9 19a56.76 56.76 0 0 1 19.6 43c0 19.1-11 37.5-28.8 48.4z",fill:"currentColor"},null,-1),Xo=[Go];function Qo(e,n){return u(),y("svg",Jo,Xo)}const Yo=N(Zo,[["render",Qo]]),ei={},ti={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ni=E("path",{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7c0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4c47.6-20.3 78.3-66.8 78.3-118.4c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c-.2-12.6-2-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z",fill:"currentColor"},null,-1),ai=[ni];function ri(e,n){return u(),y("svg",ti,ai)}const si=N(ei,[["render",ri]]),oi={},ii={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},li=E("path",{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7c0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4c47.6-20.3 78.3-66.8 78.3-118.4c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0 1 42.2-32.3c7.6 0 15.1 2.2 21.1 6.7c9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z",fill:"currentColor"},null,-1),ci=[li];function ui(e,n){return u(),y("svg",ii,ci)}const di=N(oi,[["render",ui]]),pi={key:0},fi={key:1},Me=P({__name:"PapawReactionItem",props:{reaction:{},events:{},active:{type:Boolean},size:{}},emits:["handelSwitchActive"],setup(e){return(n,a)=>{const r=G,s=wt;return u(),S(s,{round:"",checked:n.active,onUpdateChecked:a[0]||(a[0]=()=>n.$emit("handelSwitchActive",n.reaction)),checkable:""},{icon:w(()=>[n.reaction==="+"||n.reaction==="-"?(u(),S(r,{key:0,size:n.size,color:n.active?"#fffff":void 0},{default:w(()=>[n.reaction==="+"?(u(),y("div",pi,[n.active?(u(),S(si,{key:0})):(u(),S(di,{key:1}))])):n.reaction==="-"?(u(),y("div",fi,[n.active?(u(),S(Ko,{key:0})):(u(),S(Yo,{key:1}))])):U("",!0)]),_:1},8,["size","color"])):(u(),y("span",{key:1,style:ee({fontSize:`${n.size*.9}px`})},L(n.reaction),5))]),default:w(()=>[E("span",null,L(n.active?n.events.length+1:n.events.length),1)]),_:1},8,["checked"])}}}),vi=P({__name:"PapawReaction",props:{event:{},size:{}},setup(e){const n=e,a=le(An),r=we(n,"event"),s=Ln(),o=vt(),[i,l]=Ie(()=>a.getReactionByEvent(r.value,{})),d=C(()=>{var v;return((v=i.value)==null?void 0:v.getReactiveMap())??{}}),m=C(()=>Object.fromEntries(Object.entries(d.value).map(([v,_])=>[v,_.filter(p=>{var x;p.pubkey===((x=o.value)==null?void 0:x.toHex())&&(g.value[v]=!0,$.value[v]=p.id)})]))),g=M({}),$=M({}),f=C(()=>new Set(["+","-","👍","❓","🚀","👀","😁","😧","🤣",...Object.keys(d.value),...a.reactionsKeyList.getKeys()]));Be(()=>{}),f.value.forEach(v=>{g.value[v]=a.hasReactions(v,r.value.id)});function h(v){let _=g.value[v],p=$.value[v];_?typeof p=="string"?a.deleteReactions(v,{likeId:p,onOK:s,cue:{tags:r.value.tags,pubkeys:[r.value.pubkey]}}):a.deleteReactions(v,{eventId:r.value.id,onOK:s,cue:{tags:r.value.tags,pubkeys:[r.value.pubkey]}}):a.sendReactions(v,r.value,{onOK:s}),g.value[v]=!g.value[v]}const z=M(!1),R=C(()=>[...Object.entries(d.value).map(([v,_])=>[v,_]),...Object.entries(g.value).filter(([v,_])=>_&&!d.value[v]).map(([v,_])=>[v,[]])].sort(([v,_],[p,x])=>_.length-x.length).slice(0,2));return(v,_)=>{const p=G,x=ce,k=Oe;return u(),y("div",{ref_key:"target",ref:l},[b(k,{class:"flex items-center justify-center"},{default:w(()=>[(u(!0),y(Z,null,te(c(R),([T,W])=>(u(),S(Me,{onHandelSwitchActive:h,size:v.size,events:c(m)[T]??[],reaction:T,active:c(g)[T]},null,8,["size","events","reaction","active"]))),256)),b(x,{circle:"",quaternary:"",onClick:_[0]||(_[0]=()=>z.value=!c(z))},{default:w(()=>[b(p,{size:v.size},{default:w(()=>[b(Uo)]),_:1},8,["size"])]),_:1}),b(bt,{show:c(z),"onUpdate:show":_[1]||(_[1]=T=>ye(z)?z.value=T:null)},{default:w(()=>[b(k,{class:"h-full w-full flex items-center flex-wrap"},{default:w(()=>[(u(!0),y(Z,null,te(c(f),T=>(u(),S(Me,{onHandelSwitchActive:h,size:v.size,events:c(m)[T]??[],reaction:T,active:c(g)[T]},null,8,["size","events","reaction","active"]))),256))]),_:1})]),_:1},8,["show"])]),_:1})],512)}}}),hi={},_i={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},mi=E("path",{d:"M464 512a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm200 0a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm-400 0a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 0 0-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 0 0-142 96.5c-40.9 41.3-73 89.3-95.2 142.8c-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 0 0 112 714v152a46 46 0 0 0 46 46h152.1A449.4 449.4 0 0 0 510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 0 0 142.8-95.2c41.3-40.9 73.8-88.7 96.5-142c23.6-55.2 35.6-113.9 35.9-174.5c.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8c69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9c44.6 18.7 84.6 45.6 119 80c34.3 34.3 61.3 74.4 80 119c19.4 46.2 29.1 95.2 28.9 145.8c-.6 99.6-39.7 192.9-110.1 262.7z",fill:"currentColor"},null,-1),yi=[mi];function gi(e,n){return u(),y("svg",_i,yi)}const wi=N(hi,[["render",gi]]),bi={class:"ml-2"},ki={key:0},xi=20,Ei=P({__name:"PapawReplyButton",props:{event:{},size:{}},setup(e){const n=e,{event:a}=H(n),r=Ye();function s(){r(a.value)}C(()=>new Set);const[o,i]=Ie(()=>{}),l=C(()=>{var d;return((d=o.value)==null?void 0:d.getList().length)??0});return(d,m)=>{const g=G,$=ce;return u(),y("div",{ref_key:"target",ref:i},[b($,{text:"",onClick:s},{default:w(()=>[b(g,{size:d.size},{default:w(()=>[b(wi)]),_:1},8,["size"]),E("span",bi,[K(L(c(l))+" ",1),c(l)>=xi?(u(),y("span",ki,"+")):U("",!0)])]),_:1})],512)}}}),$i={},zi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ri=E("path",{d:"M11.61 29.92a1 1 0 0 1-.6-1.07L12.83 17H8a1 1 0 0 1-1-1.23l3-13A1 1 0 0 1 11 2h10a1 1 0 0 1 .78.37a1 1 0 0 1 .2.85L20.25 11H25a1 1 0 0 1 .9.56a1 1 0 0 1-.11 1l-13 17A1 1 0 0 1 12 30a1.09 1.09 0 0 1-.39-.08zM17.75 13l2-9H11.8L9.26 15h5.91l-1.59 10.28L23 13z",fill:"currentColor"},null,-1),Ci=[Ri];function Si(e,n){return u(),y("svg",zi,Ci)}const Pi=N($i,[["render",Si]]),[Wl,Mi]=re(()=>{const e=M(!1),n=M(null),a=M(null);return{show:e,pubkey:n,eventId:a,rewardByEvent(r){this.reward(r.pubkey,r.id)},reward(r,s){e.value=!0,n.value=r,a.value=s??null}}}),Ti=P({__name:"ZapsButton",props:{size:{},event:{}},setup(e){const n=e,a=Mi(),r=C(()=>n.event);async function s(){a==null||a.rewardByEvent(r.value)}return(o,i)=>{const l=G,d=ce;return u(),S(d,{text:"",onClick:i[0]||(i[0]=()=>s())},{default:w(()=>[b(l,{size:o.size},{default:w(()=>[b(Pi)]),_:1},8,["size"])]),_:1})}}}),Bi={class:"flex items-center justify-between"},Li=P({__name:"PapawOptionsButtons",props:{event:{},deleteEvent:{type:Function}},setup(e){const n=e,{event:a,deleteEvent:r}=H(n);d1();const s=M(18);return(o,i)=>{const l=Oe;return u(),y("div",Bi,[b(l,{class:"flex justify-around py-4 box-border"},{default:w(()=>[b(Ei,{size:c(s),event:c(a)},null,8,["size","event"]),b(Ti,{size:c(s),event:c(a)},null,8,["size","event"])]),_:1}),b(vi,{size:c(s),event:c(a)},null,8,["size","event"])])}}}),Ai=P({__name:"PapawSourceUrl",props:{event:{}},setup(e){we(e,"event");let a=le(In.Staff);const r=M(!1),s=ge();function o(){s.push({name:"relays"})}return(i,l)=>{const d=ce,m=E1;return u(),y(Z,null,[E("div",{class:"flex",onClick:l[0]||(l[0]=()=>r.value=!c(r))}),b(bt,{show:c(r),"onUpdate:show":l[1]||(l[1]=g=>ye(r)?r.value=g:null),height:"100%",closable:""},{header:w(()=>[b(m,{show:c(a).relayConfigurator.hasChange()},{default:w(()=>[b(d,{onClick:o,type:"primary"},{default:w(()=>[K(L(i.t("save")),1)]),_:1})]),_:1},8,["show"])]),default:w(()=>[b(p1)]),_:1},8,["show"])],64)}}}),Ii={},Di={class:"pl-1 box-border",style:{borderLeft:"2px solid red"}};function Ni(e,n){return u(),y("div",Di,[D(e.$slots,"default")])}const rn=N(Ii,[["render",Ni]]),[ql,Oi]=re(()=>{const e=M(!1),n=M(null);return{show:e,event:n,collect(a){e.value=!0,n.value=a},uncollect(a){}}}),Hi=E("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},[E("g",{fill:"none"},[E("path",{d:"M6.75 10a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0zm5 0a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0zM15 11.75a1.75 1.75 0 1 0 0-3.5a1.75 1.75 0 0 0 0 3.5z",fill:"currentColor"})])],-1),Ui=P({__name:"MoreIcon",setup(e){return(n,a)=>(u(),S(c(G),null,{default:w(()=>[Hi]),_:1}))}}),lt=Symbol();function Vi(e=Se()){return c(e)||(e=Se()),kn(lt,()=>{const n=new xn,s=En({emitRichTextEditBox:function(o,...i){n.emit(o,...i)},onRichTextEditBox:function(i,l){n.on(i,l)},id:e});return $n(lt,s),s},!0)}function Kl(e,n,a){const r=Ce();oe(e,"dragenter",o=>{o.stopPropagation(),o.preventDefault()}),oe(e,"dragover",o=>{o.stopPropagation(),o.preventDefault()}),oe(e,"dragleave",o=>{o.stopPropagation(),o.preventDefault()}),oe(e,"drop",o=>{var i;o.stopPropagation(),o.preventDefault(),o.dataTransfer&&s((i=o.dataTransfer)==null?void 0:i.files)});function s(o){if(o.length>1)return r.info("一次只允许上传一个文件");var i=o[0];n(i)}}function Zl(e,n){function a(r){var s=r.clipboardData&&r.clipboardData.items,o=null;if(s&&s.length){for(var i=0;i<s.length;i++)if(s[i].type.indexOf("image")!==-1){o=s[i].getAsFile();break}}o&&n(o)}oe(e,"paste",a)}const[Jl,ji]=re(()=>{const e=M([]);return{insertDropdownOptionOptList:e,insertDropdownOption(n){e.value.push(n)},runInsertDropdown(n,a){for(const r of e.value){a[r.key]=r.handle;const s=n.findIndex(i=>i.key===r.insertKey),o={label:r.label,key:r.key};s>=0?n.splice(s,0,o):n.push(o)}}}}),Fi=P({__name:"SMSButton",props:{event:{},deleteEvent:{},show:{type:Boolean}},setup(e){const n=Ce(),a=Vi(),r=e,{event:s,deleteEvent:o}=H(r),i=M(""),l=ge(),{info:d}=Ce(),m=_1(),g=Dn(r,"show"),$=ji(),f=Oi(),h=M({pin:()=>{n.info(t("request_initiated"))},close:()=>{g.value=!1},collect:()=>{f==null||f.collect(s.value)},editArticle:()=>{const p=Nn(s.value);if(!p){n.info("Identifier not found");return}l.push({name:"markdown-editor",params:{value:p}})},deleteEvent:()=>{o.value(s.value.id),d(t("you_have_sent_a_delete_request"))},joinTheBlacklist(){R({title:t("hide_list"),ignoreContent:s.value.content})},copyNevent(){},copyNote(){const p=ke.noteEncode(s.value.id);m(p)},copyNaddr(){},copyHexPubkey(){m(s.value.pubkey)},recommendUser(){},recommendEvent(){},recommendUserMetadata(){},muteUser(){},pushShortTextNote(){},reply(){a.emitRichTextEditBox("reply",s.value)},mention(){a.emitRichTextEditBox("mention",s.value)}}),z=p=>{const x=h.value[p];x||n.error("Not found"),x(s.value)},{addRule:R}=m1(),v=vt(),_=C(()=>{var x;const p=[{label:t("close"),value:"close",key:"close"},...s.value.pubkey===((x=v.value)==null?void 0:x.toHex())?[...s.value.kind===30023?[{label:t("edit"),value:"editArticle",key:"editArticle"}]:[],{label:t("delete_event"),value:"deleteEvent",key:"deleteEvent"}]:[{label:t("hide"),value:"joinTheBlacklist",key:"joinTheBlacklist"},{label:t("mute_user"),value:"muteUser",key:"muteUser"}],{label:t("collect"),value:"collect",key:"collect"},{label:t("open"),value:"pushShortTextNote",key:"pushShortTextNote"},{label:t("reply"),value:"reply",key:"reply"},{label:t("mention"),value:"mention",key:"mention"},{label:t("pin"),value:"pin",key:"pin"},{label:`${t("copy")} Nevent`,value:"copyNevent",key:"copyNevent"},{label:`${t("copy")} Note`,value:"copyNote",key:"copyNote"},...s.value.kind>=3e4&&s.value.kind<4e4?[{label:`${t("copy")} Naddr`,value:"copyNaddr",key:"copyNaddr"}]:[],{label:`${t("copy")} Hex pubkey`,value:"copyHexPubkey",key:"copyHexPubkey"},{label:t("recommend_user"),value:"recommendUser",key:"recommendUser"},{label:t("recommend_event"),value:"recommendEvent",key:"recommendEvent"},{label:t("recommend_metadata"),value:"recommendUserMetadata",key:"recommendUserMetadata"}];return $==null||$.runInsertDropdown(p,h.value),p});return(p,x)=>{const k=G,T=ce,W=y1;return u(),y("div",null,[b(W,{onSelect:z,value:c(i),"onUpdate:value":x[1]||(x[1]=A=>ye(i)?i.value=A:null),options:c(_),trigger:"manual",show:c(g)},{default:w(()=>[b(T,{quaternary:"",circle:"",onClick:x[0]||(x[0]=()=>g.value=!c(g))},{default:w(()=>[b(k,null,{default:w(()=>[b(Ui)]),_:1})]),_:1})]),_:1},8,["value","options","show"])])}}}),Wi="__color_map",qi={...Rn};zn(Wi,qi);function sn(e){const n=e.tags.filter(a=>(a[0]==="e"||a[0]==="p")&&a[2]).map(a=>a[2]);return Cn(On(e.tags),n)}const Ki=["src"],Zi={class:"flex-grow flex-shrink"},Ji={class:"ml-4"},Gi={class:"flex-grow-0 flex-shrink-0"},Xi=P({__name:"UserInfo",props:{pubkey:{},event:{}},setup(e){const n=e,{pubkey:a}=H(n);let r=le(Hn);const s=C(()=>n.event&&sn(n.event)),[o,i]=Ie(()=>r.getUserMetadataLineByPubkey(Un.fromHex(a.value))),l=C(()=>{var $;return($=o.value)==null?void 0:$.getMetadata()}),d=ge();function m($){d.push(`/profile/${ke.nprofileEncode({pubkey:$,relays:[...s.value??[]]})}`)}const g=C(()=>{if(!l.value)return a.value.slice(0,10);for(const $ of["name","display_name","displayName","username"]){const f=l.value[$];if((f==null?void 0:f.length)??0>0)return f}return a.value.slice(0,10)});return($,f)=>{var h;return u(),y("div",{class:"flex items-center cursor-pointer w-full",ref_key:"target",ref:i},[E("img",{class:"h-12 w-12 bg-white rounded-full flex-grow-0 flex-shrink-0",src:((h=c(l))==null?void 0:h.picture)??c(g1),onClick:f[0]||(f[0]=()=>m(c(a)))},null,8,Ki),E("div",Zi,[E("div",{class:"font-bold ml-4",onClick:f[1]||(f[1]=()=>m(c(a)))},[b(w1,null,{default:w(()=>[K(L(c(g)),1)]),_:1})]),E("div",Ji,[D($.$slots,"bottom",{userInfo:c(l)})])]),E("div",Gi,[D($.$slots,"right",{userInfo:c(l)})])],512)}}}),Qi=["id"],Yi={class:"mx-3 my-3"},el={class:"my-2"},tl=P({__name:"PapawWarp",props:{event:{},deleteEvent:{},withPapawOptionsButtons:{type:Boolean,default:!0},disabledReply:{type:Boolean}},emits:["update:showSMS"],setup(e,{emit:n}){var W;const a=Vn(Wn),r=e,[s,o]=Ae(void 0,{preloadDistance:0}),{event:i,deleteEvent:l}=H(r),d=M(!1),m=M(!1);function g(){m.value=!m.value,d.value=!0}const $=M(),f=Ye(),{isPress:h}=jn($,()=>{f(i.value)}),z=Fn(),R=async()=>{var de,et;const A=s.value;if(!A||!z)return;const V=A.getBoundingClientRect();o.value=!0,await s1(0),(et=z.scrollbarInst.value)==null||et.scrollBy({top:V.top-(((de=z.containerRef.value)==null?void 0:de.getBoundingClientRect().top)??0),behavior:"smooth"}),k()},v=(W=Lo())==null?void 0:W.jumpList;v==null||v.value.push(R);const _=Ao(),p=C(()=>{const A=_==null?void 0:_.focusEvent.value;return A?A.id===i.value.id:!1});Be(()=>{p.value&&R()}),q(o,()=>{if(o.value){if(!(v!=null&&v.value))return;o1(v.value,R)}});const x=M(!1);function k(){x.value=!0,setTimeout(()=>{x.value=!1},1e3)}function T(A){var V;(V=l==null?void 0:l.value)==null||V.call(l,A)}return(A,V)=>(u(),y("div",{class:"mt-4",ref_key:"target",ref:s},[b(Bo,{delay:c(a).lazyDelayForPapaw,disabled:!c(a).lazyDelayForPapaw,minHeight:200},{default:w(()=>[b(Mo,null,{default:w(({id:de})=>[Sn((u(),y("div",{class:Le(["w-max-full rounded-2xl bg-[#dfe4ea55] overflow-hidden relative transition",{twinkle:c(x),"bg-[#dfe4eabb]":c(h)}]),onMousedownPassive:V[0]||(V[0]=fe(()=>{},["stop"])),onTouchstartPassive:V[1]||(V[1]=fe(()=>{},["stop"])),onClickPassive:V[2]||(V[2]=fe(()=>{},["stop"]))},[E("div",{id:de,class:"relative overflow-hidden rounded-xl"},[D(A.$slots,"header"),E("div",Yi,[b(Xi,{pubkey:c(i).pubkey,created_at:c(i).created_at,event:c(i)},{bottom:w(()=>[b(gt,{secondTimestamp:c(i).created_at},null,8,["secondTimestamp"])]),right:w(()=>[b(Fi,{show:c(m),event:c(i),deleteEvent:T},null,8,["show","event"])]),_:1},8,["pubkey","created_at","event"]),E("div",{class:"my-4 font",ref_key:"contentRef",ref:$},[D(A.$slots,"default")],512),E("div",el,[A.withPapawOptionsButtons??!0?(u(),S(Li,{key:0,event:c(i)},null,8,["event"])):U("",!0),b(Ai,{event:c(i)},null,8,["event"])])])],8,Qi),b(rn,null,{default:w(()=>[D(A.$slots,"reply")]),_:3})],34)),[[c(Ro),[g,{modifiers:{stop:!0}}],void 0,{stop:!0}]])]),_:3})]),_:3},8,["delay","disabled"])],512))}}),nl={key:1},al=P({__name:"PapawById",props:{id:{},relays:{},pubkey:{},disabledReply:{type:Boolean}},setup(e){const n=e,a=le(qn),r=C(()=>a.getEventById(n.id,{urls:n.relays,pubkeys:n.pubkey?[n.pubkey]:void 0})),s=C(()=>r.value.feat.getLatestEvent()),o=Ye();return(i,l)=>c(s)?(u(),S(vl,{key:0,event:c(s),disabledReply:""},ut({_:2},[i.$slots.reply?{name:"reply",fn:w(()=>[D(i.$slots,"reply",{event:c(s)})]),key:"0"}:void 0]),1032,["event"])):(u(),y("div",nl,[b(c(b1),{description:i.t("not_found_post"),size:"huge",click:()=>c(o)(i.id)},null,8,["description","click"]),b(rn,null,{default:w(()=>[D(i.$slots,"reply",{event:c(s)})]),_:3})]))}}),rl=P({__name:"RelayContent",props:{event:{}},setup(e){const n=e,{event:a}=H(n),r=C(()=>a.value.tags.filter(o=>o[0]==="e"&&o[1]&&(o[3]==="reply"||!o[3])).map(o=>o[1])),s=C(()=>sn(a.value));return(o,i)=>{const l=Qn;return u(),y(Z,null,[c(r).length>0?(u(),S(l,{key:0,dashed:""})):U("",!0),(u(!0),y(Z,null,te(c(r),d=>(u(),S(al,{id:d,relays:c(s),disabledReply:""},null,8,["id","relays"]))),256))],64)}}}),sl={class:"flex flex-col"},ol={key:0},il={key:1,style:{"word-break":"break-all","text-overflow":"ellipsis","word-wrap":"break-word"}},ll=P({__name:"Markdown",props:{identifier:{},pubkey:{},relays:{},event:{}},setup(e){const n=e,a=we(n,"event"),r=C(()=>{if(n.pubkey&&n.identifier)return{identifier:n.identifier,pubkey:n.pubkey,relays:n.relays&&[...n.relays],kind:30023}}),{markdownData:s}=t1(r),o=n1(a);a1();const{showArticleDetails:i}=r1()??{},l=C(()=>s.value??o.value);function d(m){Pn.push({name:"tag",params:{value:m}})}return(m,g)=>{var z,R,v,_,p,x,k,T,W;const $=yt,f=wt,h=Oe;return u(),y("div",sl,[E("div",null,[(z=l.value)!=null&&z.image?(u(),S($,{key:0,class:"w-full rounded-md",imgProps:{style:{width:"100%"}},src:(R=l.value)==null?void 0:R.image},null,8,["src"])):U("",!0)]),E("div",null,[(v=l.value)!=null&&v.publishedAt?(u(),y("div",ol,[K(L(m.t("published_at"))+": ",1),b(gt,{secondTimestamp:(_=l.value)==null?void 0:_.publishedAt},null,8,["secondTimestamp"])])):U("",!0),(p=l.value)!=null&&p.title?(u(),y("h3",il,L((x=l.value)==null?void 0:x.title),1)):U("",!0),E("p",null,L(((k=l.value)==null?void 0:k.summary)??((W=(T=l.value)==null?void 0:T.content)==null?void 0:W.slice(0,100))),1)]),l.value&&c(i)?(u(),y("div",{key:0,onClick:g[0]||(g[0]=fe(()=>{},["stop"]))},[b(h,null,{default:w(()=>[(u(!0),y(Z,null,te(l.value.hashtags,A=>(u(),S(f,{type:"info",onClick:V=>d(A)},{default:w(()=>[K(L(A),1)]),_:2},1032,["onClick"]))),256))]),_:1})])):U("",!0)])}}}),cl={key:1},ul={key:2},dl={key:3},pl={key:4},fl=P({__name:"Papaw",props:{event:{},deleteEvent:{},withPapawOptionsButtons:{type:Boolean,default:!0},disabledReply:{type:Boolean}},setup(e){const n=e,{event:a,deleteEvent:r}=H(n);function s(d){var m;(m=r==null?void 0:r.value)==null||m.call(r,d)}const o=M(),i=C(()=>a.value.kind),l=C(()=>a.value.content);return(d,m)=>(u(),S(tl,Te({contentRef:c(o),onHandelDeleteEvent:s},d.$props,{withPapawOptionsButtons:d.withPapawOptionsButtons&&(c(i)===1||c(i)===42)}),{default:w(()=>[c(i)===1||c(i)===42?(u(),S(wo,{key:0,event:c(a),disabledReply:d.disabledReply},null,8,["event","disabledReply"])):c(i)===3?(u(),y("span",cl,L(d.t("the_user_has_followed_you")),1)):c(i)===7?(u(),y("span",ul,[b(Me,{events:[],size:20,reaction:c(l),active:!0},null,8,["reaction"]),d.disabledReply?U("",!0):(u(),S(rl,{key:0,event:c(a)},null,8,["event"]))])):c(i)===30023?(u(),y("span",dl,[b(ll,{event:c(a)},null,8,["event"])])):(u(),y("span",pl,L(c(a).content),1))]),reply:w(()=>[D(d.$slots,"reply",{},void 0,!0)]),_:3},16,["contentRef","withPapawOptionsButtons"]))}}),vl=N(fl,[["__scopeId","data-v-cbef5541"]]);export{Pi as C,rn as P,E1 as _,Ui as a,Vl as b,al as c,vl as d,Zl as e,Kl as f,wo as g,rl as h,Lo as i,jl as j,Ao as k,bt as l,ke as n,Fl as p,Vi as u};
