import{f as k}from"./utils-Bn9avYFz.js";import{f as y,c5 as C,c6 as b,o as m,m as f,w as g,B as P,z as h,A as p,r as N,q as d,U as x,y as B,S as M,h as u,ar as D,L as S,av as _}from"./index-Bp8Ru9nj.js";import{_ as T}from"./Checkbox-Bvv02CAZ.js";import{_ as A}from"./Space-D7Gj9TeE.js";import{u as v}from"./composables-Den7Xj81.js";import{_ as U}from"./Input-uRxkwxbK.js";import{N as w}from"./Icon-BUbDyWQc.js";const I={key:0},K=y({__name:"AbsentPrompt",props:C({message:{}},{absentPrompt:{type:Boolean},absentPromptModifiers:{}}),emits:["update:absentPrompt"],setup(n){let e=b(n,"absentPrompt");return(a,r)=>{const o=A;return m(),f(o,null,{default:g(()=>[a.message?(m(),P("span",I,h(a.message),1)):p("",!0),N(a.$slots,"default"),d(e)!==void 0?(m(),f(d(T),{key:1,checked:d(e),"onUpdate:checked":r[0]||(r[0]=s=>x(e)?e.value=s:e=s)},{default:g(()=>[B(" 七日内不再提示 ")]),_:1},8,["checked"])):p("",!0)]),_:3})}}});function $(){const n=M(),e=v();return function(r){let o="success";try{if(!r){n.error(t("empty_text"));return}k(r),o="success"}catch{o="error"}e[o]({title:t(o),content:()=>u(U,{value:r,type:"textarea"}),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:()=>{},onNegativeClick:()=>{}})}}const j=(n,e=null)=>()=>u(w,e,{default:()=>u(n)});function F(){const n=v();return e=>{let a=e.name||e.content||e.title;if(console.log("typeof name",a),typeof a!="string")return n.create(e);console.log(a);let r=D(a);console.log("rememberedKey",r);let o=e[r];if(o)return o();const s={useLocalStorage:!0,useMemoryCache:!0,duration:1e3*3600*24*7};console.log("1");let i=S(!1);console.log("2"),n.info({...e,title:e.title||(e.type?t(e.type):void 0),content:()=>u(K,{absentPrompt:i.value,"onUpdate:absentPrompt"(l){i.value=l}},{default:()=>typeof e.content=="function"?e.content():e.content}),...e.onPositiveClick?{onPositiveClick(...l){var c;i.value&&_(a,"onPositiveClick",s),(c=e.onPositiveClick)==null||c.call(e,...l)}}:{},...e.onNegativeClick?{onNegativeClick(...l){var c;i.value&&_(a,"onNegativeClick",s),(c=e.onNegativeClick)==null||c.call(e,...l)}}:{}})}}export{F as a,j as r,$ as u};
