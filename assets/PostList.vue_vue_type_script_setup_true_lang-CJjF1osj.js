import{_ as C}from"./PapawList.vue_vue_type_script_setup_true_lang-5Io2Qkv8.js";import{d as F,c as x}from"./Papaw-R9nRzszD.js";import{u as b,$ as g,a1 as B}from"./ProvideEventLine-XLCKst21.js";import{f as P,am as w,k as o,q as n,o as s,m as v,A as m,H as z,B as p,n as E,F as N,C as V}from"./index-Bp8Ru9nj.js";import{u as q}from"./Scrollbar-D8p4HDwI.js";import{_ as G}from"./Spin-C2RU7Xjq.js";import{_ as H}from"./Empty-oWNKc7k_.js";const O=P({__name:"PapawByAddr",props:{naddr:{},a:{}},setup(_){const h=_,{naddr:r,a:t}=w(h),i=b(g),l=o(()=>r!=null&&r.value?B(r.value):t!=null&&t.value?B(t.value):null),u=o(()=>l.value&&i.createGetEventLineByAddressPointer(l.value)),d=o(()=>u.value&&u.value.feat.getLatestEvent());return(f,k)=>n(d)?(s(),v(F,{key:0,event:n(d)},null,8,["event"])):m("",!0)}}),D={ref:"divRef"},I={key:0,class:"py-20 flex items-center justify-center"},J={key:1,class:"h-40 flex justify-center items-center"},Y=P({__name:"PostList",props:{urls:{},pubkeys:{},filter:{},filters:{},pushEvent:{},active:{type:Boolean,default:!0},disabledLoad:{type:Boolean},disabledEmpty:{type:Boolean},limit:{},reverseSort:{type:Boolean,default:!0},disabledReply:{type:Boolean},tags:{}},emits:["update:pushEvent"],setup(_,{emit:h}){logger.debug();const r=_,{pubkeys:t,filter:i,filters:l,urls:u,active:d,reverseSort:f}=w(r);let k=b(g);const L=o(()=>{const e=l!=null&&l.value?[...l.value]:[];return i!=null&&i.value&&e.push(i.value),t!=null&&t.value&&e.push({kinds:[30023,1],authors:t.value,limit:1}),e}),R=o(()=>[...(t==null?void 0:t.value)??[],...L.value.map(e=>e.authors??[]).flat(1)]),y=o(()=>{const e={};return k.commonEventList({filters:L.value,...e,urls:u==null?void 0:u.value,pubkeys:R.value,limit:r.limit,reverseSort:!0,sort:"created-at",cache:!0})});z([f],()=>{var e;(e=y.value)==null||e.setupSort({reverseSort:f.value,sort:"created-at"})},{immediate:!0}),q(y,d);const c=o(()=>{var e;return(e=y.value)==null?void 0:e.getList()}),S=o(()=>!1);return(e,$)=>{const A=G,j=H;return s(),p("div",D,[n(c)&&n(c).length===0?(s(),p("div",I,[E(A,{size:"medium"})])):!e.disabledEmpty&&!n(S)&&n(c)&&n(c).length===0?(s(),p("div",J,[E(j,{description:e.t("empty_text"),size:"huge"},null,8,["description"])])):m("",!0),e.tags?(s(!0),p(N,{key:2},V(e.tags,a=>(s(),p("div",null,[a[0]==="e"&&a[1]?(s(),v(x,{key:0,id:a[1],relays:a[2]?new Set([a[2]]):void 0},null,8,["id","relays"])):a[0]==="a"&&a[1]?(s(),v(O,{key:1,a:a[1]},null,8,["a"])):m("",!0)]))),256)):m("",!0),n(c)?(s(),v(C,{key:3,eventList:n(c),withPapawOptionsButtons:"",disabledReply:e.disabledReply},null,8,["eventList","disabledReply"])):m("",!0)],512)}}});export{Y as _};
