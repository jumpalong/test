import{_ as y}from"./ChannelMetadataEdit.vue_vue_type_script_setup_true_lang.b2df39dd.js";import{q as i,g as w}from"./use.1e6bcf04.js";import{f as M,an as B,k as o,N,af as S,o as O,l as k,w as l,m as p,v as x,x as L,n as b,D,C as F}from"./index.1b90d9b0.js";import{T as s}from"./nostr.754d0882.js";import{e as R}from"./nostr.5da3da54.js";import{_ as T}from"./Button.426eb201.js";import{_ as V}from"./Space.233e452c.js";import"./UploadInput.vue_vue_type_script_setup_true_lang.5249b8df.js";import"./UploadButton.vue_vue_type_script_setup_true_lang.446f5e11.js";import"./CloudUpload.1c386f41.js";import"./Upload.b824065e.js";import"./format-length.3612bbc8.js";import"./Icon.8b94fe05.js";import"./use-style.d41c90c3.js";import"./Warning.c5444fa8.js";import"./replaceable.3760d7d0.js";import"./create-key.7b548031.js";import"./use-css-vars-class.2322281d.js";import"./is-browser.21659b45.js";import"./RegExpUtils.5e225811.js";import"./utils.6eaabb91.js";import"./Scrollbar.d017889b.js";import"./use-rtl.e3f5641a.js";import"./cssr.ebdd28c2.js";import"./fade-in-scale-up.cssr.769ecc19.js";import"./use-locale.d88a40dd.js";import"./Loading.68c8fb32.js";import"./Follower.46005694.js";import"./Tooltip.e97f4bd5.js";import"./Popover.52f6051a.js";import"./Input.6cd78f60.js";import"./index.62f1e1b0.js";import"./Add.90e13d8d.js";import"./Icon.d35ca04d.js";import"./Upload.e47722e1.js";import"./fade-in-height-expand.cssr.b76b5d75.js";import"./Staff.e039c64f.js";import"./nostr.1ed837f5.js";import"./get-slot.4ceacf82.js";const Be=M({__name:"EditChannelView",setup(W){const u=B(),c=D(),_=o(()=>R(c.params.value)),a=o(()=>{var e;return(e=_.value)==null?void 0:e.id}),f=i(s.FollowChannelSynchronizer),n=i(s.RelayConfiguratorSynchronizer),v=i(s.CahnnelMessageBeltline),t=N({}),r=o(()=>{if(!!a.value)return v.getChannelMetadataBeltlineByChannelId(a.value)}),m=o(()=>{var e;return(e=r.value)==null?void 0:e.feat.useMetadata()});S(()=>m.value,()=>{Object.assign(t.value,m.value)},{deep:!0,immediate:!0});const d=w();function g(){if(!a.value)return;if(!t.value.name){u.warning("\u8BF7\u8F93\u5165channelName");return}if(!r.value)return;const e=[...n.getWriteList()][0];t.value.relayUrls=[...new Set([...n.getReadList(),...n.getWriteList()])],r.value.publish({kind:41,content:JSON.stringify(t.value),tags:[["e",a.value,e]]},n.getWriteList(),{onOK:d}),f.setChannelmetadata(a.value,t.value)}return(e,z)=>{const h=T,C=V;return O(),k(C,{vertical:""},{default:l(()=>[p(y,{channelMetadata:t.value},null,8,["channelMetadata"]),p(h,{onClick:g},{default:l(()=>[x(L(b(F)("save")),1)]),_:1})]),_:1})}}});export{Be as default};
