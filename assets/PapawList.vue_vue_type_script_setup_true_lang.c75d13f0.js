import{c as k,q as M,x as V}from"./use.b23b6c29.js";import{f as z,P as A,g as j,h as F}from"./Papaw.635c4eff.js";import{f as m,k as v,_ as R,o,z as i,F as y,A as O,n as l,m as w,w as f,v as D,x as S,y as E,l as _,C as G,aL as L,N as g,r as x,aJ as I,au as b,aD as q}from"./index.8f62a545.js";import{T as H}from"./nostr.c03670ae.js";import{_ as N}from"./Button.22997a19.js";import{N as J}from"./Icon.904bc99e.js";const[ve,W]=k(e=>({useTree:e})),U={key:0,class:"w-full flex justify-center items-center py-2"},Y=m({__name:"PapawTreeReply",props:{event:null,noTree:{type:Boolean}},setup(e){const a=e;window[Symbol.for("loggerFactory")].create("src/components/PapawTreeReply.vue").debug();const t=v(()=>a.event.id),n=5,u=M(H.GeneralEventEventBeltline),r=v(()=>u.createGeneralEventEventBeltline({limit:n,filters:[{"#e":[t.value],kinds:[1,30023]}]}).addStaffOfSortByCreateAt()),d=v(()=>r.value.getList()),p=z();R(()=>{p!=null&&p.parents.value.has(t.value)&&p.focusEvent.value&&r.value.pushEvent(p.focusEvent.value)});const B=v(()=>{var h;return(h=d.value.length)!=null?h:0});return(h,c)=>{const T=N;return o(),i(y,null,[(o(!0),i(y,null,O(l(d),P=>(o(),_($,{event:P},null,8,["event"]))),256)),l(B)>0?(o(),i("div",U,[w(T,{class:"w-full",text:"",onClick:c[0]||(c[0]=()=>l(r).feat.load())},{default:f(()=>[D(S(l(G)("load_more")),1)]),_:1})])):E("",!0)],64)}}}),[K,Q]=k(e=>({withEventSet:e})),X=m({__name:"PapawTreeWithEvent",props:{id:null},setup(e){const a=e,{id:s}=L(a),t=g(!1),n=Q();return n?t.value=!n.withEventSet.value.has(s.value):(K(g(new Set().add(s.value))),t.value=!0),t.value&&(n==null||n.withEventSet.value.add(s.value)),(u,r)=>(o(),i(y,null,[t.value?x(u.$slots,"default",{key:0}):E("",!0),x(u.$slots,"else")],64))}}),$=m({__name:"PapawTree",props:{event:null,deleteEvent:null,withPapawOptionsButtons:{type:Boolean,default:!0}},setup(e){var n;const a=e,{event:s}=L(a),t=g();return(n=t.value)==null||n.scrollToPapaw(),(u,r)=>(o(),_(X,{id:l(s).id},{default:f(()=>[w(A,{disabledReply:"",event:l(s),ref:t.value,"onUpdate:ref":r[0]||(r[0]=d=>t.value=d)},{reply:f(()=>[w(Y,{event:l(s)},null,8,["event"])]),_:1},8,["event"])]),_:1},8,["id"]))}}),Z=m({__name:"MayBeTreePapaw",props:{event:null,withPapawOptionsButtons:{type:Boolean},disabledReply:{type:Boolean}},setup(e){var s;const{useTree:a}=(s=W())!=null?s:{};return(t,n)=>l(a)?(o(),_($,{key:0,event:e.event,withPapawOptionsButtons:e.withPapawOptionsButtons},null,8,["event","withPapawOptionsButtons"])):(o(),_(A,{key:1,withPapawOptionsButtons:e.withPapawOptionsButtons,event:e.event,disabledReply:e.disabledReply},null,8,["withPapawOptionsButtons","event","disabledReply"]))}}),ee={},te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ne=b("g",{fill:"none"},[b("path",{d:"M9.516 6a.5.5 0 0 0 0 1h2.777l-4.147 4.146a.5.5 0 0 0 .708.708L13 7.707v2.777a.5.5 0 0 0 1 0V6.5a.5.5 0 0 0-.5-.5H9.516zm3.25 11a2.5 2.5 0 0 0 2.47-2.11A2.501 2.501 0 0 0 17 12.5v-7A2.5 2.5 0 0 0 14.5 3h-7a2.501 2.501 0 0 0-2.4 1.797A2.5 2.5 0 0 0 3 7.266V13.5A3.5 3.5 0 0 0 6.5 17h6.266zM4 7.266A1.5 1.5 0 0 1 5 5.85V12.5A2.5 2.5 0 0 0 7.5 15h6.68a1.5 1.5 0 0 1-1.414 1H6.5A2.5 2.5 0 0 1 4 13.5V7.266zM7.5 4h7A1.5 1.5 0 0 1 16 5.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 6 12.5v-7A1.5 1.5 0 0 1 7.5 4z",fill:"currentColor"})],-1),ae=[ne];function se(e,a){return o(),i("svg",te,ae)}const oe=I(ee,[["render",se]]),le=m({__name:"NewMessage",setup(e){let a=j();const s=a!=null?a:F({jumpList:g([])}),t=v(()=>s.jumpList.value);function n(){const c=t.value.shift();!c||c()}const u=v(()=>t.value.length>0),{show:r,hidden:d,transitionActive:p,safeActive:B,duration:h}=V(600);return R(()=>{u.value?r():d()}),(c,T)=>{const P=J,C=N;return o(),i(y,null,[x(c.$slots,"default"),l(B)&&!l(a)?(o(),_(C,{key:0,class:"fixed bottom-3 right-4 px-2",style:q({transform:l(p)?"translate(0%,0%)":"translate(150%,0%)",transition:`transform ${l(h)}ms ease`}),quaternary:"",type:"primary",size:"large",round:"",onClick:n},{default:f(()=>[b("span",null,S(l(t).length),1),w(P,{size:30},{default:f(()=>[w(oe)]),_:1})]),_:1},8,["style"])):E("",!0)],64)}}}),we=m({__name:"PapawList",props:{eventList:null,withPapawOptionsButtons:{type:Boolean},disabledReply:{type:Boolean}},emits:["eventDeletion"],setup(e,{emit:a}){return(s,t)=>(o(),_(le,null,{default:f(()=>[(o(!0),i(y,null,O(e.eventList,n=>(o(),i("div",{key:n.id},[w(Z,{event:n,withPapawOptionsButtons:e.withPapawOptionsButtons,disabledReply:e.disabledReply},null,8,["event","withPapawOptionsButtons","disabledReply"])]))),128))]),_:1}))}});export{we as _,$ as a,Y as b};
