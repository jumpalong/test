import{_ as q}from"./PapawList.vue_vue_type_script_setup_true_lang.b771e1a5.js";import{f as C,aL as O,k as i,n,o as a,l as B,y,an as z,ag as D,N as L,z as f,m as w,F as j,A as I,aq as T,C as U}from"./index.1b90d9b0.js";import{T as k}from"./nostr.754d0882.js";import{q as b,s as V}from"./use.1e6bcf04.js";import{b as x}from"./nostr.5da3da54.js";import{P as M,e as Y}from"./Papaw.58818fc9.js";import{u as H}from"./Scrollbar.2eeae0bc.js";import{_ as J}from"./RelayInfoView.f4d9e053.js";import{_ as K}from"./Empty.36cca092.js";const Q=C({__name:"PapawByAddr",props:{naddr:null,a:null},setup(o){const h=o,{naddr:v,a:r}=O(h),_=b(k.EventApi),s=i(()=>v!=null&&v.value?x(v.value):r!=null&&r.value?x(r.value):null),u=i(()=>s.value&&_.createGetEventLineByAddressPointer(s.value)),d=i(()=>u.value&&u.value.feat.getLatestEvent());return(E,m)=>n(d)?(a(),B(M,{key:0,event:n(d)},null,8,["event"])):y("",!0)}}),W={key:0,class:"py-20 flex items-center justify-center"},X={key:1,class:"h-40 flex justify-center items-center"},ie=C({__name:"PostList",props:{urls:null,pubkeys:null,filter:null,filters:null,pushEvent:null,active:{type:Boolean,default:!0},disabledLoad:{type:Boolean},disabledEmpty:{type:Boolean},limit:null,reverseSort:{type:Boolean},disabledReply:{type:Boolean},tags:null},emits:["update:pushEvent"],setup(o,{expose:h,emit:v}){const r=o,_=window[Symbol.for("loggerFactory")].create("src/components/PostList.vue");_.debug();const{pubkeys:s,filter:u,filters:d,urls:E,active:m}=O(r);z();const F=b(k.EventApi),P=i(()=>{const e=d!=null&&d.value?[...d.value]:[];return u!=null&&u.value&&e.push(u.value),s!=null&&s.value&&e.push(...s.value.map(t=>({kinds:[30023,1],authors:[t]}))),e}),A=b(k.GeneralEventEventBeltline);_.silly("generalEventEventBeltline",A);const G=i(()=>{var e;return[...(e=s==null?void 0:s.value)!=null?e:[],...P.value.map(t=>{var g;return(g=t.authors)!=null?g:[]}).flat(1)]}),p=i(()=>{const e={},t=A.createGeneralEventEventBeltline({filters:P.value,...e,addUrls:E==null?void 0:E.value,pubkeys:G.value,limit:r.limit});return r.reverseSort&&t.addStaffOfSortByCreateAt(),t}),N=H(p,m);D(()=>{var e;(e=p.value)==null||e.closeReq()});const c=i(()=>{var e;return(e=p.value)==null?void 0:e.getList()});v("update:pushEvent",e=>{var t;(t=p.value)==null||t.pushEvent(e)});const R=i(()=>{var e,t;return((e=p.value)==null?void 0:e.feat.loadBufferOpt.isLoading)||((t=p.value)==null?void 0:t.feat.refreshBufferOpt.isLoading)});h({postEvents:c,...N});const S=L(void 0);return V(S,{active:m!=null?m:L(!0)}),L(T()),(e,t)=>{const g=J,$=K;return a(),f("div",{ref_key:"divRef",ref:S},[!o.disabledLoad&&n(R)&&n(c)&&n(c).length===0?(a(),f("div",W,[w(g,{size:"medium"})])):!o.disabledEmpty&&!n(R)&&n(c)&&n(c).length===0?(a(),f("div",X,[w($,{description:n(U)("empty_text"),size:"huge"},null,8,["description"])])):y("",!0),o.tags?(a(!0),f(j,{key:2},I(o.tags,l=>(a(),f("div",null,[l[0]==="e"&&l[1]?(a(),B(Y,{key:0,id:l[1],relays:l[2]?new Set([l[2]]):void 0},null,8,["id","relays"])):l[0]==="a"&&l[1]?(a(),B(Q,{key:1,a:l[1]},null,8,["a"])):y("",!0)]))),256)):y("",!0),n(c)?(a(),B(q,{key:3,eventList:n(c),withPapawOptionsButtons:"",disabledReply:o.disabledReply,onEventDeletion:t[0]||(t[0]=l=>n(F).eventDeletionOne(l))},null,8,["eventList","disabledReply"])):y("",!0)],512)}}});export{ie as _};
