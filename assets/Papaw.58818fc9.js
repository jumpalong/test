import{c as _t,f as A,u as ht,g as me,bU as Zt,k as z,h as ne,aG as Te,e as ke,d as te,a as Q,bV as Xt,F as Y,an as se,N as O,aL as U,ak as De,B as mt,n as i,o as u,l as C,w as $,v as X,x as D,y as I,aJ as H,z as g,au as E,_ as yt,af as L,aC as Le,bK as Jt,bL as Qt,m as k,aD as oe,D as en,E as Ie,r as q,bA as tn,C as M,ao as ze,a8 as wt,bW as nn,a9 as gt,A as le,bX as Ke,M as ye,bD as _e,bn as bt,bY as on,bZ as sn,aq as ln,a4 as rn,P as xt,aF as fe,b_ as an,bB as cn,at as un,ac as dn,aa as fn,aj as pn,bk as kt,j as vn,a6 as _n,p as hn,bl as mn,am as de,bd as yn,a7 as wn,b$ as gn}from"./index.1b90d9b0.js";import{R as we,c as ge,n as $t,q as ce,w as Et,x as zt,y as He,i as bn,j as ae,z as xn,k as kn,l as $n,g as Ve,A as je,h as St,B as En,C as zn,D as Sn,b as Cn}from"./use.1e6bcf04.js";import{c as Pn}from"./Staff.e039c64f.js";import{_ as Ct,a as Rn,b as On,c as Bn}from"./RegExpUtils.5e225811.js";import{n as he}from"./nostr.1ed837f5.js";import{a as Mn,r as Pt,T as j,c as qe}from"./nostr.754d0882.js";import{g as ue}from"./createEventSourceTracers.70279edb.js";import{e as Rt,n as Ot}from"./nostr.5da3da54.js";import{_ as Ne}from"./Card.0e05d980.js";import{N as ee}from"./Icon.d35ca04d.js";import{_ as An}from"./Tooltip.e97f4bd5.js";import{_ as Tn,a as Ge}from"./NaddrLink.vue_vue_type_script_setup_true_lang.ac9bb804.js";import{_ as Dn}from"./Empty.36cca092.js";import{u as Bt}from"./use-css-vars-class.2322281d.js";import{_ as Ln}from"./UserLink.vue_vue_type_script_setup_true_lang.f1185f1f.js";import{_ as Mt,a as In}from"./RelayAddButton.vue_vue_type_script_setup_true_lang.309f50bc.js";import{u as Hn,a as Vn,b as jn}from"./Markdown.65b67b2d.js";import{M as Nn}from"./MavonEditor.0c88b495.js";import{_ as At}from"./Tag.6048a194.js";import{_ as Ue}from"./Space.233e452c.js";import{_ as Tt,a as Un}from"./DrawerProvide.vue_vue_type_script_setup_true_lang.c46f8d3c.js";import{_ as Fn}from"./RelayInfoView.f4d9e053.js";import{N as Wn,_ as ve}from"./Button.426eb201.js";import{u as Kn}from"./use-theme-vars.726be0e1.js";import{a as qn}from"./RelayConnectList.vue_vue_type_script_setup_true_lang.fc5e4822.js";import{S as Gn}from"./Scrollbar.2eeae0bc.js";import{u as Yn}from"./use-rtl.e3f5641a.js";import{f as Zn}from"./fade-in-height-expand.cssr.b76b5d75.js";import{u as Xn}from"./naiveUi.c6ae432d.js";import{a as Jn}from"./nostrApiUse.7176aa1b.js";import{u as Qn}from"./ContentBlacklistView.6132c1d6.js";import{_ as e1}from"./Dropdown.03a74dd4.js";import{p as t1}from"./profile-2-400x400.3309f571.js";import{E as n1}from"./Ellipsis.d8aa1f93.js";const o1=_t("collapse-transition",{width:"100%"},[Zn()]),s1=Object.assign(Object.assign({},me.props),{show:{type:Boolean,default:!0},appear:Boolean,collapsed:{type:Boolean,default:void 0}}),l1=A({name:"CollapseTransition",props:s1,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:o}=ht(e),r=me("CollapseTransition","-collapse-transition",o1,Zt,e,t),l=Yn("CollapseTransition",o,t),s=z(()=>e.collapsed!==void 0?e.collapsed:e.show),a=z(()=>{const{self:{bezier:v}}=r.value;return{"--n-bezier":v}}),c=n?Bt("collapse-transition",void 0,a,e):void 0;return{rtlEnabled:l,mergedShow:s,mergedClsPrefix:t,cssVars:n?void 0:a,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender}},render(){return ne(Wn,{appear:this.appear},{default:()=>{var e;if(!!this.mergedShow)return(e=this.onRender)===null||e===void 0||e.call(this),ne("div",Te({class:[`${this.mergedClsPrefix}-collapse-transition`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse-transition--rtl`,this.themeClass],style:this.cssVars},this.$attrs),this.$slots)}})}}),r1=_t("divider",`
 position: relative;
 display: flex;
 width: 100%;
 box-sizing: border-box;
 font-size: 16px;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
`,[ke("vertical",`
 margin-top: 24px;
 margin-bottom: 24px;
 `,[ke("no-title",`
 display: flex;
 align-items: center;
 `)]),te("title",`
 display: flex;
 align-items: center;
 margin-left: 12px;
 margin-right: 12px;
 white-space: nowrap;
 font-weight: var(--n-font-weight);
 `),Q("title-position-left",[te("line",[Q("left",{width:"28px"})])]),Q("title-position-right",[te("line",[Q("right",{width:"28px"})])]),Q("dashed",[te("line",`
 background-color: #0000;
 height: 0px;
 width: 100%;
 border-style: dashed;
 border-width: 1px 0 0;
 `)]),Q("vertical",`
 display: inline-block;
 height: 1em;
 margin: 0 8px;
 vertical-align: middle;
 width: 1px;
 `),te("line",`
 border: none;
 transition: background-color .3s var(--n-bezier), border-color .3s var(--n-bezier);
 height: 1px;
 width: 100%;
 margin: 0;
 `),ke("dashed",[te("line",{backgroundColor:"var(--n-color)"})]),Q("dashed",[te("line",{borderColor:"var(--n-color)"})]),Q("vertical",{backgroundColor:"var(--n-color)"})]),a1=Object.assign(Object.assign({},me.props),{titlePlacement:{type:String,default:"center"},dashed:Boolean,vertical:Boolean}),i1=A({name:"Divider",props:a1,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=ht(e),o=me("Divider","-divider",r1,Xt,e,t),r=z(()=>{const{common:{cubicBezierEaseInOut:s},self:{color:a,textColor:c,fontWeight:v}}=o.value;return{"--n-bezier":s,"--n-color":a,"--n-text-color":c,"--n-font-weight":v}}),l=n?Bt("divider",void 0,r,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:r,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){var e;const{$slots:t,titlePlacement:n,vertical:o,dashed:r,cssVars:l,mergedClsPrefix:s}=this;return(e=this.onRender)===null||e===void 0||e.call(this),ne("div",{role:"separator",class:[`${s}-divider`,this.themeClass,{[`${s}-divider--vertical`]:o,[`${s}-divider--no-title`]:!t.default,[`${s}-divider--dashed`]:r,[`${s}-divider--title-position-${n}`]:t.default&&n}],style:l},o?null:ne("div",{class:`${s}-divider__line ${s}-divider__line--left`}),!o&&t.default?ne(Y,null,ne("div",{class:`${s}-divider__title`},this.$slots),ne("div",{class:`${s}-divider__line ${s}-divider__line--right`})):null)}});function Fe(){const{error:e,success:t,info:n}=se();return function(r){Mn.publish(r,Pt.getWriteList(),{onOK({url:l,ok:s}){s?t(`\u5DF2\u6210\u529F\u63A8\u9001\u5230${l}`):e(`\u63A8\u9001\u5230'${l}'\u5931\u8D25`)}}),n("\u5DF2\u7ECF\u53D1\u9001\u63A8\u8350\u7528\u6237\u8BF7\u6C42")}}function c1(){const{error:e,success:t,info:n}=se(),o=Fe();return function(l){const s=we.kind10002.get(l);s?o(s):e("\u76EE\u524D\u8FD8\u6CA1\u6709\u6B64\u7528\u6237\u7684\u4FE1\u606F")}}function u1(){const{error:e,success:t,info:n}=se(),o=Fe();return function(l){const s=we.kind0.get(l);s?o(s):e("\u76EE\u524D\u8FD8\u6CA1\u6709\u6B64\u7528\u6237\u7684\u5143\u6570\u636E")}}const[hr,d1]=ge(()=>{const e=O(!1),t=O(null);return{show:e,event:t,collect(n){e.value=!0,t.value=n},uncollect(n){}}});function mr(){return Pn({feat:{useMetadata(){const e=this.beltline.feat.getLatestEvent();return e?Se(e):{}},onHasMetadata(e){this.beltline.feat.onHasLatestEvent((t,n)=>{e(Se(t),n)})}}})}function Se(e){let t={};try{const n=$t(e.tags);t.relayUrls=[...n],e&&(t=JSON.parse(e.content))}catch{}return t}const f1=A({__name:"ContentReplyItem",props:{value:null,tag:null,event:null},setup(e){const t=e,{value:n,tag:o,event:r}=U(t),l=ce(j.EventApi),s=z(()=>{const f=new Set;if(o!=null&&o.value){const d=o.value[2];d&&f.add(d)}const y=ue(r.value.id);return De(f,y),f}),a=z(()=>{var f;return o!=null&&o.value?(f=o.value[3])!=null?f:"reply":"mention"}),c=z(()=>Rt(n.value)),v=z(()=>{if(!!c.value&&!(a.value!=="reply"&&a.value!=="mention"))return l.getEventLineById(c.value.id,{urls:s.value})}),p=z(()=>{var f;return(f=v.value)==null?void 0:f.feat.useEvent()});return(f,y)=>{const d=mt("router-link");return i(p)?(u(),C(Wt,{key:0,class:"w-full",disabledReply:"",event:i(p),deleteEvent:()=>{}},null,8,["event","deleteEvent"])):i(a)==="mention"||i(a)==="reply"?(u(),C(d,{key:1,to:{name:"short-text-note",params:{value:i(n)}}},{default:$(()=>[X(" &"+D(i(n)),1)]),_:1},8,["to"])):I("",!0)}}}),p1={},v1={t:"1626764977164",viewBox:"0 0 2240 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4404","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"140",height:"64",class:"mini-header__logo"},_1=E("path",{d:"M2079.810048 913.566175c-10.01309 0-18.554608 0.799768-26.936172-0.159954-16.987063-1.951433-33.974126-1.567544-50.99318-2.079395-10.972811-0.287916-10.652904-0.287916-11.580634-10.90883-2.71921-32.406582-5.694345-64.781173-8.605499-97.155764-2.527266-28.439735-4.926568-56.91146-7.70976-85.319204-2.527266-26.040432-5.566382-52.016883-8.317583-78.025324-2.623238-24.440897-5.054531-48.913784-7.77374-73.322691a12681.114551 12681.114551 0 0 0-10.684895-92.133223c-3.295042-27.128116-6.558094-54.320213-10.205034-81.416339a20559.272961 20559.272961 0 0 0-17.530905-125.979387c-6.398141-44.723002-14.075909-89.22207-22.105576-133.657156-1.439582-7.965685-1.247637-8.253601 6.36615-9.533229 31.670796-5.406429 63.501545-10.01309 95.716183-9.309295 3.486987 0.095972 7.005964 0.159954 10.460959 0.607823 5.662354 0.703795 8.605499 3.454996 8.925406 10.045081 1.119675 22.969325 2.71921 45.938649 4.414717 68.875983 2.71921 37.589076 5.662354 75.178151 8.477537 112.735236 1.791479 24.184971 3.327033 48.305961 5.150503 72.426951 2.911154 38.772732 5.982261 77.513473 8.925406 116.286205 1.791479 23.705111 3.359024 47.474203 5.182494 71.179313 2.783191 34.805885 5.822308 69.579778 8.637489 104.353672 1.791479 22.137566 3.391014 44.307123 5.278466 66.44469 2.783191 32.79047 5.790317 65.580941 8.63749 98.371411 2.143377 25.592562 4.09481 51.249106 6.270178 77.673426zM853.670395 114.918282c4.638652 0 11.644616-0.511851 18.554607 0.127963 8.797443 0.799768 10.49295 3.071107 11.036793 11.900541 2.527266 40.372267 4.894578 80.776524 7.581796 121.180782 2.943145 43.571337 6.174206 87.078693 9.405267 130.586048 2.975135 39.956388 5.950271 79.912775 9.149341 119.869163 3.486987 43.891244 7.357862 87.718507 10.876839 131.609751 2.655228 33.622229 4.926568 67.244457 7.677768 100.898677 2.623238 31.222926 5.694345 62.38187 8.509527 93.572805 2.399303 26.8402 4.830596 53.71239 7.165918 80.58458 0.735786 8.509527 0.127963 9.053369-9.053369 8.829434-24.025018-0.575833-47.922073-3.391014-71.947091-2.71921-5.502401 0.159954-7.101936-2.367312-8.029666-7.581796-1.983424-11.356699-1.663517-22.905343-2.879163-34.390006-3.295042-30.359177-5.182494-60.846317-7.965685-91.269474-2.495275-27.639967-5.502401-55.215953-8.349574-82.82393-2.527266-25.240664-5.02254-50.481329-7.709759-75.753984-2.687219-24.792795-5.534392-49.61758-8.349573-74.442365-2.591247-22.841362-5.118512-45.682723-7.869713-68.524085-4.062819-33.462275-8.093648-66.92455-12.508365-100.322844-4.062819-30.647093-8.66948-61.198214-12.988225-91.813317-5.886289-41.587914-12.508365-83.079855-19.834236-124.411842a1393.96288 1393.96288 0 0 0-5.310457-28.023856c-0.959721-4.702633-0.095972-7.421843 5.278466-8.157629 14.139891-1.887451 28.24779-4.830596 42.451663-6.206196 14.203872-1.311619 28.407744-3.966847 45.106891-2.71921z m1006.075609 403.33878c27.064134 0 27.703949 0.191944 32.054684 24.536869 5.342447 30.03927 9.08536 60.334465 12.636328 90.62966 3.742912 32.278619 7.517815 64.557238 10.972811 96.867848 2.783191 26.008441 5.118512 52.080864 7.74175 78.089305 2.7512 27.256079 5.662354 54.416185 8.509527 81.640274 1.567544 15.387528 3.039117 30.775056 4.798605 46.130593 0.511851 4.446708-0.831758 6.81402-5.214485 7.325871-9.245313 1.055693-18.426645 2.27134-27.639967 3.263052-16.891091 1.82347-33.814173 3.614949-50.737254 5.182493-8.733462 0.799768-9.309294 0.319907-10.940821-8.125638-14.843686-76.617733-29.719363-153.171485-44.435086-229.821208-9.789155-50.961189-19.322384-101.95437-28.919595-152.915559a805.525894 805.525894 0 0 1-3.582959-21.081873c-0.639814-4.030829 0.44787-6.622075 5.022541-7.70976 30.48714-7.133927 61.294186-12.636328 89.733921-14.011927z m-1137.077537 0c28.951586 0 28.823623 0.095972 33.302322 26.360339 6.909992 40.660183 11.804569 81.544301 16.187295 122.556382 4.286754 39.796434 8.957397 79.560878 13.148179 119.357311 2.847173 27.224088 5.086522 54.512157 7.74175 81.704255 1.887451 19.354375 4.126801 38.644769 6.174206 57.967153 0.255926 2.367312 0.383888 4.734624 0.543842 7.133927 0.415879 9.469248 0 10.237025-9.117351 11.164755-18.074747 1.887451-36.181485 3.454996-54.256232 5.246476-6.558094 0.639814-13.084197 1.599535-19.57831 2.239349-8.63749 0.799768-8.925406 0.767777-10.620913-7.965685-6.078234-30.679084-11.964523-61.422149-17.914793-92.101233-14.267853-73.898523-28.69566-147.733065-42.867542-221.631589-5.662354-29.559409-10.524941-59.246781-16.091323-88.838181-1.023702-5.406429-0.255926-7.933694 5.342447-9.245313 30.199223-7.037955 60.590391-12.540355 88.006423-13.947946z m382.128944 309.861946v124.027954c0 1.183656-0.127963 2.399303 0.03199 3.582959 0.607823 6.014252-1.599535 8.66948-7.805731 8.413555-8.157629-0.351898-16.251277-0.127963-24.408906 0.063981-17.019054 0.319907-34.070098-0.351898-51.057162 1.599535-9.405267 1.087684-9.213322 0.511851-10.141052-9.405266-2.783191-31.222926-5.822308-62.413861-8.669481-93.636787-2.623238-28.823623-4.99055-57.711228-7.677768-86.534851-2.71921-29.655381-5.758326-59.214791-8.509527-88.838181-1.887451-19.770254-3.550968-39.508518-5.214485-59.278772-2.175368-25.720525-4.190782-51.409059-6.462122-77.129585-0.959721-10.844848-0.159954-12.380402 10.588923-13.500076a531.877423 531.877423 0 0 1 83.527724-2.591247c6.941982 0.383888 13.851974 1.727498 20.570022 3.359024 8.477536 2.015414 9.405267 3.263052 9.853137 12.124476 0.92773 17.850812 1.855461 35.701624 2.335321 53.584427 0.543842 19.866226 0.095972 39.764443 0.831758 59.63067 1.855461 54.800074 1.567544 109.664129 2.207359 164.528184z m1134.806197 5.630364v117.437869c0 1.983424-0.063981 3.966847 0.03199 5.982262 0.415879 5.150503-1.983424 6.973973-6.878001 6.941982-12.028504-0.095972-24.025018 0-36.021531 0.159954-13.564058 0.127963-27.096125 0.063981-40.628192 1.535553-8.925406 1.023702-8.989387 0.351898-9.789155-8.509527-3.678931-40.660183-7.549806-81.320366-11.260728-122.04453-3.391014-37.525094-6.526103-75.082179-9.981099-112.639265-3.550968-38.740741-7.421843-77.38551-10.90883-116.09426-1.727498-19.386366-3.16708-38.772732-4.606661-58.159097-0.575833-8.445546 0.351898-9.949109 9.885127-10.716886 16.571184-1.311619 33.078387-3.550968 49.777534-3.263051 16.635165 0.319907 33.302322-0.607823 49.841515 2.559256 14.011928 2.687219 14.715723 3.486987 15.547481 18.458635 2.399303 44.051198 1.663517 88.230358 3.231061 132.281556 1.599535 46.89837 0.479861 93.79674 1.759489 146.069549zM1831.498213 305.135c9.789155 0.575833 17.498914 0.095972 25.176683 1.791479 4.894578 1.119675 7.357862 3.327033 7.837723 8.573509 2.303331 25.240664 4.798605 50.51332 7.32587 75.785975 2.015414 20.50604 4.158791 41.012081 6.238188 61.518121l0.191944 1.183656c1.663517 12.924244 1.279628 13.276142-11.292718 13.979937-11.196746 0.607823-22.361501 1.599535-33.558247 2.27134-7.357862 0.44787-9.693183 1.695507-10.90883-9.021378-4.190782-37.813011-9.053369-75.530049-13.692021-113.311069a1185.0316 1185.0316 0 0 0-4.286754-31.798759c-0.92773-5.982261 1.407591-9.277304 7.005964-9.757164 7.357862-0.671805 14.715723-0.863749 19.962198-1.215647z m-1133.398606 0.159954c7.549806 0.415879 15.323547-0.159954 22.937334 1.599535 4.350736 0.991712 6.558094 2.815182 6.973973 7.773741 0.92773 11.83656 2.7512 23.641129 3.870875 35.477689 3.550968 36.309448 6.909992 72.650886 10.237025 108.992324 0.703795 7.901704 0.543842 8.061657-6.84601 8.605499-13.116188 0.959721-26.264367 1.919442-39.412546 2.463284-7.645778 0.351898-8.605499-0.575833-9.56522-8.381564-3.327033-26.744227-6.462122-53.520446-9.661192-80.296664-2.591247-22.073585-4.766615-44.14717-7.901704-66.156773-0.863749-6.078234 1.119675-7.74175 5.982262-8.733462 7.709759-1.567544 15.451509-1.055693 23.385203-1.343609z m399.147998 100.002936c0 23.001315 0.063981 45.97064-0.031991 69.003946 0 10.332997-0.127963 10.396978-10.396978 10.269016a324.289753 324.289753 0 0 1-36.981252-1.919443c-7.933694-0.991712-8.093648-0.735786-8.317583-9.149341-0.799768-28.119828-1.631526-56.239655-2.207359-84.359483-0.415879-19.034468-0.639814-38.004955-1.791479-57.039422-0.607823-9.821146-0.063981-9.917118 9.373276-10.045081 13.915956-0.159954 27.799921 0.479861 41.619904 2.591247 8.317583 1.279628 8.701471 1.279628 8.733462 10.49295 0.063981 23.385204 0.063981 46.770407 0.063981 70.187602h-0.063981z m1135.38203 0.607824c0 23.033306 0.063981 46.034621-0.031991 69.035936 0 9.661192-0.159954 9.725174-9.853137 9.661192a505.32514 505.32514 0 0 1-38.132917-1.791479c-6.302168-0.479861-8.157629-3.135089-7.74175-8.861425 0.063981-0.799768 0-1.599535 0-2.399302-0.959721-44.403095-1.919442-88.7742-2.815182-133.177296-0.031991-2.367312-0.159954-4.734624-0.063982-7.133926 0.127963-8.957397 0.159954-9.181332 9.149341-9.117351 12.380402 0.063981 24.664832 0.703795 37.013243 1.919442 15.067621 1.503563 12.412393 3.359024 12.476375 15.259566 0.063981 22.169557 0.031991 44.403095 0 66.604643z m-1565.593 54.000306c0.287916 12.636328 0.287916 12.604337-11.804569 15.547481-8.221611 2.015414-16.443221 4.222773-24.728813 6.046243-7.069945 1.599535-8.317583 0.703795-9.53323-6.238187-8.445546-47.090314-16.8591-94.212619-25.240664-141.334924-1.695507-9.757164-1.247637-10.364988 8.349573-12.060495 11.804569-2.079396 23.577148-4.126801 35.381717-5.950271 7.517815-1.183656 8.477536-0.767777 9.9811 7.517815 2.975135 16.731138 5.790317 33.526256 7.997675 50.385357 3.423005 26.680246 6.238187 53.456464 9.309295 80.168701 0.255926 1.951433 0.191944 3.966847 0.287916 5.91828z m1064.138735-136.696273c15.451509-2.527266 31.030982-5.086522 46.610454-7.549806 5.598373-0.863749 7.29388 2.655228 8.029666 7.645778 2.655228 18.426645 5.982261 36.725327 8.157629 55.183962 3.19907 26.744227 7.581797 53.360492 8.413555 80.328655 0.063981 2.7512 0.031991 5.566382 0.095972 8.317583 0.159954 4.286754-1.983424 6.494113-5.950271 7.421843-10.556932 2.367312-21.113864 4.734624-31.638805 7.261889-5.054531 1.215647-6.750038-0.92773-7.581796-5.854298-3.16708-18.746552-6.81402-37.397131-10.045081-56.079702-5.47041-30.775056-10.780867-61.582103-16.091323-92.38915-0.127963-1.119675 0-2.303331 0-4.286754z m-710.64147 108.032603c-0.44787 16.37924 0.543842 30.647093-1.695507 44.914947-0.671805 4.510689-1.983424 7.421843-6.846011 7.837722-10.428969 0.863749-20.825947 1.695507-31.190935 2.7512-5.02254 0.543842-6.430131-1.631526-7.261889-6.558094-2.335321-14.55577-1.919442-29.303484-3.327033-43.923234-2.655228-27.607976-3.774903-55.407897-5.566383-83.111846-0.44787-6.750038-1.119675-13.436095-1.663516-20.186134-0.287916-3.774903 1.215647-5.886289 5.246475-6.046242 13.500077-0.543842 26.936172-3.007126 40.50023-2.527266 7.933694 0.287916 8.605499 0.799768 9.181331 8.797443 0.351898 5.534392 0.255926 11.132765 0.383889 16.699147l2.239349 81.352357z m1134.902169-15.867388c0 19.066459 0.223935 38.132918-0.031991 57.199376-0.159954 9.917118-1.279628 10.780867-10.652904 11.644616-9.277304 0.863749-18.490626 1.567544-27.735939 2.559256-5.214485 0.543842-7.645778-0.991712-7.965685-6.973973-1.34361-25.336637-3.16708-50.673273-4.926568-75.977919-1.3756-20.985901-2.943145-41.939811-4.414717-62.893722-0.159954-2.399303-0.031991-4.798605-0.191944-7.165917-0.223935-4.190782 1.055693-6.654066 5.758326-6.81402 13.116188-0.44787 26.136404-2.975135 39.348564-2.495274 8.061657 0.287916 8.18962 0.415879 8.797444 8.797443 1.951433 27.32006 2.143377 54.704102 2.015414 82.120134zM628.295894 756.171918c16.571184 18.234701 17.402942 39.828425 11.932532 62.413861-5.502401 22.585436-18.042756 41.204025-33.23834 57.903171-25.49659 27.895893-56.303637 48.497905-89.062116 65.99682-56.399609 30.135242-116.190232 50.161422-178.572103 61.997982-44.882956 8.477536-90.053828 15.00364-135.704561 17.498914-13.915956 0.767777-27.799921 1.407591-41.715876 1.311619-10.077071 0-20.186133 0.287916-30.231214-0.063981-8.541518-0.319907-9.789155-1.791479-10.49295-10.716886-2.591247-32.022693-4.798605-64.077378-7.645778-96.100071-3.327033-37.109215-7.229899-74.18644-10.812858-111.295654-2.623238-26.8402-4.894578-53.744381-7.773741-80.520599-3.327033-31.542833-7.069945-63.021684-10.716885-94.564517-3.327033-29.111539-6.526103-58.28706-10.045081-87.430591-3.934856-32.278619-7.997676-64.493257-12.31642-96.707894a8228.968456 8228.968456 0 0 0-13.212161-92.996973 5984.500754 5984.500754 0 0 0-24.312934-152.627642 3243.825263 3243.825263 0 0 0-23.67312-123.740038c-1.151665-5.502401 0.511851-7.709759 5.342448-9.725174C52.335283 47.609843 98.465876 28.063524 144.724432 8.77313c8.605499-3.582959 17.434933-6.590085 26.584274-8.285592 6.334159-1.183656 7.965685 0.127963 7.773741 6.494113-0.479861 16.283268 0.191944 32.630517-1.407591 48.849803a161.393095 161.393095 0 0 0-0.639814 13.084197c-0.735786 58.383032-1.439582 116.798056 0.095972 175.213079 1.34361 51.185124 4.030829 102.338258 7.005964 153.491392 2.335321 40.372267 5.694345 80.744534 9.149341 121.052819 3.391014 39.508518 7.517815 78.953054 11.38869 118.461572 0.735786 7.517815 1.407591 8.221611 9.949108 7.069945a381.329176 381.329176 0 0 1 50.833227-4.190782c52.880632-0.127963 104.897514 7.133927 156.338564 19.322384 45.010919 10.684895 88.806191 24.920757 130.777993 44.818975 20.793957 9.853136 40.692174 21.241827 58.830902 35.701624 6.174206 4.862587 11.676606 10.46096 16.891091 16.315259z m1126.840512-9.597211c20.47405 17.946784 27.927883 39.924397 22.105576 67.116494-4.830596 22.425483-15.771416 41.268006-30.359177 58.127107-23.417194 27.096125-51.856929 47.698138-82.631985 64.909136-60.334465 33.782182-124.603787 55.727804-192.168151 68.396122a1151.089465 1151.089465 0 0 1-111.455609 15.547481c-21.177845 1.82347-42.451662 4.09481-66.220754 2.623238h-27.76793c-5.406429 0-8.477536-1.695507-8.925406-8.125638-2.047405-28.087837-4.414717-56.143683-6.941983-84.19953-2.687219-29.623391-5.662354-59.246781-8.477536-88.870172-2.559256-27.224088-4.926568-54.512157-7.709759-81.736245-2.559256-25.656544-5.502401-51.249106-8.285592-76.873659-2.591247-24.057008-5.086522-48.114017-7.933695-72.139035-3.423005-29.111539-7.037955-58.223079-10.652904-87.334618-3.391014-27.160107-6.750038-54.288222-10.364987-81.416338a6133.577429 6133.577429 0 0 0-12.156467-87.142675c-5.694345-37.653057-11.804569-75.178151-17.818822-112.767227a3259.14881 3259.14881 0 0 0-29.111539-158.993792c-0.44787-2.335321-0.671805-4.734624-1.3756-7.005964-1.663517-5.118512-0.063981-7.837722 4.958559-9.821146C1191.012355 47.641834 1238.61452 24.448575 1288.2321 6.149893c6.494113-2.431293 13.052207-5.150503 20.058171-5.854299 6.302168-0.639814 7.901704 0.383888 7.29388 7.101936-3.327033 36.43741-1.407591 73.066765-3.135089 109.536166-1.407591 29.751354-1.247637 59.598679 0.255926 89.382023 0.351898 7.549806 0.639814 15.131602 0.575832 22.649418-0.383888 35.765606 1.503563 71.499221 3.327033 107.200845 2.335321 47.186286 5.758326 94.276601 9.245313 141.398906 2.527266 34.006117 5.822308 67.948253 9.021379 101.922379 1.695507 18.586598 3.518977 37.141206 5.822308 55.631832 1.247637 10.205034 1.759489 10.301006 11.772578 8.957396 17.658868-2.399303 35.349726-4.350736 53.200539-4.09481 62.637796 0.799768 124.027954 10.684895 184.266447 27.863902 40.788146 11.580634 80.488608 26.040432 117.981712 46.290547a253.55831 253.55831 0 0 1 47.218277 32.438573zM308.676783 922.811488c23.161269-11.068783 135.608589-98.947243 144.533995-113.279078-54.576139-23.513166-109.344222-45.362816-168.239105-63.24562l23.70511 176.524698z m1277.196815-107.520752c2.879163-3.103098 2.559256-5.502401-1.343609-7.229899-7.773741-3.550968-15.4835-7.325871-23.353213-10.556932-42.003793-17.179007-84.19953-33.814173-127.482951-47.37823-3.774903-1.151665-7.645778-3.774903-12.476374-1.535554l23.321222 173.45359c3.454996 0.767777 4.798605-0.831758 6.33416-1.919442 39.316574-28.855614 78.889073-57.35933 116.638102-88.390312 6.36615-5.182494 12.668318-10.396978 18.362663-16.443221z",fill:"var(--brand_blue)","p-id":"4405"},null,-1),h1=[_1];function m1(e,t){return u(),g("svg",v1,h1)}const y1=H(p1,[["render",m1]]),We=e=>(Jt("data-v-e484e7f0"),e=e(),Qt(),e),w1=We(()=>E("div",null,[E("div",{class:"diamond"})],-1)),g1=We(()=>E("div",null,[E("div",{class:"diamond"})],-1)),b1=We(()=>E("div",null,[E("div",{class:"diamond"})],-1)),x1=[w1,g1,b1],k1=A({__name:"PlayButton",props:{value:{type:Boolean,default:!0}},emits:["update:value"],setup(e,{emit:t}){const n=e,o=O(n.value);return yt(()=>{o.value=n.value}),L(o,()=>{t("update:value",o.value)}),(r,l)=>(u(),g("div",{class:Le(["play",{pause:!o.value}]),onClick:l[0]||(l[0]=()=>o.value=!o.value)},x1,2))}});const $1=H(k1,[["__scopeId","data-v-e484e7f0"]]),E1={class:"flex flex-shrink-0 w-40 h-40"},z1=["src"],S1=A({__name:"ContentBilibiliWebsite",props:{bv:null},setup(e){const t=e,{bv:n}=U(t),o=z(()=>`//player.bilibili.com/player.html?bvid=${n.value}&&page=1&as_wide=1&high_quality=1&danmaku=0`),[r]=Et(),l=O(!1),{duration:s,transitionActive:a,safeActive:c,show:v,hidden:p}=zt();let f=null;return v(),L(l,()=>{clearTimeout(f),f=setTimeout(()=>{l.value?p():v()},3e3)}),(y,d)=>{const m=y1,b=ee,x=Ne;return u(),g("div",{ref_key:"bilibili_player_ref",ref:r,class:"w-full rounded-xl overflow-hidden relative"},[k(x,{class:"h-full w-full"},{default:$(()=>[i(c)?(u(),g("div",{key:0,class:"w-full h-full flex flex-col justify-center items-center absolute left-0 right-0 top-0 bottom-0",style:oe({opacity:i(a)?1:0,transition:`opacity ${i(s)}ms ease `})},[k(b,{class:"absolute top-[25%]",style:oe({transform:"translate(0,-50%)"}),size:"15em",color:"rgb(0, 174, 236)"},{default:$(()=>[k(m,{class:"h-40 w-40"})]),_:1},8,["style"]),E("div",E1,[k($1,{value:l.value,"onUpdate:value":d[0]||(d[0]=_=>l.value=_)},null,8,["value"])])],4)):I("",!0),l.value?(u(),g("iframe",{key:1,class:"w-full h-full",src:i(o),allowfullscreen:"",height:"0",width:"100%",scrolling:"no",frameborder:"0",sandbox:"allow-top-navigation allow-same-origin allow-forms allow-scripts"},`\r
        <span\r
          data-mce-type="bookmark"\r
          style="\r
            display: inline-block;\r
            width: 0px;\r
            overflow: hidden;\r
            line-height: 0;\r
          "\r
          class="mce_SELRES_start"\r
        ></span>\r
      `,8,z1)):I("",!0)]),_:1})],512)}}}),C1=""+new URL("7z.f9012bb4.png",import.meta.url).href,P1=["src"],R1=A({__name:"Icon7z",setup(e){return(t,n)=>(u(),g("img",{class:"h-full w-auto",src:i(C1),alt:""},null,8,P1))}}),O1={},B1={version:"1.1",xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd",height:"1024",width:"1024",viewBox:"0 0 1024 1024"},M1=E("path",{d:"M766.1 57.2c-0.8-0.8-1.6-1.4-2.4-2.2l-50-50c-2.8-2.8-8.2-5-12.1-5H286c-58.1 0-105.4 47.2-105.4 105.1v465.5h82.5V105.1c0-12.4 10.5-22.9 22.9-22.9h364.4v152c0 58 47.3 105.1 105.4 105.1h152.4v579.5c0 12.4-10.5 22.9-22.9 22.9H286c-12.4 0-22.9-10.5-22.9-22.9v-57.9h-82.5v57.9c0 58 47.3 105.1 105.4 105.1h599.2c58.1 0 105.4-47.2 105.4-105.1V288.4c0-3.9-2.2-9.3-5-12l-50.2-50c-0.8-0.8-1.5-1.6-2.3-2.4l-167-166.8z m-33.2 177V129.1c0-3.9 2.2-4.8 5-2.1l125.3 125c2.8 2.8 1.8 5-2.1 5H755.8c-12.4 0.1-22.9-10.4-22.9-22.8z",fill:"#04a7f5"},null,-1),A1=E("path",{d:"M679.7 598.5H68c-15.1 0-27.5 12.3-27.5 27.4v180.6c0 15.1 12.4 27.4 27.5 27.4h611.7c15.1 0 27.5-12.3 27.5-27.4V626c0-15.1-12.4-27.5-27.5-27.5z m-345.1 59.3l-77.3 107.4h77.2v26.4H213.6v-18l78.7-106.9h-72.9v-26.4h115.1v17.5z m67.6 7.6h-13v101.1h13v25.1h-58v-25.1H357V665.4h-12.8v-25.1h58v25.1z m113.4 60c-11.4 9.3-25.6 13.8-42.6 13.4h-16.6v52.7h-32.2V640.3h52.1c37.6 0 56.4 16 56.4 47.9 0 15.5-5.7 27.9-17.1 37.2z",fill:"#034767"},null,-1),T1=E("path",{d:"M470.7 665.3h-14.3v48.8h14c18.9 0 28.4-8.2 28.4-24.7 0-16.1-9.4-24.1-28.1-24.1z",fill:"#034767"},null,-1),D1=E("path",{d:"M468.4 81.5h71v47.4h-71zM397.4 128.9h71v47.3h-71zM468.4 176.2h71v47.3h-71zM397.4 223.5h71v47.3h-71zM468.4 270.8h71v47.3h-71zM397.4 318.1h71v47.3h-71zM468.4 365.4h71v47.3h-71zM397.4 412.7h142V460h-142zM397.4 460h15.1v47.3h-15.1zM523.7 460h15.7v47.3h-15.7zM539.4 543.1c0 13.1-11 11.5-24.5 11.5H422c-13.6 0-24.5 1.7-24.5-11.3V531v-23.6h141.9v35.7z",fill:"#034767"},null,-1),L1=[M1,A1,T1,D1];function I1(e,t){return u(),g("svg",B1,L1)}const H1=H(O1,[["render",I1]]),V1=""+new URL("xlsx.fcdf8604.png",import.meta.url).href,j1=["src"],N1=A({__name:"xlsx",setup(e){return(t,n)=>(u(),g("img",{class:"h-full w-auto",src:i(V1),alt:""},null,8,j1))}}),U1={},F1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},W1=E("path",{d:"M270.1 741.7c0 23.4 19.1 42.5 42.6 42.5h48.7v120.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V784.1h85v120.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V784.1h48.7c23.5 0 42.6-19.1 42.6-42.5V346.4h-486v395.3zm357.1-600.1l44.9-65c2.6-3.8 2-8.9-1.5-11.4c-3.5-2.4-8.5-1.2-11.1 2.6l-46.6 67.6c-30.7-12.1-64.9-18.8-100.8-18.8c-35.9 0-70.1 6.7-100.8 18.8l-46.6-67.5c-2.6-3.8-7.6-5.1-11.1-2.6c-3.5 2.4-4.1 7.4-1.5 11.4l44.9 65c-71.4 33.2-121.4 96.1-127.8 169.6h486c-6.6-73.6-56.7-136.5-128-169.7zM409.5 244.1a26.9 26.9 0 1 1 26.9-26.9a26.97 26.97 0 0 1-26.9 26.9zm208.4 0a26.9 26.9 0 1 1 26.9-26.9a26.97 26.97 0 0 1-26.9 26.9zm223.4 100.7c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V400.1c.1-30.6-24.3-55.3-54.6-55.3zm-658.6 0c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V400.1c0-30.6-24.5-55.3-54.6-55.3z",fill:"currentColor"},null,-1),K1=[W1];function q1(e,t){return u(),g("svg",F1,K1)}const G1=H(U1,[["render",q1]]),Y1={},Z1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},X1=E("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7l7-7z",fill:"currentColor"},null,-1),J1=[X1];function Q1(e,t){return u(),g("svg",Z1,J1)}const eo=H(Y1,[["render",Q1]]),to={class:"flex h-20"},no={class:"flex-1 flex-shrink flex items-center"},oo=A({__name:"ContentDownloadBlock",props:{url:null},setup(e){const t=e,{url:n}=U(t),o=z(()=>{var a;const l=n.value.lastIndexOf("/"),s=(a=n.value.slice(l+1))!=null?a:n.value;return decodeURI(s)}),r=()=>{window.open(n.value)};return(l,s)=>{const a=An,c=G1,v=ee,p=N1,f=H1,y=R1,d=Ne;return u(),C(d,{class:"mt-2"},{default:$(()=>[E("div",to,[E("div",no,[k(a,{trigger:"hover"},{trigger:$(()=>[X(D(i(o)),1)]),default:$(()=>[X(" "+D(i(n)),1)]),_:1})]),E("div",{class:"flex-shrink h-20 w-20 flex justify-center items-center",onClick:r},[i(n).endsWith(".apk")?(u(),C(v,{key:0,size:"3em"},{default:$(()=>[k(c)]),_:1})):i(n).endsWith(".xlsx")?(u(),C(v,{key:1,size:"3em"},{default:$(()=>[k(p)]),_:1})):i(n).endsWith(".zip")?(u(),C(v,{key:2,size:"3em"},{default:$(()=>[k(f)]),_:1})):i(n).endsWith(".7z")?(u(),C(v,{key:3,size:"3em"},{default:$(()=>[k(y)]),_:1})):(u(),C(v,{key:4,size:"3em"},{default:$(()=>[k(eo)]),_:1}))])])]),_:1})}}}),so=["src"],lo=A({__name:"ContentYouTubeWebsite",props:{v:null},setup(e){const t=e,{v:n}=U(t),o=z(()=>`https://www.youtube.com/embed/${n.value}?controls=0`),[r]=Et();return(l,s)=>{const a=Ne;return u(),g("div",{ref_key:"target",ref:r,class:"w-full rounded-xl overflow-hidden relative"},[k(a,{class:"h-full w-full"},{default:$(()=>[E("iframe",{class:"w-full h-full",src:i(o),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,so)]),_:1})],512)}}}),ro={class:"w-full"},ao=["href"],io=A({__name:"ContentWebsite",props:{src:null},setup(e){const t=e,{src:n}=U(t),o=z(()=>{const s=/bilibili.com.*(BV[A-Za-z0-9]{5,20})\//[Symbol.match](n.value);if(!s)return;const a=s[1];if(!!a)return a}),r=z(()=>{const s=/youtube.com\/.*v=([a-zA-Z0-9]+)/[Symbol.match](n.value);if(!s)return;const a=s[1];if(!!a)return a}),l=`apk,pdf,zip,excel,xlsx,7z,exe,docx,doc,docx,zip,rar,apk,ipa,txt,exe,7z,e,z,ct,ke,cetrainer,db,tar,pdf,w3x
epub,mobi,azw,azw3,osk,osz,xpa,cpk,lua,jar,dmg,ppt,pptx,xls,xlsx,mp3
ipa,iso,img,gho,ttf,ttc,txf,dwg,bat,imazingapp,dll,crx,xapk,conf
deb,rp,rpm,rplib,mobileconfig,appimage,lolgezi,flac
cad,hwt,accdb,ce,xmind,enc,bds,bdi,ssf,it
pkg,cfg`.split(",").map(s=>`.${s}`);return(s,a)=>(u(),g("div",ro,[i(o)?(u(),C(S1,{key:0,bv:i(o)},null,8,["bv"])):i(r)?(u(),C(lo,{key:1,v:i(r)},null,8,["v"])):i(l).some(c=>i(n).endsWith(c))?(u(),C(oo,{key:2,url:i(n)},null,8,["url"])):(u(),g("a",{key:3,class:"break-words",href:i(n),target:"_blank"},D(i(n)),9,ao))]))}}),Ce=O(null);function yr(){const e=en(),t=ce(j.EventApi),n=z(()=>e.params.value),o=z(()=>Rt(n.value)),r=z(()=>{var l;return(l=o.value)==null?void 0:l.id});return z(()=>{var s,a;if(!r.value)return null;if(((s=Ce.value)==null?void 0:s.id)===r.value)return Ce.value;const l=t.getEventLineById(r.value,{urls:new Set((a=o.value)==null?void 0:a.relays)});return l==null?void 0:l.feat.useEvent()})}function be(){const e=Ie();return t=>{if(typeof t=="string"){e.push({name:"short-text-note",params:{value:t}});return}const n=ue(t.id);Ce.value=t,e.push({name:"short-text-note",params:{value:Ot(t,n)}})}}const co={},uo={class:"pl-1 box-border",style:{borderLeft:"2px solid red"}};function fo(e,t){return u(),g("div",uo,[q(e.$slots,"default")])}const Dt=H(co,[["render",fo]]),po={key:1},vo=A({__name:"PapawById",props:{id:null,relays:null,pubkey:null,disabledReply:{type:Boolean}},setup(e){const t=e,n=ce(j.EventApi),o=z(()=>n.getEventLineById(t.id,{urls:t.relays,pubkey:t.pubkey})),r=z(()=>o.value.feat.useEvent()),l=be();return(s,a)=>{const c=Dn;return i(r)?(u(),C(Wt,{key:0,event:i(r),disabledReply:""},tn({_:2},[s.$slots.reply?{name:"reply",fn:$(()=>[q(s.$slots,"reply",{event:i(r)})]),key:"0"}:void 0]),1032,["event"])):(u(),g("div",po,[k(c,{description:i(M)("not_found"),size:"huge",click:()=>i(l)(e.id)},null,8,["description","click"]),k(Dt,null,{default:$(()=>[q(s.$slots,"reply",{event:i(r)})]),_:3})]))}}}),Lt="__color_map",It={...wt};var vt;const $e=(vt=ze(Lt,It))!=null?vt:{};function _o(e){const t=$e[e];if(t)return t;const n=nn();return $e[e]=n,gt(Lt,$e,It),n}function Ht(e){var n;const t=e.tags.filter(o=>(o[0]==="e"||o[0]==="p")&&o[2]).map(o=>o[2]);return De($t(e.tags),(n=ue(e.id))!=null?n:[],t)}const Vt=A({__name:"RelayContent",props:{event:null},setup(e){const t=e,{event:n}=U(t),o=z(()=>n.value.tags.filter(l=>l[0]==="e"&&l[1]&&(l[3]==="reply"||!l[3])).map(l=>l[1])),r=z(()=>Ht(n.value));return(l,s)=>{const a=i1;return u(),g(Y,null,[i(o).length>0?(u(),C(a,{key:0,dashed:""})):I("",!0),(u(!0),g(Y,null,le(i(o),c=>(u(),C(vo,{id:c,relays:i(r),disabledReply:""},null,8,["id","relays"]))),256))],64)}}}),ho=["onClick"],mo={key:0},yo={key:1,class:"p-0 m-0 w-full h-auto"},wo={controls:"",class:"overflow-hidden rounded-2xl w-full m-0 p-0 h-auto"},go=["src"],bo=["href"],xo=["href"],ko={key:9,class:"break-words block"},$o=["textContent"],Eo=A({__name:"Content",props:{event:null,contenteditable:{type:Boolean},disabledReply:{type:Boolean}},setup(e){const t=e,{event:n,contenteditable:o}=U(t);function r(d,m,b,x){let _=0;const h=m[Symbol.matchAll](d);for(const S of h){let w=S.index,B=S[0];!Ke(w)||(w-_>0&&b(d.slice(_,w)),x(B,w,S),_=w+B.length)}d.length-_>0&&b(d.slice(_))}const l=[(d,m,b,x)=>{r(m,On(),_=>{d(_)},(_,h,S)=>{let w=S[1];!_||!w||b.push(a(_,w,x.tags))})},(d,m,b,x)=>{r(m,/(nostr:|&|@)((naddr)[a-zA-Z0-9]+)/g,_=>{d(_)},(_,h,S)=>{const w=S[2];!w||b.push(["naddr",w])})},(d,m,b,x)=>{r(m,/(nostr:|&|@)((nevent|note)[a-zA-Z0-9]+)/g,_=>{d(_)},(_,h,S)=>{const w=S[2];!w||b.push(["e",w])})},(d,m,b,x)=>{r(m,/(nostr:|@)((nprofile|npub)[a-zA-Z0-9]+)/g,_=>{d(_)},(_,h,S)=>{const w=S[2];!w||b.push(["p",`@${w}`,w])})},(d,m,b,x)=>{r(m,Bn(),_=>{d(_)},(_,h,S)=>{const w=S[1];!w||b.push(["t",`#${w}`,w])})},(d,m,b)=>{b.push(["text",m])}];function s(d,m,b){const x=h=>{const S=l[h];return S?w=>{!w||S(x(h+1),w,m,b)}:()=>{}};x(0)(d)}function a(d,m,b){const x=parseInt(m);if(!Ke(x))return["text",d];const _=b[x];if(!_)return["text",d];const h=_[1];if(!h)return["text",d];switch(_[0]){case"p":const S=h,w=we.kind0.get(S),B=he.nprofileEncode({pubkey:h});return w?["p",`@${Se(w).name}`,B]:["p",`@${B}`,B];case"e":return["e",he.neventEncode({id:h})];case"t":return["t",`#${h}`,h];default:return["text",d]}}function c(d,m){d.split(`
`).forEach(b=>{const x=[];r(b,Rn(),_=>{s(_,x,n.value)},(_,h,S)=>{let w=_;[".jpg",".jpeg",".png",".gif",".bmp"].some(B=>w.endsWith(B))?x.push(["img",w,w]):[".mov",".mp4",".av1"].some(B=>w.endsWith(B))?x.push(["video",w,w]):b===w?x.push(["website",w,w]):x.push(["url",w,w])}),x.push(["enter",""]),m.push(x)})}const v=z(()=>{const d=[];return c(n.value.content,d),d}),[p,f]=He();function y(d,m){["e","p","url","website","img","video","t"].some(b=>d[0]===b)&&m.stopPropagation()}return(d,m)=>{const b=Ct,x=mt("RouterLink");return u(),g("div",{class:"w-full",ref_key:"target",ref:p},[E("div",null,[(u(!0),g(Y,null,le(i(v),_=>(u(),g("div",{key:String(_),class:"w-full flex flex-wrap justify-start items-start"},[(u(!0),g(Y,null,le(_,h=>(u(),g("span",{key:h[1],class:Le(["flex justify-start items-start",{"w-full":["e","website","img","video"].some(S=>h[0]===S)}]),onClick:S=>y(h,S)},[h[0]==="img"?(u(),g("div",mo,[k(b,{class:"img w-full",src:h[1]},null,8,["src"])])):h[0]==="video"?(u(),g("div",yo,[E("video",wo,[E("source",{src:h[1]},null,8,go)])])):h[0]==="website"?(u(),C(io,{key:h[1],src:h[1]},null,8,["src"])):h[0]==="url"?(u(),g("a",{key:3,class:"break-words",href:h[2]},D(h[1]),9,bo)):h[0]==="t"?(u(),C(x,{key:4,to:{name:"tag",params:{value:h[2]}}},{default:$(()=>[X(D(h[1]),1)]),_:2},1032,["to"])):h[0]==="naddr"?(u(),C(Tn,{key:5,addr:h[1]},null,8,["addr"])):h[0]==="p"?(u(),C(Ln,{key:6,value:h[2]},null,8,["value"])):h[0]==="e"?(u(),C(f1,{key:7,event:i(n),value:h[1],tag:h[2]},null,8,["event","value","tag"])):h[0]==="url"?(u(),g("a",{key:8,class:"break-words block",style:{"word-break":"break-all","text-overflow":"ellipsis","word-wrap":"break-word"},href:h[2]},D(h[1]),9,xo)):h[0]==="enter"?(u(),g("br",ko)):(u(),g("span",{key:10,class:"flex",style:{"table-layout":"fixed","word-break":"break-all","word-wrap":"break-word"},textContent:D(h[1].replace(" ","\xA0"))},null,8,$o))],10,ho))),128))]))),128))]),!e.disabledReply&&i(f)?(u(),C(Vt,{key:0,event:i(n)},null,8,["event"])):I("",!0)],512)}}});const zo=H(Eo,[["__scopeId","data-v-0c04d3a1"]]),So={class:"flex flex-col"},Co={key:0},Po={key:1,style:{"word-break":"break-all","text-overflow":"ellipsis","word-wrap":"break-word"}},Ro=A({__name:"Markdown",props:{identifier:null,pubkey:null,event:null},setup(e){var p;const t=e,n=ye(t,"event"),o=z(()=>{if(!!t.pubkey&&!!t.identifier)return{identifier:t.identifier,pubkey:t.pubkey,kind:30023}}),{longFormContentOptions:r}=Hn(o),l=Vn(n),{showArticleDetails:s}=(p=jn())!=null?p:{},a=O({bold:!1,italic:!1,header:!1,underline:!1,strikethrough:!1,mark:!1,superscript:!1,subscript:!1,quote:!1,ol:!1,ul:!1,link:!1,imagelink:!1,code:!1,table:!1,fullscreen:!0,readmodel:!0,htmlcode:!1,help:!1,undo:!1,redo:!1,trash:!1,save:!1,navigation:!1,alignleft:!1,aligncenter:!1,alignright:!1,subfield:!1,preview:!1}),c=z(()=>{var f;return(f=r.value)!=null?f:l.value});function v(f){bt.push({name:"tag",params:{value:f}})}return(f,y)=>{var x,_,h,S,w,B,P,R,W,V;const d=Ct,m=At,b=Ue;return u(),g("div",So,[E("div",null,[(x=i(c))!=null&&x.image?(u(),C(d,{key:0,class:"w-full rounded-md",imgProps:{style:{width:"100%"}},src:(_=i(c))==null?void 0:_.image},null,8,["src"])):I("",!0)]),E("div",null,[(h=i(c))!=null&&h.publishedAt?(u(),g("div",Co,[X(D(i(M)("published_at"))+": ",1),k(Mt,{secondTimestamp:(S=i(c))==null?void 0:S.publishedAt},null,8,["secondTimestamp"])])):I("",!0),(w=i(c))!=null&&w.title?(u(),g("h3",Po,D((B=i(c))==null?void 0:B.title),1)):I("",!0),E("p",null,D((V=(P=i(c))==null?void 0:P.summary)!=null?V:(W=(R=i(c))==null?void 0:R.content)==null?void 0:W.slice(0,100)),1)]),i(c)&&i(s)?(u(),g("div",{key:0,onClick:y[0]||(y[0]=_e(()=>{},["stop"]))},[k(b,null,{default:$(()=>[(u(!0),g(Y,null,le(i(c).hashtags,T=>(u(),C(m,{type:"info",onClick:J=>v(T)},{default:$(()=>[X(D(T),1)]),_:2},1032,["onClick"]))),256))]),_:1}),k(Nn,{ref:"md",class:"h-full mt-4 md",style:{},autofocus:!1,editable:!1,subfield:!1,defaultOpen:"preview",toolbars:a.value,"model-value":i(c).content},null,8,["toolbars","model-value"])])):I("",!0)])}}}),Oo={},Bo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Mo=E("path",{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H273v428h.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4c20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3c40.4-23.5 65.5-66.1 65.5-111c0-28.3-9.3-55.5-26.1-77.7zM112 132v364c0 17.7 14.3 32 32 32h65V100h-65c-17.7 0-32 14.3-32 32z",fill:"currentColor"},null,-1),Ao=[Mo];function To(e,t){return u(),g("svg",Bo,Ao)}const Do=H(Oo,[["render",To]]),Lo={},Io={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ho=E("path",{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4c20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3c40.4-23.5 65.5-66.1 65.5-111c0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5c-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 0 1-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0 1 33.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4l21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4l21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5l21.9 19a56.76 56.76 0 0 1 19.6 43c0 19.1-11 37.5-28.8 48.4z",fill:"currentColor"},null,-1),Vo=[Ho];function jo(e,t){return u(),g("svg",Io,Vo)}const No=H(Lo,[["render",jo]]),Uo={},Fo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Wo=E("path",{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7c0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4c47.6-20.3 78.3-66.8 78.3-118.4c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c-.2-12.6-2-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z",fill:"currentColor"},null,-1),Ko=[Wo];function qo(e,t){return u(),g("svg",Fo,Ko)}const Go=H(Uo,[["render",qo]]),Yo={},Zo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Xo=E("path",{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7c0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4c47.6-20.3 78.3-66.8 78.3-118.4c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0 1 42.2-32.3c7.6 0 15.1 2.2 21.1 6.7c9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z",fill:"currentColor"},null,-1),Jo=[Xo];function Qo(e,t){return u(),g("svg",Zo,Jo)}const es=H(Yo,[["render",Qo]]),ts={key:0},ns={key:1},Pe=A({__name:"PapawReactionItem",props:{reaction:null,events:null,active:{type:Boolean},size:null},emits:["handelSwitchActive"],setup(e){return(t,n)=>{const o=ee,r=At;return u(),C(r,{round:"",checked:e.active,onUpdateChecked:n[0]||(n[0]=()=>t.$emit("handelSwitchActive",e.reaction)),checkable:""},{icon:$(()=>[e.reaction==="+"||e.reaction==="-"?(u(),C(o,{key:0,size:e.size,color:e.active?"#fffff":void 0},{default:$(()=>[e.reaction==="+"?(u(),g("div",ts,[e.active?(u(),C(Go,{key:0})):(u(),C(es,{key:1}))])):e.reaction==="-"?(u(),g("div",ns,[e.active?(u(),C(Do,{key:0})):(u(),C(No,{key:1}))])):I("",!0)]),_:1},8,["size","color"])):(u(),g("span",{key:1,style:oe({fontSize:`${e.size*.9}px`})},D(e.reaction),5))]),default:$(()=>[E("span",null,D(e.active?e.events.length+1:e.events.length),1)]),_:1},8,["checked"])}}});var Ye;const jt=typeof window<"u",os=e=>typeof e=="string",G=()=>{},Re=jt&&((Ye=window==null?void 0:window.navigator)==null?void 0:Ye.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function K(e){return typeof e=="function"?e():i(e)}function Nt(e,t){function n(...o){return new Promise((r,l)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(l)})}return n}function ss(e,t={}){let n,o,r=G;const l=a=>{clearTimeout(a),r(),r=G};return a=>{const c=K(e),v=K(t.maxWait);return n&&l(n),c<=0||v!==void 0&&v<=0?(o&&(l(o),o=null),Promise.resolve(a())):new Promise((p,f)=>{r=t.rejectOnCancel?f:p,v&&!o&&(o=setTimeout(()=>{n&&l(n),o=null,p(a())},v)),n=setTimeout(()=>{o&&l(o),o=null,p(a())},c)})}}function ls(e,t=!0,n=!0,o=!1){let r=0,l,s=!0,a=G,c;const v=()=>{l&&(clearTimeout(l),l=void 0,a(),a=G)};return f=>{const y=K(e),d=Date.now()-r,m=()=>c=f();return v(),y<=0?(r=Date.now(),m()):(d>y&&(n||!s)?(r=Date.now(),m()):t&&(c=new Promise((b,x)=>{a=o?x:b,l=setTimeout(()=>{r=Date.now(),s=!0,b(m()),v()},Math.max(0,y-d))})),!n&&!l&&(l=setTimeout(()=>s=!0,y)),s=!1,c)}}const Z={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function xe(e){return on()?(sn(e),!0):!1}function rs(e,t=200,n={}){return Nt(ss(t,n),e)}function as(e,t=200,n=!1,o=!0,r=!1){return Nt(ls(t,n,o,r),e)}function is(e){return typeof e=="function"?z(e):O(e)}function cs(e,t=!0){ln()?rn(e):t?e():xt(e)}function N(e){var t;const n=K(e);return(t=n==null?void 0:n.$el)!=null?t:n}const re=jt?window:void 0;function F(...e){let t,n,o,r;if(os(e[0])||Array.isArray(e[0])?([n,o,r]=e,t=re):[t,n,o,r]=e,!t)return G;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const l=[],s=()=>{l.forEach(p=>p()),l.length=0},a=(p,f,y,d)=>(p.addEventListener(f,y,d),()=>p.removeEventListener(f,y,d)),c=L(()=>[N(t),K(r)],([p,f])=>{s(),p&&l.push(...n.flatMap(y=>o.map(d=>a(p,y,d,f))))},{immediate:!0,flush:"post"}),v=()=>{c(),s()};return xe(v),v}let Ze=!1;function Xe(e,t,n={}){const{window:o=re,ignore:r=[],capture:l=!0,detectIframe:s=!1}=n;if(!o)return;Re&&!Ze&&(Ze=!0,Array.from(o.document.body.children).forEach(y=>y.addEventListener("click",G)));let a=!0;const c=y=>r.some(d=>{if(typeof d=="string")return Array.from(o.document.querySelectorAll(d)).some(m=>m===y.target||y.composedPath().includes(m));{const m=N(d);return m&&(y.target===m||y.composedPath().includes(m))}}),p=[F(o,"click",y=>{const d=N(e);if(!(!d||d===y.target||y.composedPath().includes(d))){if(y.detail===0&&(a=!c(y)),!a){a=!0;return}t(y)}},{passive:!0,capture:l}),F(o,"pointerdown",y=>{const d=N(e);d&&(a=!y.composedPath().includes(d)&&!c(y))},{passive:!0}),s&&F(o,"blur",y=>{var d;const m=N(e);((d=o.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(m!=null&&m.contains(o.document.activeElement))&&t(y)})].filter(Boolean);return()=>p.forEach(y=>y())}Z.mounted+"",Z.unmounted+"";const us=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function Je(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=re,eventName:l="keydown",passive:s=!1}=o,a=us(t);return F(r,l,v=>{a(v)&&n(v)},s)}var ds=Object.defineProperty,Qe=Object.getOwnPropertySymbols,fs=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable,et=(e,t,n)=>t in e?ds(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vs=(e,t)=>{for(var n in t||(t={}))fs.call(t,n)&&et(e,n,t[n]);if(Qe)for(var n of Qe(t))ps.call(t,n)&&et(e,n,t[n]);return e};Z.mounted+"";const _s=500;function tt(e,t,n){var o,r;const l=z(()=>N(e));let s;function a(){s&&(clearTimeout(s),s=void 0)}function c(p){var f,y,d,m;((f=n==null?void 0:n.modifiers)==null?void 0:f.self)&&p.target!==l.value||(a(),(y=n==null?void 0:n.modifiers)!=null&&y.prevent&&p.preventDefault(),(d=n==null?void 0:n.modifiers)!=null&&d.stop&&p.stopPropagation(),s=setTimeout(()=>t(p),(m=n==null?void 0:n.delay)!=null?m:_s))}const v={capture:(o=n==null?void 0:n.modifiers)==null?void 0:o.capture,once:(r=n==null?void 0:n.modifiers)==null?void 0:r.once};F(l,"pointerdown",c,v),F(l,"pointerup",a,v),F(l,"pointerleave",a,v)}const hs={[Z.mounted](e,t){typeof t.value=="function"?tt(e,t.value,{modifiers:t.modifiers}):tt(e,...t.value)}},Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Be="__vueuse_ssr_handlers__";Oe[Be]=Oe[Be]||{};Oe[Be];function Ut(e,t=!1){const n=O(),o=()=>n.value=Boolean(e());return o(),cs(o,t),n}function ms(e,t={}){const n=t?t.delayEnter:0,o=t?t.delayLeave:0,r=O(!1);let l;const s=a=>{const c=a?n:o;l&&(clearTimeout(l),l=void 0),c?l=setTimeout(()=>r.value=a,c):r.value=a};return window&&(F(e,"mouseenter",()=>s(!0),{passive:!0}),F(e,"mouseleave",()=>s(!1),{passive:!0})),r}Z.mounted+"";var nt=Object.getOwnPropertySymbols,ys=Object.prototype.hasOwnProperty,ws=Object.prototype.propertyIsEnumerable,gs=(e,t)=>{var n={};for(var o in e)ys.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&nt)for(var o of nt(e))t.indexOf(o)<0&&ws.call(e,o)&&(n[o]=e[o]);return n};function bs(e,t,n={}){const o=n,{window:r=re}=o,l=gs(o,["window"]);let s;const a=Ut(()=>r&&"ResizeObserver"in r),c=()=>{s&&(s.disconnect(),s=void 0)},v=L(()=>N(e),f=>{c(),a.value&&r&&f&&(s=new ResizeObserver(t),s.observe(f,l))},{immediate:!0,flush:"post"}),p=()=>{c(),v()};return xe(p),{isSupported:a,stop:p}}function xs(e,t={width:0,height:0},n={}){const{window:o=re,box:r="content-box"}=n,l=z(()=>{var c,v;return(v=(c=N(e))==null?void 0:c.namespaceURI)==null?void 0:v.includes("svg")}),s=O(t.width),a=O(t.height);return bs(e,([c])=>{const v=r==="border-box"?c.borderBoxSize:r==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(o&&l.value){const p=N(e);if(p){const f=o.getComputedStyle(p);s.value=parseFloat(f.width),a.value=parseFloat(f.height)}}else if(v){const p=Array.isArray(v)?v:[v];s.value=p.reduce((f,{inlineSize:y})=>f+y,0),a.value=p.reduce((f,{blockSize:y})=>f+y,0)}else s.value=c.contentRect.width,a.value=c.contentRect.height},n),L(()=>N(e),c=>{s.value=c?t.width:0,a.value=c?t.height:0}),{width:s,height:a}}Z.mounted+"";function ot(e,{window:t=re,scrollTarget:n}={}){const o=O(!1),r=()=>{if(!t)return;const l=t.document,s=N(e);if(!s)o.value=!1;else{const a=s.getBoundingClientRect();o.value=a.top<=(t.innerHeight||l.documentElement.clientHeight)&&a.left<=(t.innerWidth||l.documentElement.clientWidth)&&a.bottom>=0&&a.right>=0}};return L(()=>N(e),()=>r(),{immediate:!0,flush:"post"}),t&&F(n||t,"scroll",r,{capture:!1,passive:!0}),o}Z.mounted+"";const st=1;function Me(e,t={}){const{throttle:n=0,idle:o=200,onStop:r=G,onScroll:l=G,offset:s={left:0,right:0,top:0,bottom:0},eventListenerOptions:a={capture:!1,passive:!0},behavior:c="auto"}=t,v=O(0),p=O(0),f=z({get(){return v.value},set(w){d(w,void 0)}}),y=z({get(){return p.value},set(w){d(void 0,w)}});function d(w,B){var P,R,W;const V=K(e);!V||(W=V instanceof Document?document.body:V)==null||W.scrollTo({top:(P=K(B))!=null?P:y.value,left:(R=K(w))!=null?R:f.value,behavior:K(c)})}const m=O(!1),b=fe({left:!0,right:!1,top:!0,bottom:!1}),x=fe({left:!1,right:!1,top:!1,bottom:!1}),_=w=>{!m.value||(m.value=!1,x.left=!1,x.right=!1,x.top=!1,x.bottom=!1,r(w))},h=rs(_,n+o),S=w=>{const B=w.target===document?w.target.documentElement:w.target,P=B.scrollLeft;x.left=P<v.value,x.right=P>p.value,b.left=P<=0+(s.left||0),b.right=P+B.clientWidth>=B.scrollWidth-(s.right||0)-st,v.value=P;let R=B.scrollTop;w.target===document&&!R&&(R=document.body.scrollTop),x.top=R<p.value,x.bottom=R>p.value,b.top=R<=0+(s.top||0),b.bottom=R+B.clientHeight>=B.scrollHeight-(s.bottom||0)-st,p.value=R,m.value=!0,h(w),l(w)};return F(e,"scroll",n?as(S,n,!0,!1):S,a),F(e,"scrollend",_,a),{x:f,y,isScrolling:m,arrivedState:b,directions:x}}var ks=Object.defineProperty,$s=Object.defineProperties,Es=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,zs=Object.prototype.hasOwnProperty,Ss=Object.prototype.propertyIsEnumerable,rt=(e,t,n)=>t in e?ks(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,at=(e,t)=>{for(var n in t||(t={}))zs.call(t,n)&&rt(e,n,t[n]);if(lt)for(var n of lt(t))Ss.call(t,n)&&rt(e,n,t[n]);return e},Cs=(e,t)=>$s(e,Es(t));function it(e,t,n={}){var o,r;const l=(o=n.direction)!=null?o:"bottom",s=fe(Me(e,Cs(at({},n),{offset:at({[l]:(r=n.distance)!=null?r:0},n.offset)})));L(()=>s.arrivedState[l],async a=>{var c,v;if(a){const p=K(e),f={height:(c=p==null?void 0:p.scrollHeight)!=null?c:0,width:(v=p==null?void 0:p.scrollWidth)!=null?v:0};await t(s),n.preserveScrollPosition&&p&&xt(()=>{p.scrollTo({top:p.scrollHeight-f.height,left:p.scrollWidth-f.width})})}})}Z.mounted+"";function ct(e,t,n={}){const{root:o,rootMargin:r="0px",threshold:l=.1,window:s=re}=n,a=Ut(()=>s&&"IntersectionObserver"in s);let c=G;const v=a.value?L(()=>({el:N(e),root:N(o)}),({el:f,root:y})=>{if(c(),!f)return;const d=new IntersectionObserver(t,{root:y,rootMargin:r,threshold:l});d.observe(f),c=()=>{d.disconnect(),c=G}},{immediate:!0,flush:"post"}):G,p=()=>{c(),v()};return xe(p),{isSupported:a,stop:p}}Z.mounted+"";var Ps=Object.defineProperty,Rs=Object.defineProperties,Os=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,Bs=Object.prototype.hasOwnProperty,Ms=Object.prototype.propertyIsEnumerable,dt=(e,t,n)=>t in e?Ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,As=(e,t)=>{for(var n in t||(t={}))Bs.call(t,n)&&dt(e,n,t[n]);if(ut)for(var n of ut(t))Ms.call(t,n)&&dt(e,n,t[n]);return e},Ts=(e,t)=>Rs(e,Os(t));Z.mounted+"";function Ft(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientHeight<e.scrollHeight||t.overflowY==="auto"&&e.clientWidth<e.scrollWidth)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:Ft(n)}}function Ds(e){const t=e||window.event,n=t.target;return Ft(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function Ls(e,t=!1){const n=O(t);let o=null,r;L(is(e),a=>{if(a){const c=a;r=c.style.overflow,n.value&&(c.style.overflow="hidden")}},{immediate:!0});const l=()=>{const a=K(e);!a||n.value||(Re&&(o=F(a,"touchmove",c=>{Ds(c)},{passive:!1})),a.style.overflow="hidden",n.value=!0)},s=()=>{const a=K(e);!a||!n.value||(Re&&(o==null||o()),a.style.overflow=r,n.value=!1)};return xe(s),z({get(){return n.value},set(a){a?l():s()}})}const Is=()=>{let e=!1;const t=O(!1);return(n,o)=>{if(t.value=o.value,e)return;e=!0;const r=Ls(n,o.value);L(t,l=>r.value=l)}};Is();const Hs=A({__name:"LazyItem",props:{show:{type:[null,Boolean],default:null},minHeight:{default:0},transitionDuration:{default:500},disabled:{type:Boolean},delay:{default:500}},emits:["update:show"],setup(e,{emit:t}){const n=e,{transitionDuration:o,delay:r,disabled:l}=U(n),s=O(),a=O(),c=n.show===void 0||n.show===null?He(r.value,{target:s})[1]:ye(n,"show"),{transitionActive:v,safeActive:p,duration:f,show:y,hidden:d,transitioning:m}=zt(o);L(c,_=>{_?y():d(),t("update:show",_)});const{height:b}=an(a),x=O(0);return L(b,_=>{if(_){x.value=_;return}else return}),(_,h)=>{const S=Fn;return u(),g("div",{ref_key:"wrap",ref:s,class:"overflow-hidden relative",style:oe({minHeight:i(p)?"0px":typeof e.minHeight=="number"?`${e.minHeight}px`:e.minHeight,height:i(v)?`${x.value}px`:"0px",transition:`height ${i(f)}ms ease-out`})},[e.minHeight>100&&(!i(p)||i(m))?(u(),g("div",{key:0,class:"absolute left-0 right-0 top-0 bottom-0 flex items-center justify-center",style:oe({opacity:i(v)?0:1,transition:`opacity ${i(f)}ms ease-out`})},[k(S,{size:"medium"})],4)):I("",!0),i(p)?(u(),g("div",{key:1,ref_key:"target",ref:a,style:oe({opacity:i(v)?1:0,transition:`opacity ${i(f)}ms ease-in`})},[q(_.$slots,"default")],4)):I("",!0)],4)}}}),Vs=A({__name:"LazyItemDisabled",props:{show:{type:[null,Boolean],default:null},minHeight:{default:0},transitionDuration:{default:500},disabled:{type:Boolean},delay:{default:500}},setup(e){const t=e;return(n,o)=>e.disabled?q(n.$slots,"default",{key:0}):(u(),C(Hs,cn(Te({key:1},t)),{default:$(()=>[q(n.$slots,"default")]),_:3},16))}}),[wr,js]=ge(e=>e),[gr,Ns]=ge(e=>{const t=z(()=>{var n,o;return new Set(((o=(n=e.value)==null?void 0:n.tags.filter(r=>r[0]==="e"&&r[1]&&(!r[3]||r[3]==="reply")))!=null?o:[]).map(r=>r[1]))});return{focusEvent:e,parents:t}}),Us={},Fs={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ws=E("path",{d:"M11.61 29.92a1 1 0 0 1-.6-1.07L12.83 17H8a1 1 0 0 1-1-1.23l3-13A1 1 0 0 1 11 2h10a1 1 0 0 1 .78.37a1 1 0 0 1 .2.85L20.25 11H25a1 1 0 0 1 .9.56a1 1 0 0 1-.11 1l-13 17A1 1 0 0 1 12 30a1.09 1.09 0 0 1-.39-.08zM17.75 13l2-9H11.8L9.26 15h5.91l-1.59 10.28L23 13z",fill:"currentColor"},null,-1),Ks=[Ws];function qs(e,t){return u(),g("svg",Fs,Ks)}const Gs=H(Us,[["render",qs]]);var Ys=Object.defineProperty,Zs=Object.getOwnPropertyDescriptor,Xs=(e,t,n,o)=>{for(var r=o>1?void 0:o?Zs(t,n):t,l=e.length-1,s;l>=0;l--)(s=e[l])&&(r=(o?s(t,n,r):s(r))||r);return o&&r&&Ys(t,n,r),r},ie=(e,t)=>(n,o)=>t(n,o,e);const pe=fe(un("reactions",["+","-"]).value),ft=new Set(pe),Ee={...wt,duration:1e3*60*60*24};let Ae=class{constructor(e,t,n,o,r,l){this.rootEventBeltline=e,this.createEventBeltline=t,this.getRelayConfigurator=n,this.eventApi=o,this.generalEventEventBeltline=r,this.nostrApi=l}getLikeBeltline(e){return dn("getLikeBeltline",()=>{const t=this.createEventBeltline.createEventBeltlineReactive({}).addStaff(kn()).addStaff($n()).addReadUrl().addRelayUrls(e);return this.nostrApi.getPublicKey().then(n=>{t.addFilter({authors:[n],kinds:[7]})}),t},{useLocalStorage:!1})}async sendReactions(e,t,n){ft.has(e)||(ft.add(e),pe.push(e));let o=t.tags.filter(a=>a.length>=2&&(a[0]=="e"||a[0]=="p"||a[0]=="r"));o.push(["e",t.id]),o.push(["p",t.pubkey]);const r=new Set(this.getRelayConfigurator().getWriteList()),l=we.kind10002.get(t.pubkey);if(l){const{writeUrl:a}=xn(l.tags);De(r,a)}const s=await this.rootEventBeltline.publish({content:e,kind:7,tags:o},r,n);!s||gt(this.createReactionsKey(e,t.id),s.id,Ee)}sendLike(e,t){this.sendReactions("+",e,t)}sendDislike(e,t){this.sendReactions("-",e,t)}deleteReactions(e,t){if(t.eventId){const n=this.createReactionsKey(e,t.eventId),o=ze(n,Ee);o&&this.eventApi.eventDeletionOne(o,t),fn(n)}else t.likeId&&this.eventApi.eventDeletionOne(t.likeId,t)}deleteLike(e){this.deleteReactions("+",e)}deleteDislike(e){this.deleteReactions("-",e)}hasReactions(e,t){const n=this.createReactionsKey(e,t);return ze(n,Ee)!==null}hasLike(e){return this.hasReactions("+",e)}hasDislike(e){return this.hasReactions("-",e)}createReactionsKey(e,t){return`${e}:${t}`}createReactionEventLine(e){const t=e.event,n=ue(t.id);return this.generalEventEventBeltline.createGeneralEventEventBeltline(pn(e,{filters:[{"#e":[e.event.id],kinds:[7]}],addUrls:new Set(n),limit:30})).addStaff({initialization(){this.beltline.feat.reactionMap={}},push(r){var s;const l=this.beltline.feat.reactionMap;((s=l[r.content])!=null?s:l[r.content]=[]).push(r)},feat:{getReactionMap(){return this.beltline.feat.reactionMap}}})}};Ae=Xs([bn(),ie(0,ae(j.RootEventBeltline)),ie(1,ae(j.CreateEventBeltline)),ie(2,ae(j.RelayConfiguratorFactory)),ie(3,ae(j.EventApi)),ie(4,ae(j.GeneralEventEventBeltline)),ie(5,ae(j.NostrApi))],Ae);const br=Object.freeze(Object.defineProperty({__proto__:null,reactions:pe,get LikeApi(){return Ae}},Symbol.toStringTag,{value:"Module"})),Js={},Qs={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 496 512"},el=E("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200s-89.7 200-200 200zm84-143.4c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.6-11.5-33.8-3.1c-10.2 8.5-11.5 23.6-3.1 33.8c30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8c-10.2-8.4-25.3-7.1-33.8 3.1zM136.5 211c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7c3.6-1.1 6-4.5 5.7-8.3c-3.3-42.1-32.2-71.4-56-71.4s-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3c3.4 1.1 7.4-.5 9.3-3.7l9.5-17zM328 152c-23.8 0-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3c3.5 1.1 7.4-.5 9.3-3.7l9.5-17c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7c3.6-1.1 6-4.5 5.7-8.3c-3.3-42.1-32.2-71.4-56-71.4z",fill:"currentColor"},null,-1),tl=[el];function nl(e,t){return u(),g("svg",Qs,tl)}const ol=H(Js,[["render",nl]]),sl=A({__name:"PapawReaction",props:{event:null,size:null},async setup(e){let t,n;const o=e,r=([t,n]=kt(()=>St(j.LikeApi)),t=await t,n(),t),l=ye(o,"event"),s=Ve(),a=20,[c,v]=je(()=>r.createReactionEventLine({event:l.value,limit:a})),p=z(()=>{var _,h;return(h=(_=c.value)==null?void 0:_.feat.getReactionMap())!=null?h:{}}),f=O({});pe.forEach(_=>{f.value[_]=r.hasReactions(_,l.value.id)});function y(_){f.value[_]?r.deleteReactions(_,{eventId:l.value.id,onOK:s}):r.sendReactions(_,l.value,{onOK:s}),f.value[_]=!f.value[_]}const d=O(!1),m=z(()=>Object.entries(p.value)),b=z(()=>Object.entries(f.value).filter(([_,h])=>h&&!p.value[_]).map(([_,h])=>[_,[]])),x=z(()=>[...m.value,...b.value].sort((_,h)=>_[1].length-h[1].length).slice(0,3));return(_,h)=>{const S=ee,w=ve,B=Ue;return u(),g("div",{ref_key:"target",ref:v},[k(B,{class:"flex items-center justify-center"},{default:$(()=>[(u(!0),g(Y,null,le(i(x),([P,R])=>(u(),C(Pe,{onHandelSwitchActive:y,size:e.size,events:R,reaction:P,active:f.value[P]},null,8,["size","events","reaction","active"]))),256)),k(w,{circle:"",quaternary:"",onClick:h[0]||(h[0]=()=>d.value=!d.value)},{default:$(()=>[k(S,{size:e.size},{default:$(()=>[k(ol)]),_:1},8,["size"])]),_:1}),k(Tt,{show:d.value,"onUpdate:show":h[1]||(h[1]=P=>d.value=P)},{default:$(()=>[k(B,{class:"h-full w-full flex items-center flex-wrap"},{default:$(()=>[(u(!0),g(Y,null,le(i(pe),P=>{var R;return u(),C(Pe,{onHandelSwitchActive:y,size:e.size,events:(R=i(p)[P])!=null?R:[],reaction:P,active:f.value[P]},null,8,["size","events","reaction","active"])}),256))]),_:1})]),_:1},8,["show"])]),_:1})],512)}}}),ll={},rl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},al=E("path",{d:"M464 512a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm200 0a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm-400 0a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 0 0-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 0 0-142 96.5c-40.9 41.3-73 89.3-95.2 142.8c-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 0 0 112 714v152a46 46 0 0 0 46 46h152.1A449.4 449.4 0 0 0 510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 0 0 142.8-95.2c41.3-40.9 73.8-88.7 96.5-142c23.6-55.2 35.6-113.9 35.9-174.5c.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8c69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9c44.6 18.7 84.6 45.6 119 80c34.3 34.3 61.3 74.4 80 119c19.4 46.2 29.1 95.2 28.9 145.8c-.6 99.6-39.7 192.9-110.1 262.7z",fill:"currentColor"},null,-1),il=[al];function cl(e,t){return u(),g("svg",rl,il)}const ul=H(ll,[["render",cl]]),dl={class:"ml-2"},fl={key:0},pl=A({__name:"PapawReplyButton",props:{event:null,size:null},setup(e){const t=e,{event:n}=U(t),o=ce(j.GeneralEventEventBeltline),r=be();function l(){r(n.value)}const s=20,a=z(()=>ue(n.value.id)),[c,v]=je(()=>o.createGeneralEventEventBeltline({filters:[{"#e":[n.value.id],kinds:[1,30023]}],addUrls:new Set(a.value),limit:s})),p=z(()=>{var f,y;return(y=(f=c.value)==null?void 0:f.getList().length)!=null?y:0});return(f,y)=>{const d=ee,m=ve;return u(),g("div",{ref_key:"target",ref:v},[k(m,{text:"",onClick:l},{default:$(()=>[k(d,{size:e.size},{default:$(()=>[k(ul)]),_:1},8,["size"]),E("span",dl,[X(D(i(p))+" ",1),i(p)>=s?(u(),g("span",fl,"+")):I("",!0)])]),_:1})],512)}}}),vl={class:"flex items-center justify-between"},_l=A({__name:"PapawOptionsButtons",props:{event:null,deleteEvent:null},setup(e){const t=e,{event:n,deleteEvent:o}=U(t),r=se();Ve(),Kn();const l=O(18);return(s,a)=>{const c=ee,v=ve,p=Ue;return u(),g("div",vl,[k(p,{class:"flex justify-around py-4 box-border"},{default:$(()=>[k(pl,{size:l.value,event:i(n)},null,8,["size","event"]),k(v,{text:"",onClick:a[0]||(a[0]=()=>i(r).error(i(M)("not_implemented")))},{default:$(()=>[k(c,{size:l.value},{default:$(()=>[k(Gs)]),_:1},8,["size"])]),_:1})]),_:1}),k(sl,{size:l.value,event:i(n)},null,8,["size","event"])])}}}),hl=A({__name:"PapawSourceUrl",props:{event:null},setup(e){const n=ye(e,"event"),o=z(()=>ue(n.value.id)),r=O(!1),l=Ie();function s(){l.push({name:"relays"})}return(a,c)=>{const v=ve,p=l1;return u(),g(Y,null,[E("div",{class:"flex",onClick:c[0]||(c[0]=()=>r.value=!r.value)},[(u(!0),g(Y,null,le(i(o),f=>(u(),g("div",{class:"h-2 w-2 rounded-full mr-1",style:oe({backgroundColor:i(_o)(f)})},null,4))),256))]),k(Tt,{show:r.value,"onUpdate:show":c[1]||(c[1]=f=>r.value=f),height:"100%",closable:""},{header:$(()=>[k(p,{show:i(Pt).hasChange()},{default:$(()=>[k(v,{onClick:s,type:"primary"},{default:$(()=>[X(D(i(M)("save")),1)]),_:1})]),_:1},8,["show"])]),default:$(()=>[k(Gn,null,{default:$(()=>{var f;return[k(qn,{urls:(f=i(o))!=null?f:[],title:""},{right:$(({url:y})=>[k(In,{url:y},null,8,["url"])]),_:1},8,["urls"])]}),_:1})]),_:1},8,["show"])],64)}}}),ml=E("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},[E("g",{fill:"none"},[E("path",{d:"M6.75 10a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0zm5 0a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0zM15 11.75a1.75 1.75 0 1 0 0-3.5a1.75 1.75 0 0 0 0 3.5z",fill:"currentColor"})])],-1),yl=A({__name:"MoreIcon",setup(e){return(t,n)=>(u(),C(i(ee),null,{default:$(()=>[ml]),_:1}))}}),pt=Symbol();function wl(e=mn()){return vn(pt,()=>{const t=new _n.exports.EventEmitter,r=fe({emitRichTextEditBox:function(l,...s){t.emit(l,...s)},onRichTextEditBox:function(s,a){t.on(s,a)},id:e});return hn(pt,r),r},!0)}function xr(e,t,n){const o=se();de(e,"dragenter",l=>{l.stopPropagation(),l.preventDefault()}),de(e,"dragover",l=>{l.stopPropagation(),l.preventDefault()}),de(e,"dragleave",l=>{l.stopPropagation(),l.preventDefault()}),de(e,"drop",l=>{var s;l.stopPropagation(),l.preventDefault(),l.dataTransfer&&r((s=l.dataTransfer)==null?void 0:s.files)});function r(l){if(l.length>1)return o.info("\u4E00\u6B21\u53EA\u5141\u8BB8\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6");var s=l[0];t(s)}}function kr(e,t){function n(o){var r=o.clipboardData&&o.clipboardData.items,l=null;if(r&&r.length){for(var s=0;s<r.length;s++)if(r[s].type.indexOf("image")!==-1){l=r[s].getAsFile();break}}!l||t(l)}de(e,"paste",n)}const[$r,gl]=ge(()=>{const e=O([]);return{insertDropdownOptionOptList:e,insertDropdownOption(t){e.value.push(t)},runInsertDropdown(t,n){for(const o of e.value){n[o.key]=o.handle;const r=t.findIndex(s=>s.key===o.insertKey),l={label:o.label,key:o.key};r>=0?t.splice(r,0,l):t.push(l)}}}}),bl=A({__name:"SMSButton",props:{event:null,deleteEvent:null,show:{type:Boolean}},async setup(e){let t,n;const o=e,r=se(),l=wl(),{event:s,deleteEvent:a}=U(o),c=O(""),{info:v}=se(),p=Xn(),f=En(o,"show"),y=Fe(),d=c1(),m=u1(),b=be(),x=Ve(),_=ce(j.MuteListSynchronizer),h=([t,n]=kt(()=>St(j.PinListSynchronizer)),t=await t,n(),t),S=gl(),w=d1(),B=O({pin:()=>{if(h.hasByEvent(s.value)){r.info(M("already_pinned_tip"));return}h.pin(s.value,{onOK:x}),r.info(M("request_initiated"))},close:()=>{f.value=!1},collect:()=>{w==null||w.collect(s.value)},editArticle:()=>{const T=Ge(s.value);if(!T){r.info("Identifier not found");return}bt.push({name:"markdown-editor",params:{value:T}})},deleteEvent:()=>{a.value(s.value.id),v(M("you_have_sent_a_delete_request"))},joinTheBlacklist(){R({title:M("hide_list"),ignoreContent:s.value.content})},copyNevent(){const T=Ot(s.value);p(T)},copyNote(){const T=he.noteEncode(s.value.id);p(T)},copyNaddr(){const T=Ge(s.value);if(!T){r.info("Identifier not found");return}p(T)},copyHexPubkey(){p(s.value.pubkey)},recommendUser(){d(s.value.pubkey)},recommendEvent(){y(s.value)},recommendUserMetadata(){m(s.value.pubkey)},muteUser(){_.addPubkey(s.value.pubkey,{onOK:x})},pushShortTextNote(){b(s.value)},reply(){l.emitRichTextEditBox("reply",s.value)},mention(){l.emitRichTextEditBox("mention",s.value)}}),P=T=>{const J=B.value[T];J||r.error("Not found"),J(s.value)},{addRule:R}=Qn(),W=Jn(),V=z(()=>{const T=[{label:M("close"),value:"close",key:"close"},...s.value.pubkey===W.value?[...s.value.kind===30023?[{label:M("edit"),value:"editArticle",key:"editArticle"}]:[],{label:M("delete_event"),value:"deleteEvent",key:"deleteEvent"}]:[{label:M("hide"),value:"joinTheBlacklist",key:"joinTheBlacklist"},{label:M("mute_user"),value:"muteUser",key:"muteUser"}],{label:M("collect"),value:"collect",key:"collect"},{label:M("open"),value:"pushShortTextNote",key:"pushShortTextNote"},{label:M("reply"),value:"reply",key:"reply"},{label:M("mention"),value:"mention",key:"mention"},{label:M("pin"),value:"pin",key:"pin"},{label:`${M("copy")} Nevent`,value:"copyNevent",key:"copyNevent"},{label:`${M("copy")} Note`,value:"copyNote",key:"copyNote"},...s.value.kind>=3e4&&s.value.kind<4e4?[{label:`${M("copy")} Naddr`,value:"copyNaddr",key:"copyNaddr"}]:[],{label:`${M("copy")} Hex pubkey`,value:"copyHexPubkey",key:"copyHexPubkey"},{label:M("recommend_user"),value:"recommendUser",key:"recommendUser"},{label:M("recommend_event"),value:"recommendEvent",key:"recommendEvent"},{label:M("recommend_metadata"),value:"recommendUserMetadata",key:"recommendUserMetadata"}];return S==null||S.runInsertDropdown(T,B.value),T});return O(null),zn(f),(T,J)=>{const Kt=ee,qt=ve,Gt=e1;return u(),g("div",null,[k(Gt,{onSelect:P,value:c.value,"onUpdate:value":J[1]||(J[1]=Yt=>c.value=Yt),options:i(V),trigger:"manual",show:i(f)},{default:$(()=>[k(qt,{quaternary:"",circle:"",onClick:J[0]||(J[0]=()=>f.value=!i(f))},{default:$(()=>[k(Kt,null,{default:$(()=>[k(yl)]),_:1})]),_:1})]),_:1},8,["value","options","show"])])}}}),xl=["src"],kl={class:"flex-grow flex-shrink"},$l={class:"ml-4"},El={class:"flex-grow-0 flex-shrink-0"},zl=A({__name:"UserInfo",props:{pubkey:null,created_at:null,event:null},setup(e){const t=e,{pubkey:n,created_at:o}=U(t),r=ce(j.UserApi),l=z(()=>t.event&&Ht(t.event)),[s,a,c]=je(()=>r.getUserMetadataLineByPubkey(n.value,{urls:l.value}).feat.useMetadata()),v=z(()=>s.value),p=Ie();function f(d){var m;p.push(`/profile/${he.nprofileEncode({pubkey:d,relays:[...(m=l.value)!=null?m:[]]})}`)}const y=z(()=>{var d;if(!v.value)return n.value.slice(0,10);for(const m of["name","display_name","displayName","username"]){const b=v.value[m];if((d=b==null?void 0:b.length)!=null?d:0>0)return b}return n.value.slice(0,10)});return(d,m)=>{var b,x;return u(),g("div",{class:"flex items-center cursor-pointer w-full",ref_key:"target",ref:a},[E("img",{class:"h-12 w-12 bg-white rounded-full flex-grow-0 flex-shrink-0",src:(x=(b=i(v))==null?void 0:b.picture)!=null?x:i(t1),onClick:m[0]||(m[0]=()=>f(i(n)))},null,8,xl),E("div",kl,[E("div",{class:"font-bold ml-4",onClick:m[1]||(m[1]=()=>f(i(n)))},[k(n1,null,{default:$(()=>[X(D(i(y)),1)]),_:1})]),E("div",$l,[q(d.$slots,"bottom",{userInfo:i(v)})])]),E("div",El,[q(d.$slots,"right",{userInfo:i(v)})])],512)}}}),Sl=["id"],Cl={class:"mx-3 my-3"},Pl={class:"my-2"},Rl=A({__name:"PapawWarp",props:{event:null,deleteEvent:null,withPapawOptionsButtons:{type:Boolean,default:!0},disabledReply:{type:Boolean}},emits:["update:showSMS"],setup(e,{emit:t}){var B;const n=e,[o,r]=He(void 0,{preloadDistance:0}),{event:l,deleteEvent:s}=U(n),a=O(!1),c=O(!1);function v(){c.value=!c.value,a.value=!0}const p=O(),f=be(),{isPress:y}=Sn(p,()=>{f(l.value)}),d=Cn(),m=async()=>{var W,V,T;const P=o.value;if(!P||!d)return;const R=P.getBoundingClientRect();r.value=!0,await wn(0),(T=d.scrollbarInst.value)==null||T.scrollBy({top:R.top-((V=(W=d.containerRef.value)==null?void 0:W.getBoundingClientRect().top)!=null?V:0),behavior:"smooth"}),S()},b=(B=js())==null?void 0:B.jumpList;b==null||b.value.push(m);const x=Ns(),_=z(()=>{const P=x==null?void 0:x.focusEvent.value;return P?P.id===l.value.id:!1});yt(()=>{_.value&&m()}),L(r,()=>{if(r.value){if(!(b!=null&&b.value))return;gn(b.value,m)}});const h=O(!1);function S(){h.value=!0,setTimeout(()=>{h.value=!1},1e3)}function w(P){var R;(R=s==null?void 0:s.value)==null||R.call(s,P)}return(P,R)=>(u(),g("div",{class:"mt-4",ref_key:"target",ref:o},[k(Vs,{delay:i(qe).lazyDelayForPapaw,disabled:!i(qe).lazyDelayForPapaw,minHeight:200},{default:$(()=>[k(Un,null,{default:$(({id:W})=>{var V;return[yn((u(),g("div",{class:Le(["w-max-full rounded-2xl bg-[#dfe4ea55] overflow-hidden relative transition",{twinkle:h.value,["bg-[#dfe4eabb]"]:i(y)}]),onMousedownPassive:R[0]||(R[0]=_e(()=>{},["stop"])),onTouchstartPassive:R[1]||(R[1]=_e(()=>{},["stop"])),onClickPassive:R[2]||(R[2]=_e(()=>{},["stop"]))},[E("div",{id:W,class:"relative overflow-hidden rounded-xl"},[q(P.$slots,"header"),E("div",Cl,[k(zl,{pubkey:i(l).pubkey,created_at:i(l).created_at,event:i(l)},{bottom:$(()=>[k(Mt,{secondTimestamp:i(l).created_at},null,8,["secondTimestamp"])]),right:$(()=>[k(bl,{show:c.value,event:i(l),deleteEvent:w},null,8,["show","event"])]),_:1},8,["pubkey","created_at","event"]),E("div",{class:"my-4 font",ref_key:"contentRef",ref:p},[q(P.$slots,"default")],512),E("div",Pl,[(V=e.withPapawOptionsButtons)==null||V?(u(),C(_l,{key:0,event:i(l)},null,8,["event"])):I("",!0),k(hl,{event:i(l)},null,8,["event"])])])],8,Sl),k(Dt,null,{default:$(()=>[q(P.$slots,"reply")]),_:3})],34)),[[i(hs),[v,{modifiers:{stop:!0}}],void 0,{stop:!0}]])]}),_:3})]),_:3},8,["delay","disabled"])],512))}}),Ol={key:1},Bl={key:2},Ml={key:3},Al={key:4},Tl=A({__name:"Papaw",props:{event:null,deleteEvent:null,withPapawOptionsButtons:{type:Boolean,default:!0},disabledReply:{type:Boolean}},setup(e){const t=e,{event:n,deleteEvent:o}=U(t);function r(c){var v;(v=o==null?void 0:o.value)==null||v.call(o,c)}const l=O(),s=z(()=>n.value.kind),a=z(()=>n.value.content);return(c,v)=>(u(),C(Rl,Te({contentRef:l.value,onHandelDeleteEvent:r},c.$props,{withPapawOptionsButtons:e.withPapawOptionsButtons&&(i(s)===1||i(s)===42)}),{default:$(()=>[i(s)===1||i(s)===42?(u(),C(zo,{key:0,event:i(n),disabledReply:e.disabledReply},null,8,["event","disabledReply"])):i(s)===3?(u(),g("span",Ol,D(i(M)("the_user_has_followed_you")),1)):i(s)===7?(u(),g("span",Bl,[k(Pe,{events:[],size:20,reaction:i(a),active:!0},null,8,["reaction"]),e.disabledReply?I("",!0):(u(),C(Vt,{key:0,event:i(n)},null,8,["event"]))])):i(s)===30023?(u(),g("span",Ml,[k(Ro,{event:i(n)},null,8,["event"])])):(u(),g("span",Al,D(i(n).content),1))]),reply:$(()=>[q(c.$slots,"reply",{},void 0,!0)]),_:3},16,["contentRef","withPapawOptionsButtons"]))}});const Wt=H(Tl,[["__scopeId","data-v-4e4b6d44"]]);export{zo as C,Wt as P,i1 as _,l1 as a,kr as b,xr as c,Vt as d,vo as e,Ns as f,js as g,wr as h,$r as i,c1 as j,u1 as k,yl as l,zl as m,yr as n,gr as o,Se as p,Dt as q,hr as r,Fe as s,mr as t,wl as u,br as v};
