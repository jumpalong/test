import{f as R,bT as O,o as r,db as P,dc as C,F as n,A as l,B,dd as D,J as y,aB as F,de as $,df as j,V as b,dg as V,L as m,D as x,O as z,M as I,dh as M,ad as N,cX as T,cn as U,Q as q,di as G,dj as J}from"./index.ddbfeb2e.js";import{_ as Q}from"./PapawList.vue_vue_type_script_setup_true_lang.876524d1.js";const X=R({__name:"PapawByAddr",props:{naddr:null,a:null},setup(o){const g=o,{naddr:v,a:u}=O(g),s=r(()=>v!=null&&v.value?P(v.value):u!=null&&u.value?P(u.value):null),i=r(()=>s.value&&C(s.value)),d=r(()=>i.value&&i.value.feat.getLatestEvent());return(_,f)=>n(d)?(l(),B(D,{key:0,event:n(d)},null,8,["event"])):y("",!0)}}),H={key:0,class:"py-20 flex items-center justify-center"},K={key:1,class:"h-40 flex justify-center items-center"},Z=R({__name:"PostList",props:{urls:null,pubkeys:null,filter:null,filters:null,pushEvent:null,active:{type:Boolean,default:!0},disabledLoad:{type:Boolean},disabledEmpty:{type:Boolean},limit:null,reverseSort:{type:Boolean},disabledReply:{type:Boolean},tags:null},emits:["update:pushEvent"],setup(o,{expose:g,emit:v}){const u=o;logger.for("home.vue").for("PostList.vue").info("\u8FDB\u5165PostList.vue");const{pubkeys:s,filter:i,filters:d,urls:_,active:f}=O(u);F(),logger.for("home.vue").for("PostList.vue").debug("defineProps > pubkey:",s);const L=r(()=>{const e=d!=null&&d.value?[...d.value]:[];return i!=null&&i.value&&e.push(i.value),s!=null&&s.value&&e.push(...s.value.map(t=>({kinds:[30023,1],authors:[t]}))),e}),S=r(()=>{var e;return[...(e=s==null?void 0:s.value)!=null?e:[],...L.value.map(t=>{var h;return(h=t.authors)!=null?h:[]}).flat(1)]}),p=r(()=>{const e={};if(L.value.length===0)return;const t=M({filters:L.value,...e,addUrls:_==null?void 0:_.value,pubkeys:S.value,limit:u.limit});return u.reverseSort&&t.addStaffOfSortByCreateAt(),t}),w=$(p,f);j(()=>{var e;(e=p.value)==null||e.closeReq()});const c=r(()=>{var e;return(e=p.value)==null?void 0:e.getList()});v("update:pushEvent",e=>{var t;(t=p.value)==null||t.pushEvent(e)});const k=r(()=>{var e,t;return((e=p.value)==null?void 0:e.feat.loadBufferOpt.isLoading)||((t=p.value)==null?void 0:t.feat.refreshBufferOpt.isLoading)});g({postEvents:c,...w});const E=b(void 0);return V(E,{active:f!=null?f:b(!0)}),b(N()),(e,t)=>{const h=T,A=U;return l(),m("div",{ref_key:"divRef",ref:E},[!o.disabledLoad&&n(k)&&n(c)&&n(c).length===0?(l(),m("div",H,[x(h,{size:"medium"})])):!o.disabledEmpty&&!n(k)&&n(c)&&n(c).length===0?(l(),m("div",K,[x(A,{description:n(q)("empty_text"),size:"huge"},null,8,["description"])])):y("",!0),o.tags?(l(!0),m(z,{key:2},I(o.tags,a=>(l(),m("div",null,[a[0]==="e"&&a[1]?(l(),B(G,{key:0,id:a[1],relays:a[2]?new Set([a[2]]):void 0},null,8,["id","relays"])):a[0]==="a"&&a[1]?(l(),B(X,{key:1,a:a[1]},null,8,["a"])):y("",!0)]))),256)):y("",!0),n(c)?(l(),B(Q,{key:3,eventList:n(c),withPapawOptionsButtons:"",disabledReply:o.disabledReply,onEventDeletion:t[0]||(t[0]=a=>n(J)(a))},null,8,["eventList","disabledReply"])):y("",!0)],512)}}});export{Z as _};
