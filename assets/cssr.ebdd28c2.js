import{af as $,k as B,bf as G}from"./index.1b90d9b0.js";let W=[];const U=new WeakMap;function J(){W.forEach(t=>t(...U.get(t))),W=[]}function ne(t,...o){U.set(t,o),!W.includes(t)&&W.push(t)===1&&requestAnimationFrame(J)}function P(t){return t.composedPath()[0]}const K={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function Q(t,o,i){if(t==="mousemoveoutside"){const c=a=>{o.contains(P(a))||i(a)};return{mousemove:c,touchstart:c}}else if(t==="clickoutside"){let c=!1;const a=b=>{c=!o.contains(P(b))},d=b=>{!c||o.contains(P(b))||i(b)};return{mousedown:a,mouseup:d,touchstart:a,touchend:d}}return console.error(`[evtd/create-trap-handler]: name \`${t}\` is invalid. This could be a bug of evtd.`),{}}function z(t,o,i){const c=K[t];let a=c.get(o);a===void 0&&c.set(o,a=new WeakMap);let d=a.get(i);return d===void 0&&a.set(i,d=Q(t,o,i)),d}function V(t,o,i,c){if(t==="mousemoveoutside"||t==="clickoutside"){const a=z(t,o,i);return Object.keys(a).forEach(d=>{Z(d,document,a[d],c)}),!0}return!1}function X(t,o,i,c){if(t==="mousemoveoutside"||t==="clickoutside"){const a=z(t,o,i);return Object.keys(a).forEach(d=>{R(d,document,a[d],c)}),!0}return!1}function Y(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const t=new WeakMap,o=new WeakMap;function i(){t.set(this,!0)}function c(){t.set(this,!0),o.set(this,!0)}function a(n,e,r){const s=n[e];return n[e]=function(){return r.apply(n,arguments),s.apply(n,arguments)},n}function d(n,e){n[e]=Event.prototype[e]}const b=new WeakMap,M=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function I(){var n;return(n=b.get(this))!==null&&n!==void 0?n:null}function O(n,e){M!==void 0&&Object.defineProperty(n,"currentTarget",{configurable:!0,enumerable:!0,get:e!=null?e:M.get})}const k={bubble:{},capture:{}},m={};function N(){const n=function(e){const{type:r,eventPhase:s,bubbles:u}=e,p=P(e);if(s===2)return;const w=s===1?"capture":"bubble";let f=p;const l=[];for(;f===null&&(f=window),l.push(f),f!==window;)f=f.parentNode||null;const h=k.capture[r],v=k.bubble[r];if(a(e,"stopPropagation",i),a(e,"stopImmediatePropagation",c),O(e,I),w==="capture"){if(h===void 0)return;for(let g=l.length-1;g>=0&&!t.has(e);--g){const H=l[g],T=h.get(H);if(T!==void 0){b.set(e,H);for(const E of T){if(o.has(e))break;E(e)}}if(g===0&&!u&&v!==void 0){const E=v.get(H);if(E!==void 0)for(const _ of E){if(o.has(e))break;_(e)}}}}else if(w==="bubble"){if(v===void 0)return;for(let g=0;g<l.length&&!t.has(e);++g){const H=l[g],T=v.get(H);if(T!==void 0){b.set(e,H);for(const E of T){if(o.has(e))break;E(e)}}}}d(e,"stopPropagation"),d(e,"stopImmediatePropagation"),O(e)};return n.displayName="evtdUnifiedHandler",n}function y(){const n=function(e){const{type:r,eventPhase:s}=e;if(s!==2)return;const u=m[r];u!==void 0&&u.forEach(p=>p(e))};return n.displayName="evtdUnifiedWindowEventHandler",n}const j=N(),C=y();function x(n,e){const r=k[n];return r[e]===void 0&&(r[e]=new Map,window.addEventListener(e,j,n==="capture")),r[e]}function A(n){return m[n]===void 0&&(m[n]=new Set,window.addEventListener(n,C)),m[n]}function D(n,e){let r=n.get(e);return r===void 0&&n.set(e,r=new Set),r}function F(n,e,r,s){const u=k[e][r];if(u!==void 0){const p=u.get(n);if(p!==void 0&&p.has(s))return!0}return!1}function S(n,e){const r=m[n];return!!(r!==void 0&&r.has(e))}function q(n,e,r,s){let u;if(typeof s=="object"&&s.once===!0?u=h=>{L(n,e,u,s),r(h)}:u=r,V(n,e,u,s))return;const w=s===!0||typeof s=="object"&&s.capture===!0?"capture":"bubble",f=x(w,n),l=D(f,e);if(l.has(u)||l.add(u),e===window){const h=A(n);h.has(u)||h.add(u)}}function L(n,e,r,s){if(X(n,e,r,s))return;const p=s===!0||typeof s=="object"&&s.capture===!0,w=p?"capture":"bubble",f=x(w,n),l=D(f,e);if(e===window&&!F(e,p?"bubble":"capture",n,r)&&S(n,r)){const v=m[n];v.delete(r),v.size===0&&(window.removeEventListener(n,C),m[n]=void 0)}l.has(r)&&l.delete(r),l.size===0&&f.delete(e),f.size===0&&(window.removeEventListener(n,j,w==="capture"),k[w][n]=void 0)}return{on:q,off:L}}const{on:Z,off:R}=Y();function te(t,o){return $(t,i=>{i!==void 0&&(o.value=i)}),B(()=>t.value===void 0?o.value:t.value)}const{c:re}=G(),oe="vueuc-style";export{Z as a,ne as b,oe as c,re as d,R as o,te as u};
