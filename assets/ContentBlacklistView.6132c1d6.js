import{f as y,N as d,o as r,z as f,x as k,n as m,C as _,l as S,at as g,k as h,aj as D,h as C}from"./index.1b90d9b0.js";import{_ as b}from"./Input.6cd78f60.js";import{c as B,S as x}from"./Staff.e039c64f.js";const R={key:0,class:"w-full flex h-full"},w={key:0,class:"opacity-0"},E={key:1},V=y({__name:"DoubleClickToModifyInput",props:{value:null},emits:["updateValue","update:value"],setup(e,{emit:t}){const o=e,l=d(!0),i=d(null);function n(){l.value=!1,setTimeout(()=>{var a;(a=i.value)==null||a.focus()},10)}return(a,u)=>{const s=b;return r(),f("div",{class:"w-full flex h-full",onDblclick:n},[l.value?(r(),f("div",R,[o.value===""||o.value===void 0?(r(),f("span",w,k(m(_)("empty_text")),1)):(r(),f("span",E,k(o.value),1))])):(r(),S(s,{key:1,ref_key:"inputRef",ref:i,autofocus:"",value:o.value,onUpdateValue:u[0]||(u[0]=c=>{t("update:value",c),t("updateValue",c)}),onBlur:u[1]||(u[1]=()=>l.value=!0)},null,8,["value"]))],32)}}}),p=g("black-data",[]);function j(){return B({push(e){if(p.value.some(t=>t.ignoreContent?e.content.includes(t.ignoreContent):!1))return x.BREAK}})}let I=h(()=>p.value.reduce((e,t)=>t.key>e?t.key:e,0));function K(){function e(t){p.value.push(D(t,{key:Number(I.value)+1,title:"",ignoreContent:""}))}return{blackData:p,addRule:e}}function z(){const{blackData:e,addRule:t}=K(),o=()=>[{type:"selection",options:[{label:"\u53CD\u9009",key:"ReverseSelection",onSelect:n=>{l.value=n.filter(a=>!l.value.includes(a.key)).map(a=>a.key)}},{label:"\u5220\u9664\u9009\u4E2D\u9879",key:"delete",onSelect:n=>{l.value.forEach(a=>{const u=e.value.findIndex(s=>s.key===a);u!==-1&&e.value.splice(u,1)})}}]},...["key","title","ignoreContent"].map(n=>{const a=n;return{title:n,key:n,render(s,c){return C(V,{value:String(s[a]),onClick(){c===e.value.length-1&&t()},onUpdateValue(v){e.value[c][a]=v}})}}})],l=d([]),i=o();return e.value.length===0&&t(),{checkedRowKeys:l,columns:i}}export{z as a,j as c,K as u};
