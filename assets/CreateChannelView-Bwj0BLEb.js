import{r as d,u,p as s,ah as _,E as f,m as h,af as g}from"./ProvideEventLine-XLCKst21.js";import{_ as y}from"./ChannelMetadataEdit.vue_vue_type_script_setup_true_lang-B3xeaj8T.js";import{f as C,S as L,L as v,o as S,m as w,w as m,n as p,q as M,y as b,z as E}from"./index-Bp8Ru9nj.js";import{b as N}from"./Button-DF3Ei97P.js";import{_ as k}from"./Space-D7Gj9TeE.js";import"./utils-Bn9avYFz.js";import"./UploadButton.vue_vue_type_script_setup_true_lang-B-a4j7e_.js";import"./is-browser-Ki2-8vi-.js";import"./Icon-C2DldZ3i.js";import"./Add-b3eAxPp_.js";import"./use-rtl-gkSu3eK_.js";import"./format-length-B-p6aW7q.js";import"./Warning-BHWEvLya.js";import"./replaceable-B2OdU2Vz.js";import"./use-css-vars-class-DV7GkkKb.js";import"./Image-4WjrfnRr.js";import"./utils-BfSW-vXT.js";import"./Scrollbar-Bcd6cbpf.js";import"./fade-in-scale-up.cssr-YaysNU6q.js";import"./use-locale-DHyx6amc.js";import"./Follower-BLKhK3H2.js";import"./Tooltip-CWAJuqVc.js";import"./Popover-CWXHRS55.js";import"./use-compitable-BZNVtFY-.js";import"./download-sglA049O.js";import"./Input-uRxkwxbK.js";import"./index-vZmvdULR.js";import"./fade-in-height-expand.cssr-BOUpW_kQ.js";import"./Icon-BUbDyWQc.js";import"./get-slot-Bk_rJcZu.js";const ot=C({__name:"CreateChannelView",setup(x){const a=L(),c=d();let n=u(s.ListSynchronizerManager.Staff,_);const i=v({});async function l(){if(!i.value.name){a.warning("请输入channelName");return}const t=n.createChild().add(f,h,g);let e=await t.createEvent({kind:40,content:JSON.stringify(i.value)});t.addPublish(e,{onOK:c}),t.initedAddWrite();let r=(await n.relayConfigurator.initedGetReadList()).values().next().value;e?(n.listSynchronizerManager.getInitStandardListSynchronizer(s.ListEnum.PublicChats).add({type:"e",id:e.id,relay:r}),a.success("创建成功")):a.warning("没有创建成功")}return(t,e)=>{const o=N,r=k;return S(),w(r,{vertical:""},{default:m(()=>[p(y,{channelMetadata:M(i)},null,8,["channelMetadata"]),p(o,{onClick:l},{default:m(()=>[b(E(t.t("create")),1)]),_:1})]),_:1})}}});export{ot as default};
