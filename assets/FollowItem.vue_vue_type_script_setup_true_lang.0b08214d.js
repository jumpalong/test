import{T as Q}from"./nostr.c03670ae.js";import{q as X,A as J}from"./use.b23b6c29.js";import{p as Z}from"./profile-2-400x400.3309f571.js";import{E as B}from"./Ellipsis.021c946e.js";import{i as P,o as ee}from"./utils.e1137b57.js";import{t as oe}from"./Tag.7e30ed31.js";import{i as re,c as N,aP as te,b as w,aQ as ne,d as V,f as K,u as ae,N as S,j as H,k as x,g as U,dw as se,af as ie,a4 as le,_ as de,O as ce,h as C,aL as ue,o as I,l as M,w as T,au as $,m as A,n as l,v as W,x as G,y as fe,r as me}from"./index.8f62a545.js";import{c as ve}from"./create-key.7b548031.js";import{u as he}from"./use-css-vars-class.1ada0b07.js";import{d as ge}from"./Button.22997a19.js";import{a as pe,r as be}from"./Loading.0b953150.js";import{V as ye}from"./Scrollbar.8d5a1903.js";import{a as ze}from"./ListItem.5a517004.js";const _e=re("n-avatar-group"),xe=N("avatar",`
 width: var(--n-merged-size);
 height: var(--n-merged-size);
 color: #FFF;
 font-size: var(--n-font-size);
 display: inline-flex;
 position: relative;
 overflow: hidden;
 text-align: center;
 border: var(--n-border);
 border-radius: var(--n-border-radius);
 --n-merged-color: var(--n-color);
 background-color: var(--n-merged-color);
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[te(w("&","--n-merged-color: var(--n-color-modal);")),ne(w("&","--n-merged-color: var(--n-color-popover);")),w("img",`
 width: 100%;
 height: 100%;
 `),V("text",`
 white-space: nowrap;
 display: inline-block;
 position: absolute;
 left: 50%;
 top: 50%;
 `),N("icon",`
 vertical-align: bottom;
 font-size: calc(var(--n-merged-size) - 6px);
 `),V("text","line-height: 1.25")]),ke=Object.assign(Object.assign({},U.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),Re=K({name:"Avatar",props:ke,setup(r){const{mergedClsPrefixRef:h,inlineThemeDisabled:i}=ae(r),d=S(!1);let g=null;const z=S(null),f=S(null),k=()=>{const{value:e}=z;if(e&&(g===null||g!==e.innerHTML)){g=e.innerHTML;const{value:o}=f;if(o){const{offsetWidth:s,offsetHeight:t}=o,{offsetWidth:u,offsetHeight:j}=e,E=.9,O=Math.min(s/u*E,t/j*E,1);e.style.transform=`translateX(-50%) translateY(-50%) scale(${O})`}}},c=H(_e,null),n=x(()=>{const{size:e}=r;if(e)return e;const{size:o}=c||{};return o||"medium"}),m=U("Avatar","-avatar",xe,se,r,h),p=H(oe,null),b=x(()=>{if(c)return!0;const{round:e,circle:o}=r;return e!==void 0||o!==void 0?e||o:p?p.roundRef.value:!1}),y=x(()=>c?!0:r.bordered||!1),v=e=>{var o;if(!_.value)return;d.value=!0;const{onError:s,imgProps:t}=r;(o=t==null?void 0:t.onError)===null||o===void 0||o.call(t,e),s&&s(e)};ie(()=>r.src,()=>d.value=!1);const R=x(()=>{const e=n.value,o=b.value,s=y.value,{color:t}=r,{self:{borderRadius:u,fontSize:j,color:E,border:O,colorModal:D,colorPopover:Y},common:{cubicBezierEaseInOut:q}}=m.value;let F;return typeof e=="number"?F=`${e}px`:F=m.value.self[ve("height",e)],{"--n-font-size":j,"--n-border":s?O:"none","--n-border-radius":o?"50%":u,"--n-color":t||E,"--n-color-modal":t||D,"--n-color-popover":t||Y,"--n-bezier":q,"--n-merged-size":`var(--n-avatar-size-override, ${F})`}}),a=i?he("avatar",x(()=>{const e=n.value,o=b.value,s=y.value,{color:t}=r;let u="";return e&&(typeof e=="number"?u+=`a${e}`:u+=e[0]),o&&(u+="b"),s&&(u+="c"),t&&(u+=ge(t)),u}),R,r):void 0,_=S(!r.lazy);le(()=>{if(P)return;let e;const o=de(()=>{e==null||e(),e=void 0,r.lazy&&(e=ee(f.value,r.intersectionObserverOptions,_))});ce(()=>{o(),e==null||e()})});const L=S(!r.lazy);return{textRef:z,selfRef:f,mergedRoundRef:b,mergedClsPrefix:h,fitTextTransform:k,cssVars:i?void 0:R,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender,hasLoadError:d,handleError:v,shouldStartLoading:_,loaded:L,mergedOnLoad:e=>{var o;const{onLoad:s,imgProps:t}=r;s==null||s(e),(o=t==null?void 0:t.onLoad)===null||o===void 0||o.call(t,e),L.value=!0}}},render(){var r,h;const{$slots:i,src:d,mergedClsPrefix:g,lazy:z,onRender:f,mergedOnLoad:k,shouldStartLoading:c,loaded:n,hasLoadError:m}=this;f==null||f();let p;const b=!n&&!m&&(this.renderPlaceholder?this.renderPlaceholder():(h=(r=this.$slots).placeholder)===null||h===void 0?void 0:h.call(r));return this.hasLoadError?p=this.renderFallback?this.renderFallback():pe(i.fallback,()=>[C("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})]):p=be(i.default,y=>{if(y)return C(ye,{onResize:this.fitTextTransform},{default:()=>C("span",{ref:"textRef",class:`${g}-avatar__text`},y)});if(d){const{imgProps:v}=this;return C("img",Object.assign(Object.assign({},v),{loading:P&&!this.intersectionObserverOptions&&z?"lazy":"eager",src:P||c||n?d:void 0,onLoad:k,"data-image-src":d,onError:this.handleError,style:[v==null?void 0:v.style,{objectFit:this.objectFit},b?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}}),C("span",{ref:"selfRef",class:[`${g}-avatar`,this.themeClass],style:this.cssVars},p,z&&b)}}),Le={class:"flex flex-col ml-4 flex-1 shrink-1 w-full"},Se={class:"flex-shrink-0 ml-2"},Ie=K({__name:"FollowItem",props:{pubkey:null,name:null,about:null},setup(r){const h=r,{pubkey:i,name:d,about:g}=ue(h),z=X(Q.UserApi),[f,k]=J(()=>z.getUserMetadataLineByPubkey(i.value)),c=x(()=>{var n;return(n=f.value)==null?void 0:n.feat.useMetadata()});return(n,m)=>{const p=Re,b=ze;return I(),M(b,{class:"cursor-pointer overflow-hidden"},{default:T(()=>{var y,v,R;return[$("div",{ref_key:"target",ref:k,class:"flex items-center"},[A(p,{class:"ml-4",size:"small",src:(v=(y=l(c))==null?void 0:y.picture)!=null?v:l(Z),round:"",onClick:m[0]||(m[0]=()=>n.$router.push(`/profile/${l(i)}`))},null,8,["src"]),$("div",Le,[A(B,{class:"text-xl",onClick:m[1]||(m[1]=()=>n.$router.push(`/profile/${l(i)}`))},{default:T(()=>{var a,_,L;return[W(G((L=(_=l(d))!=null?_:(a=l(c))==null?void 0:a.name)!=null?L:l(i).slice(0,10)),1)]}),_:1}),(R=l(c))!=null&&R.about?(I(),M(B,{key:0,style:{fontSize:"10px"}},{default:T(()=>{var a;return[W(G((a=l(g))!=null?a:l(c).about),1)]}),_:1})):fe("",!0)]),$("div",Se,[me(n.$slots,"right",{pubkey:l(i)})])],512)]}),_:3})}}});export{Ie as _,Re as a};
