import{u as i,am as d,a1 as m,S as r,g as p,af as h}from"./ProvideEventLine-BcjESPsS.js";import{k as n,L as o,X as b,V as k,H as w,aX as y}from"./index-DVMYH3P6.js";function j(e){console.log("addressPointerLine:-2");const a=T(e);console.log("addressPointer",a);const t=L(a),s=n(()=>{var u;return(u=t.value)==null?void 0:u.getLatestEvent()});let l=M(s);return{markdownLine:t,addressPointer:a,event:s,markdownData:l}}function L(e){const a=i(d);return console.log("addressPointerLine:-1",e.value),n(()=>e.value&&a.addressPointerLine(e.value,{urls:new Set(e.value.relays)}))}function T(e){return n(()=>e.value?typeof e.value=="object"?e.value:m(e.value):null)}function M(e){return n(()=>{if(!e.value)return;const a={};a.content=e.value.content;for(const s of["title","summary","image"]){const l=r(s,e.value.tags);l&&l[1]&&(a[s]=l[1])}const t=r("published_at",e.value.tags);if(t&&t[1])try{a.publishedAt=parseInt(t[1])}catch{}return a.hashtags=e.value.tags.filter(s=>s[0]==="t"&&s[1]).map(s=>s[1]),a})}const[q,I]=p(e=>e);function N(){return o({bold:!1,italic:!1,header:!1,underline:!1,strikethrough:!1,mark:!1,superscript:!1,subscript:!1,quote:!1,ol:!1,ul:!1,link:!1,imagelink:!1,code:!1,table:!1,fullscreen:!0,readmodel:!0,htmlcode:!1,help:!1,undo:!1,redo:!1,trash:!1,save:!1,navigation:!1,alignleft:!1,aligncenter:!1,alignright:!1,subfield:!1,preview:!1})}function $(){const e=b();e.start();const a=k(),t=n(()=>a.query.new);return w(t,()=>{t.value&&e.finish()}),t}function B(){return o({content:"",title:"",publishedAt:y(),summary:"",image:"",hashtags:[]})}function R(e,a){let t=i(h);const s=n(()=>["title",e.value.title]),l=n(()=>["published_at",String(e.value.publishedAt)]),u=n(()=>["summary",e.value.summary]),c=n(()=>["image",e.value.image]),f=n(()=>["a",`${a.value.kind}:${a.value.pubkey}:${a.value.identifier}`]),v=n(()=>["d",a.value.identifier]);return n(()=>t.createEventTemplate({kind:a.value.kind,content:e.value.content,tags:[v.value,s.value,l.value,u.value,c.value,f.value,...e.value.hashtags.map(g=>["t",g])]}))}export{j as a,B as b,M as c,N as d,I as e,R as m,q as p,$ as u};
