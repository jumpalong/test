import{_ as y}from"./ChannelMetadataEdit.vue_vue_type_script_setup_true_lang.0a2126d3.js";import{q as i,g as w}from"./use.b23b6c29.js";import{f as M,an as B,k as o,N,af as S,o as O,l as k,w as l,m as p,v as x,x as L,n as b,D,C as F}from"./index.8f62a545.js";import{T as s}from"./nostr.c03670ae.js";import{e as R}from"./nostr.0043d5e6.js";import{_ as T}from"./Button.22997a19.js";import{_ as V}from"./Space.32f062de.js";import"./UploadInput.vue_vue_type_script_setup_true_lang.caf8a136.js";import"./UploadButton.vue_vue_type_script_setup_true_lang.a94967af.js";import"./CloudUpload.c28b341b.js";import"./Upload.39a290a3.js";import"./format-length.3612bbc8.js";import"./Icon.1c3d6ebf.js";import"./use-style.d8216a24.js";import"./Warning.6502c178.js";import"./replaceable.815b8f5c.js";import"./create-key.7b548031.js";import"./use-css-vars-class.1ada0b07.js";import"./is-browser.f4df612e.js";import"./RegExpUtils.102c01f0.js";import"./utils.e1137b57.js";import"./Scrollbar.8d5a1903.js";import"./use-rtl.6d35c504.js";import"./cssr.21c6f8e2.js";import"./fade-in-scale-up.cssr.5ebe4351.js";import"./use-locale.cbb1f83b.js";import"./Loading.0b953150.js";import"./Follower.7ba57362.js";import"./Tooltip.d86a0762.js";import"./Popover.6590eae2.js";import"./Input.90533fe2.js";import"./index.62f1e1b0.js";import"./Add.d66e299e.js";import"./Icon.904bc99e.js";import"./Upload.b5c9ebfa.js";import"./fade-in-height-expand.cssr.a4865c47.js";import"./Staff.e039c64f.js";import"./nostr.ad89cf30.js";import"./get-slot.4ceacf82.js";const Be=M({__name:"EditChannelView",setup(W){const u=B(),c=D(),_=o(()=>R(c.params.value)),a=o(()=>{var e;return(e=_.value)==null?void 0:e.id}),f=i(s.FollowChannelSynchronizer),n=i(s.RelayConfiguratorSynchronizer),v=i(s.CahnnelMessageBeltline),t=N({}),r=o(()=>{if(!!a.value)return v.getChannelMetadataBeltlineByChannelId(a.value)}),m=o(()=>{var e;return(e=r.value)==null?void 0:e.feat.useMetadata()});S(()=>m.value,()=>{Object.assign(t.value,m.value)},{deep:!0,immediate:!0});const d=w();function g(){if(!a.value)return;if(!t.value.name){u.warning("\u8BF7\u8F93\u5165channelName");return}if(!r.value)return;const e=[...n.getWriteList()][0];t.value.relayUrls=[...new Set([...n.getReadList(),...n.getWriteList()])],r.value.publish({kind:41,content:JSON.stringify(t.value),tags:[["e",a.value,e]]},n.getWriteList(),{onOK:d}),f.setChannelmetadata(a.value,t.value)}return(e,z)=>{const h=T,C=V;return O(),k(C,{vertical:""},{default:l(()=>[p(y,{channelMetadata:t.value},null,8,["channelMetadata"]),p(h,{onClick:g},{default:l(()=>[x(L(b(F)("save")),1)]),_:1})]),_:1})}}});export{Be as default};
