import{_ as h}from"./ChannelMetadataEdit.vue_vue_type_script_setup_true_lang-BAloEdh6.js";import{x as g,u as w,s as y,X as C,E as k,m as M,Q as O}from"./ProvideEventLine-BcjESPsS.js";import{f as S,S as b,V as E,k as n,L,H as N,o as x,m as B,w as p,n as u,q as V,y as I,z as K}from"./index-DVMYH3P6.js";import{b as Q}from"./Button-Czpa3xjC.js";import{_ as X}from"./Space-CvpcAwGw.js";import"./UploadInput.vue_vue_type_script_setup_true_lang-GWeWrTtb.js";import"./UploadButton.vue_vue_type_script_setup_true_lang-DLAEcrTL.js";import"./utils-BXkRfzfk.js";import"./is-browser-BikuuYFQ.js";import"./Icon-DjYnwRew.js";import"./Add-B8K751Td.js";import"./use-rtl-CqBkFAUg.js";import"./format-length-B-p6aW7q.js";import"./Warning-CFOd0oLB.js";import"./replaceable-DvMWTdGr.js";import"./use-css-vars-class-DpRsL9zm.js";import"./Image-Dkv-cPOO.js";import"./utils-ByHrdkP9.js";import"./Scrollbar-BXVF4b7l.js";import"./fade-in-scale-up.cssr-CUPxiz5B.js";import"./use-locale-CYSJLCZe.js";import"./Follower-R8EgPpAd.js";import"./Tooltip-BuuQH49V.js";import"./Popover-C3ccDlka.js";import"./use-compitable-CysNw4x-.js";import"./download-sglA049O.js";import"./Input-Bl1B22BO.js";import"./index-vZmvdULR.js";import"./fade-in-height-expand.cssr-JdnZy7mo.js";import"./Icon-affED87R.js";import"./get-slot-Bk_rJcZu.js";const _t=S({__name:"EditChannelView",setup(j){const c=b(),l=E(),o=n(()=>g(l.params.value)),e=n(()=>{var t;return(t=o.value)==null?void 0:t.id}),s=w(C),i=n(()=>{var t;return e.value&&s.getChannelMetadataByChannelId(e.value,{...(t=o.value)!=null&&t.relays?{urls:new Set(o.value.relays)}:{}})}),a=L({}),r=n(()=>i.value&&i.value.getMetadata());N(()=>r.value,()=>{Object.assign(a.value,r.value)},{deep:!0,immediate:!0});const d=y();async function v(){if(!e.value)return;if(!a.value.name){c.warning("请输入channelName");return}if(!r.value)return;const t=s.createChild().add(k,M,O.Staff),m=await t.createEvent({kind:41,content:JSON.stringify(a.value),tags:[["e",e.value]]});t.addPublish(m,{onOK:d}),t.initedAddWrite()}return(t,m)=>{const _=Q,f=X;return x(),B(f,{vertical:""},{default:p(()=>[u(h,{channelMetadata:V(a)},null,8,["channelMetadata"]),u(_,{onClick:v},{default:p(()=>[I(K(t.t("save")),1)]),_:1})]),_:1})}}});export{_t as default};
