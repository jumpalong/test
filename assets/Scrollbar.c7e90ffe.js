import{a as H,R as P}from"./LoadProgress.a8e5dee8.js";import{c as j,a as A,b as E,d as G}from"./use.b23b6c29.js";import{a6 as J,ag as T,an as U,n as u,C as B,f as $,aL as z,aM as q,am as R,_ as K,N as O,k as C,o as _,z as g,aD as y,m,w as x,y as N,au as Q,r as D,F as W,ae as X,aG as Z,aJ as ee}from"./index.8f62a545.js";import{N as te}from"./Icon.904bc99e.js";import{N as re}from"./Scrollbar.75edf2b0.js";const[ae,oe]=j(()=>{const o=new J.exports;return T(()=>{o.removeAllListeners()}),{on(e,a){return o.on(e,a),()=>this.removeListener(e,a)},emit(e){o.emit(e)},removeListener(e,a){o.removeListener(e,a)}}});function he(o,e){const a=U();H(o);const t=oe();t==null||t.on("load",()=>{!u(e)||n()}),t==null||t.on("refresh",()=>{!u(e)||s()});function n(){var r;(r=o.value)==null||r.feat.load(),a.info(B("loading"))}function s(){var r;(r=o.value)==null||r.feat.refresh(),a.info(B("refreshing"))}return{load:n,refresh:s}}const se=$({__name:"Refresh",props:{refreshable:{type:Boolean},loadable:{type:Boolean},triggerDistance:{default:150},maxShifting:{default:200},containerRef:null},emits:["refresh","load"],setup(o,{emit:e}){const a=o,{refreshable:t,loadable:n,containerRef:s,maxShifting:r}=z(a),{emit:i}=ae();function Y(){!(t!=null&&t.value)||(e("refresh"),i==null||i("refresh"))}function M(){!(n!=null&&n.value)||(e("load"),i==null||i("load"))}const{shifting:d,moveScale:fe,add:w,remake:V}=A(r);let p=null;const{x:ue,y:ie,arrivedState:l}=q(s),F=X(()=>{I(),b(),c.value=!0},500);R(s,"mousewheel",f=>{!(l.bottom||l.top)||(F(),w(-f.wheelDeltaY/3),c.value=!0)},{passive:!0}),R(s,"touchmove",f=>{if(!(l.bottom||l.top))return;const h=f.touches[0].clientY;!h||(p&&w(p-h),p=h,c.value=!1)},{passive:!0}),R(s,"touchend",f=>{!(l.bottom||l.top)||(I(),b(),c.value=!0)},{passive:!0}),K(()=>{l.bottom||l.top||(b(),c.value=!0)});function I(){Math.abs(d.value)>a.triggerDistance&&(d.value>0?M():d.value<0&&Y())}function b(){V(),p=null}const c=O(!1),S=E(),v=C(()=>{if(d.value<0&&l.top)return d.value;if(d.value>0){const f=S==null?void 0:S.containerRef.value;if(l.bottom||f&&f.offsetHeight===f.scrollHeight)return d.value}return 0});return(f,h)=>{const L=P,k=te;return _(),g(W,null,[u(t)?(_(),g("div",{key:0,class:"w-full h-20 flex items-center justify-center absolute",style:y({transform:`translate(0,calc(${-u(v)}px + -100%)) rotate(${-u(v)*10}deg)`,transition:c.value?"transform 0.5s":"",zIndex:1})},[m(k,{size:50},{default:x(()=>[m(L)]),_:1})],4)):N("",!0),Q("div",{class:"wraps flex flex-col h-full relative overflow-hidden",style:y({transform:`translate(0,calc(${-u(v)/4}px ))`,transition:c.value?"transform 0.3s":"",zIndex:0})},[D(f.$slots,"default")],4),u(n)?(_(),g("div",{key:1,class:"w-full h-20 flex items-center justify-center absolute bottom-0",style:y({transform:`translate(0px,calc(${-u(v)}px + 100%)) rotate(${-u(v)*10}deg)`,transition:c.value?"transform 0.3s":"",zIndex:1})},[m(k,{size:50},{default:x(()=>[m(L)]),_:1})],4)):N("",!0)],64)}}}),ne={class:"wraps flex flex-col h-full relative overflow-hidden"},le=$({__name:"Scrollbar",props:{refreshable:{type:Boolean},loadable:{type:Boolean},triggerDistance:null,maxShifting:null},emits:["refresh","load"],setup(o,{emit:e}){const a=o,t=C(()=>{var s;return(s=n.value)==null?void 0:s.scrollbarInstRef.containerRef}),{scrollbarInst:n}=G(t);return z(a),(s,r)=>{const i=re;return _(),g("div",ne,[m(se,Z({"container-ref":u(t)},a,{onLoad:r[1]||(r[1]=()=>e("load")),onRefresh:r[2]||(r[2]=()=>e("refresh"))}),{default:x(()=>[m(i,{class:"w-full flex-shrink flex-1",onScroll:r[0]||(r[0]=()=>{}),ref_key:"scrollbarInst",ref:n},{default:x(()=>[D(s.$slots,"default",{},void 0,!0)]),_:3},512)]),_:3},16,["container-ref"])])}}});const _e=ee(le,[["__scopeId","data-v-8d3d4c00"]]);export{_e as S,oe as a,he as u};
