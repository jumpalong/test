import{u as qe,m as Fe,G as ut,a as ct,O as $t,d as Pt,t as mt,T as qt}from"./ProvideEventLine-XLCKst21.js";import{_ as Ft}from"./NaddrLink.vue_vue_type_script_setup_true_lang-RPzJDFtp.js";import{_ as St}from"./TestNostrApi.vue_vue_type_script_setup_true_lang-Cbp_5dlV.js";import{_ as Ot}from"./Alert-CnSYdH84.js";import{j as he,G as At,H as pt,I as Nt,c as W,a as M,b as ae,i as Ke,f as D,u as Ge,g as Ve,J as gt,L as j,p as Ce,h as S,k,M as It,d as we,N as _e,O as Et,l as X,T as jt,P as tt,Q as Ie,t as Ct,o as J,m as se,w as R,q as L,E as ze,z as Z,n as $,B as ht,C as Mt,F as Vt,A as zt,y as me,r as H,R as Lt,S as Ye,U as Re}from"./index-Bp8Ru9nj.js";import{f as Wt,r as Bt,b as Le}from"./Button-DF3Ei97P.js";import{_ as vt}from"./Space-D7Gj9TeE.js";import{c as nt,r as Tt}from"./use-compitable-BZNVtFY-.js";import{u as Dt}from"./utils-Bn9avYFz.js";import{u as Ut}from"./use-rtl-gkSu3eK_.js";import{f as ee}from"./format-length-B-p6aW7q.js";import{k as pe}from"./keysOf-HiGXOwLp.js";import{g as bt,k as Me}from"./Popover-CWXHRS55.js";import{u as Ht}from"./use-css-vars-class-DV7GkkKb.js";import{_ as Je}from"./Input-uRxkwxbK.js";import{u as yt}from"./LoginCompleteHook-CDm8_idV.js";import{u as Kt}from"./composables-Den7Xj81.js";import{_ as Gt}from"./UserMetadataEditing.vue_vue_type_script_setup_true_lang-B7H0Mevv.js";import{_ as Yt,a as Jt}from"./Tabs-CYk6rFLk.js";import{_ as Zt}from"./LoginCard.vue_vue_type_script_setup_true_lang-qKgUXtDG.js";import{u as Qt}from"./LoginStepsView-CAAqhXc6.js";import"./naiveUi-DD7D_Mah.js";import"./Checkbox-Bvv02CAZ.js";import"./Scrollbar-Bcd6cbpf.js";import"./Icon-BUbDyWQc.js";import"./fade-in-height-expand.cssr-BOUpW_kQ.js";import"./index-vZmvdULR.js";import"./Close-sZEX0j0N.js";import"./Icon-C2DldZ3i.js";import"./Close-B84N3VcG.js";import"./replaceable-B2OdU2Vz.js";import"./Warning-BHWEvLya.js";import"./is-browser-Ki2-8vi-.js";import"./get-slot-Bk_rJcZu.js";import"./Follower-BLKhK3H2.js";import"./use-locale-DHyx6amc.js";import"./UploadButton.vue_vue_type_script_setup_true_lang-B-a4j7e_.js";import"./Add-b3eAxPp_.js";import"./Image-4WjrfnRr.js";import"./utils-BfSW-vXT.js";import"./fade-in-scale-up.cssr-YaysNU6q.js";import"./Tooltip-CWAJuqVc.js";import"./download-sglA049O.js";import"./render-n15ElYMw.js";import"./omit-DbnPTcif.js";import"./Favicon-ZYZOVOsJ.js";import"./Scrollbar-D8p4HDwI.js";import"./ReloadCircleSharp-DAOD49WP.js";import"./Scrollbar-DlbzZyTV.js";import"./Card-z75eEPHe.js";function Xt(i,e,n){var r;const a=he(i,null);if(a===null)return;const s=(r=At())===null||r===void 0?void 0:r.proxy;pt(n,o),o(n.value),Nt(()=>{o(void 0,n.value)});function o(d,u){if(!a)return;const g=a[e];u!==void 0&&l(g,u),d!==void 0&&f(g,d)}function l(d,u){d[u]||(d[u]=[]),d[u].splice(d[u].findIndex(g=>g===s),1)}function f(d,u){d[u]||(d[u]=[]),~d[u].findIndex(g=>g===s)||d[u].push(s)}}const en=W("form",[M("inline",`
 width: 100%;
 display: inline-flex;
 align-items: flex-start;
 align-content: space-around;
 `,[W("form-item",{width:"auto",marginRight:"18px"},[ae("&:last-child",{marginRight:0})])])]),Se=Ke("n-form"),wt=Ke("n-form-item-insts");var tn=function(i,e,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{d(r.next(u))}catch(g){o(g)}}function f(u){try{d(r.throw(u))}catch(g){o(g)}}function d(u){u.done?s(u.value):a(u.value).then(l,f)}d((r=r.apply(i,e||[])).next())})};const nn=Object.assign(Object.assign({},Ve.props),{inline:Boolean,labelWidth:[Number,String],labelAlign:String,labelPlacement:{type:String,default:"top"},model:{type:Object,default:()=>{}},rules:Object,disabled:Boolean,size:String,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:!0},onSubmit:{type:Function,default:i=>{i.preventDefault()}},showLabel:{type:Boolean,default:void 0},validateMessages:Object}),_t=D({name:"Form",props:nn,setup(i){const{mergedClsPrefixRef:e}=Ge(i);Ve("Form","-form",en,gt,i,e);const n={},r=j(void 0),a=f=>{const d=r.value;(d===void 0||f>=d)&&(r.value=f)};function s(f,d=()=>!0){return tn(this,void 0,void 0,function*(){return yield new Promise((u,g)=>{const h=[];for(const w of pe(n)){const c=n[w];for(const m of c)m.path&&h.push(m.internalValidate(null,d))}Promise.all(h).then(w=>{const c=w.some(p=>!p.valid),m=[],b=[];w.forEach(p=>{var q,v;!((q=p.errors)===null||q===void 0)&&q.length&&m.push(p.errors),!((v=p.warnings)===null||v===void 0)&&v.length&&b.push(p.warnings)}),f&&f(m.length?m:void 0,{warnings:b.length?b:void 0}),c?g(m.length?m:void 0):u({warnings:b.length?b:void 0})})})})}function o(){for(const f of pe(n)){const d=n[f];for(const u of d)u.restoreValidation()}}return Ce(Se,{props:i,maxChildLabelWidthRef:r,deriveMaxChildLabelWidth:a}),Ce(wt,{formItems:n}),Object.assign({validate:s,restoreValidation:o},{mergedClsPrefix:e})},render(){const{mergedClsPrefix:i}=this;return S("form",{class:[`${i}-form`,this.inline&&`${i}-form--inline`],onSubmit:this.onSubmit},this.$slots)}});function oe(){return oe=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},oe.apply(this,arguments)}function rn(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,$e(i,e)}function Be(i){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Be(i)}function $e(i,e){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$e(i,e)}function an(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function je(i,e,n){return an()?je=Reflect.construct.bind():je=function(a,s,o){var l=[null];l.push.apply(l,s);var f=Function.bind.apply(a,l),d=new f;return o&&$e(d,o.prototype),d},je.apply(null,arguments)}function on(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function Te(i){var e=typeof Map=="function"?new Map:void 0;return Te=function(r){if(r===null||!on(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,a)}function a(){return je(r,arguments,Be(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),$e(a,r)},Te(i)}var sn=/%[sdj%]/g,ln=function(){};function De(i){if(!i||!i.length)return null;var e={};return i.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function B(i){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var a=0,s=n.length;if(typeof i=="function")return i.apply(null,n);if(typeof i=="string"){var o=i.replace(sn,function(l){if(l==="%%")return"%";if(a>=s)return l;switch(l){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch{return"[Circular]"}break;default:return l}});return o}return i}function fn(i){return i==="string"||i==="url"||i==="hex"||i==="email"||i==="date"||i==="pattern"}function O(i,e){return!!(i==null||e==="array"&&Array.isArray(i)&&!i.length||fn(e)&&typeof i=="string"&&!i)}function dn(i,e,n){var r=[],a=0,s=i.length;function o(l){r.push.apply(r,l||[]),a++,a===s&&n(r)}i.forEach(function(l){e(l,o)})}function rt(i,e,n){var r=0,a=i.length;function s(o){if(o&&o.length){n(o);return}var l=r;r=r+1,l<a?e(i[l],s):n([])}s([])}function un(i){var e=[];return Object.keys(i).forEach(function(n){e.push.apply(e,i[n]||[])}),e}var it=function(i){rn(e,i);function e(n,r){var a;return a=i.call(this,"Async Validation Error")||this,a.errors=n,a.fields=r,a}return e}(Te(Error));function cn(i,e,n,r,a){if(e.first){var s=new Promise(function(h,w){var c=function(p){return r(p),p.length?w(new it(p,De(p))):h(a)},m=un(i);rt(m,n,c)});return s.catch(function(h){return h}),s}var o=e.firstFields===!0?Object.keys(i):e.firstFields||[],l=Object.keys(i),f=l.length,d=0,u=[],g=new Promise(function(h,w){var c=function(b){if(u.push.apply(u,b),d++,d===f)return r(u),u.length?w(new it(u,De(u))):h(a)};l.length||(r(u),h(a)),l.forEach(function(m){var b=i[m];o.indexOf(m)!==-1?rt(b,n,c):dn(b,n,c)})});return g.catch(function(h){return h}),g}function mn(i){return!!(i&&i.message!==void 0)}function pn(i,e){for(var n=i,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function at(i,e){return function(n){var r;return i.fullFields?r=pn(e,i.fullFields):r=e[n.field||i.fullField],mn(n)?(n.field=n.field||i.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||i.fullField}}}function ot(i,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];typeof r=="object"&&typeof i[n]=="object"?i[n]=oe({},i[n],r):i[n]=r}}return i}var xt=function(e,n,r,a,s,o){e.required&&(!r.hasOwnProperty(e.field)||O(n,o||e.type))&&a.push(B(s.messages.required,e.fullField))},gn=function(e,n,r,a,s){(/^\s+$/.test(n)||n==="")&&a.push(B(s.messages.whitespace,e.fullField))},Ee,hn=function(){if(Ee)return Ee;var i="[a-fA-F\\d:]",e=function(_){return _&&_.includeBoundaries?"(?:(?<=\\s|^)(?="+i+")|(?<="+i+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",a=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+n+"$)|(?:^"+a+"$)"),o=new RegExp("^"+n+"$"),l=new RegExp("^"+a+"$"),f=function(_){return _&&_.exact?s:new RegExp("(?:"+e(_)+n+e(_)+")|(?:"+e(_)+a+e(_)+")","g")};f.v4=function(v){return v&&v.exact?o:new RegExp(""+e(v)+n+e(v),"g")},f.v6=function(v){return v&&v.exact?l:new RegExp(""+e(v)+a+e(v),"g")};var d="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",g=f.v4().source,h=f.v6().source,w="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",c="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",b="(?::\\d{2,5})?",p='(?:[/?#][^\\s"]*)?',q="(?:"+d+"|www\\.)"+u+"(?:localhost|"+g+"|"+h+"|"+w+c+m+")"+b+p;return Ee=new RegExp("(?:^"+q+"$)","i"),Ee},st={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},xe={integer:function(e){return xe.number(e)&&parseInt(e,10)===e},float:function(e){return xe.number(e)&&!xe.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!xe.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(st.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(hn())},hex:function(e){return typeof e=="string"&&!!e.match(st.hex)}},vn=function(e,n,r,a,s){if(e.required&&n===void 0){xt(e,n,r,a,s);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;o.indexOf(l)>-1?xe[l](n)||a.push(B(s.messages.types[l],e.fullField,e.type)):l&&typeof n!==e.type&&a.push(B(s.messages.types[l],e.fullField,e.type))},bn=function(e,n,r,a,s){var o=typeof e.len=="number",l=typeof e.min=="number",f=typeof e.max=="number",d=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,g=null,h=typeof n=="number",w=typeof n=="string",c=Array.isArray(n);if(h?g="number":w?g="string":c&&(g="array"),!g)return!1;c&&(u=n.length),w&&(u=n.replace(d,"_").length),o?u!==e.len&&a.push(B(s.messages[g].len,e.fullField,e.len)):l&&!f&&u<e.min?a.push(B(s.messages[g].min,e.fullField,e.min)):f&&!l&&u>e.max?a.push(B(s.messages[g].max,e.fullField,e.max)):l&&f&&(u<e.min||u>e.max)&&a.push(B(s.messages[g].range,e.fullField,e.min,e.max))},ce="enum",yn=function(e,n,r,a,s){e[ce]=Array.isArray(e[ce])?e[ce]:[],e[ce].indexOf(n)===-1&&a.push(B(s.messages[ce],e.fullField,e[ce].join(", ")))},wn=function(e,n,r,a,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||a.push(B(s.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(n)||a.push(B(s.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},y={required:xt,whitespace:gn,type:vn,range:bn,enum:yn,pattern:wn},_n=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n,"string")&&!e.required)return r();y.required(e,n,a,o,s,"string"),O(n,"string")||(y.type(e,n,a,o,s),y.range(e,n,a,o,s),y.pattern(e,n,a,o,s),e.whitespace===!0&&y.whitespace(e,n,a,o,s))}r(o)},xn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n)&&!e.required)return r();y.required(e,n,a,o,s),n!==void 0&&y.type(e,n,a,o,s)}r(o)},kn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(n===""&&(n=void 0),O(n)&&!e.required)return r();y.required(e,n,a,o,s),n!==void 0&&(y.type(e,n,a,o,s),y.range(e,n,a,o,s))}r(o)},Rn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n)&&!e.required)return r();y.required(e,n,a,o,s),n!==void 0&&y.type(e,n,a,o,s)}r(o)},$n=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n)&&!e.required)return r();y.required(e,n,a,o,s),O(n)||y.type(e,n,a,o,s)}r(o)},Pn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n)&&!e.required)return r();y.required(e,n,a,o,s),n!==void 0&&(y.type(e,n,a,o,s),y.range(e,n,a,o,s))}r(o)},qn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n)&&!e.required)return r();y.required(e,n,a,o,s),n!==void 0&&(y.type(e,n,a,o,s),y.range(e,n,a,o,s))}r(o)},Fn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(n==null&&!e.required)return r();y.required(e,n,a,o,s,"array"),n!=null&&(y.type(e,n,a,o,s),y.range(e,n,a,o,s))}r(o)},Sn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n)&&!e.required)return r();y.required(e,n,a,o,s),n!==void 0&&y.type(e,n,a,o,s)}r(o)},On="enum",An=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n)&&!e.required)return r();y.required(e,n,a,o,s),n!==void 0&&y[On](e,n,a,o,s)}r(o)},Nn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n,"string")&&!e.required)return r();y.required(e,n,a,o,s),O(n,"string")||y.pattern(e,n,a,o,s)}r(o)},In=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n,"date")&&!e.required)return r();if(y.required(e,n,a,o,s),!O(n,"date")){var f;n instanceof Date?f=n:f=new Date(n),y.type(e,f,a,o,s),f&&y.range(e,f.getTime(),a,o,s)}}r(o)},En=function(e,n,r,a,s){var o=[],l=Array.isArray(n)?"array":typeof n;y.required(e,n,a,o,s,l),r(o)},We=function(e,n,r,a,s){var o=e.type,l=[],f=e.required||!e.required&&a.hasOwnProperty(e.field);if(f){if(O(n,o)&&!e.required)return r();y.required(e,n,a,l,s,o),O(n,o)||y.type(e,n,a,l,s)}r(l)},jn=function(e,n,r,a,s){var o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(O(n)&&!e.required)return r();y.required(e,n,a,o,s)}r(o)},ke={string:_n,method:xn,number:kn,boolean:Rn,regexp:$n,integer:Pn,float:qn,array:Fn,object:Sn,enum:An,pattern:Nn,date:In,url:We,hex:We,email:We,required:En,any:jn};function Ue(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var He=Ue(),ge=function(){function i(n){this.rules=null,this._messages=He,this.define(n)}var e=i.prototype;return e.define=function(r){var a=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(s){var o=r[s];a.rules[s]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=ot(Ue(),r)),this._messages},e.validate=function(r,a,s){var o=this;a===void 0&&(a={}),s===void 0&&(s=function(){});var l=r,f=a,d=s;if(typeof f=="function"&&(d=f,f={}),!this.rules||Object.keys(this.rules).length===0)return d&&d(null,l),Promise.resolve(l);function u(m){var b=[],p={};function q(_){if(Array.isArray(_)){var N;b=(N=b).concat.apply(N,_)}else b.push(_)}for(var v=0;v<m.length;v++)q(m[v]);b.length?(p=De(b),d(b,p)):d(null,l)}if(f.messages){var g=this.messages();g===He&&(g=Ue()),ot(g,f.messages),f.messages=g}else f.messages=this.messages();var h={},w=f.keys||Object.keys(this.rules);w.forEach(function(m){var b=o.rules[m],p=l[m];b.forEach(function(q){var v=q;typeof v.transform=="function"&&(l===r&&(l=oe({},l)),p=l[m]=v.transform(p)),typeof v=="function"?v={validator:v}:v=oe({},v),v.validator=o.getValidationMethod(v),v.validator&&(v.field=m,v.fullField=v.fullField||m,v.type=o.getType(v),h[m]=h[m]||[],h[m].push({rule:v,value:p,source:l,field:m}))})});var c={};return cn(h,f,function(m,b){var p=m.rule,q=(p.type==="object"||p.type==="array")&&(typeof p.fields=="object"||typeof p.defaultField=="object");q=q&&(p.required||!p.required&&m.value),p.field=m.field;function v(A,K){return oe({},K,{fullField:p.fullField+"."+A,fullFields:p.fullFields?[].concat(p.fullFields,[A]):[A]})}function _(A){A===void 0&&(A=[]);var K=Array.isArray(A)?A:[A];!f.suppressWarning&&K.length&&i.warning("async-validator:",K),K.length&&p.message!==void 0&&(K=[].concat(p.message));var I=K.map(at(p,l));if(f.first&&I.length)return c[p.field]=1,b(I);if(!q)b(I);else{if(p.required&&!m.value)return p.message!==void 0?I=[].concat(p.message).map(at(p,l)):f.error&&(I=[f.error(p,B(f.messages.required,p.field))]),b(I);var te={};p.defaultField&&Object.keys(m.value).map(function(E){te[E]=p.defaultField}),te=oe({},te,m.rule.fields);var ve={};Object.keys(te).forEach(function(E){var T=te[E],x=Array.isArray(T)?T:[T];ve[E]=x.map(v.bind(null,E))});var be=new i(ve);be.messages(f.messages),m.rule.options&&(m.rule.options.messages=f.messages,m.rule.options.error=f.error),be.validate(m.value,m.rule.options||f,function(E){var T=[];I&&I.length&&T.push.apply(T,I),E&&E.length&&T.push.apply(T,E),b(T.length?T:null)})}}var N;if(p.asyncValidator)N=p.asyncValidator(p,m.value,_,m.source,f);else if(p.validator){try{N=p.validator(p,m.value,_,m.source,f)}catch(A){console.error==null||console.error(A),f.suppressValidatorError||setTimeout(function(){throw A},0),_(A.message)}N===!0?_():N===!1?_(typeof p.message=="function"?p.message(p.fullField||p.field):p.message||(p.fullField||p.field)+" fails"):N instanceof Array?_(N):N instanceof Error&&_(N.message)}N&&N.then&&N.then(function(){return _()},function(A){return _(A)})},function(m){u(m)},l)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!ke.hasOwnProperty(r.type))throw new Error(B("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var a=Object.keys(r),s=a.indexOf("message");return s!==-1&&a.splice(s,1),a.length===1&&a[0]==="required"?ke.required:ke[this.getType(r)]||void 0},i}();ge.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");ke[e]=n};ge.warning=ln;ge.messages=He;ge.validators=ke;function Cn(i){const e=he(Se,null);return{mergedSize:k(()=>i.size!==void 0?i.size:(e==null?void 0:e.props.size)!==void 0?e.props.size:"medium")}}function Mn(i){const e=he(Se,null),n=k(()=>{const{labelPlacement:c}=i;return c!==void 0?c:e!=null&&e.props.labelPlacement?e.props.labelPlacement:"top"}),r=k(()=>n.value==="left"&&(i.labelWidth==="auto"||(e==null?void 0:e.props.labelWidth)==="auto")),a=k(()=>{if(n.value==="top")return;const{labelWidth:c}=i;if(c!==void 0&&c!=="auto")return ee(c);if(r.value){const m=e==null?void 0:e.maxChildLabelWidthRef.value;return m!==void 0?ee(m):void 0}if((e==null?void 0:e.props.labelWidth)!==void 0)return ee(e.props.labelWidth)}),s=k(()=>{const{labelAlign:c}=i;if(c)return c;if(e!=null&&e.props.labelAlign)return e.props.labelAlign}),o=k(()=>{var c;return[(c=i.labelProps)===null||c===void 0?void 0:c.style,i.labelStyle,{width:a.value}]}),l=k(()=>{const{showRequireMark:c}=i;return c!==void 0?c:e==null?void 0:e.props.showRequireMark}),f=k(()=>{const{requireMarkPlacement:c}=i;return c!==void 0?c:(e==null?void 0:e.props.requireMarkPlacement)||"right"}),d=j(!1),u=j(!1),g=k(()=>{const{validationStatus:c}=i;if(c!==void 0)return c;if(d.value)return"error";if(u.value)return"warning"}),h=k(()=>{const{showFeedback:c}=i;return c!==void 0?c:(e==null?void 0:e.props.showFeedback)!==void 0?e.props.showFeedback:!0}),w=k(()=>{const{showLabel:c}=i;return c!==void 0?c:(e==null?void 0:e.props.showLabel)!==void 0?e.props.showLabel:!0});return{validationErrored:d,validationWarned:u,mergedLabelStyle:o,mergedLabelPlacement:n,mergedLabelAlign:s,mergedShowRequireMark:l,mergedRequireMarkPlacement:f,mergedValidationStatus:g,mergedShowFeedback:h,mergedShowLabel:w,isAutoLabelWidth:r}}function Vn(i){const e=he(Se,null),n=k(()=>{const{rulePath:o}=i;if(o!==void 0)return o;const{path:l}=i;if(l!==void 0)return l}),r=k(()=>{const o=[],{rule:l}=i;if(l!==void 0&&(Array.isArray(l)?o.push(...l):o.push(l)),e){const{rules:f}=e.props,{value:d}=n;if(f!==void 0&&d!==void 0){const u=bt(f,d);u!==void 0&&(Array.isArray(u)?o.push(...u):o.push(u))}}return o}),a=k(()=>r.value.some(o=>o.required)),s=k(()=>a.value||i.required);return{mergedRules:r,mergedRequired:s}}const{cubicBezierEaseInOut:lt}=It;function zn({name:i="fade-down",fromOffset:e="-4px",enterDuration:n=".3s",leaveDuration:r=".3s",enterCubicBezier:a=lt,leaveCubicBezier:s=lt}={}){return[ae(`&.${i}-transition-enter-from, &.${i}-transition-leave-to`,{opacity:0,transform:`translateY(${e})`}),ae(`&.${i}-transition-enter-to, &.${i}-transition-leave-from`,{opacity:1,transform:"translateY(0)"}),ae(`&.${i}-transition-leave-active`,{transition:`opacity ${r} ${s}, transform ${r} ${s}`}),ae(`&.${i}-transition-enter-active`,{transition:`opacity ${n} ${a}, transform ${n} ${a}`})]}const Ln=W("form-item",`
 display: grid;
 line-height: var(--n-line-height);
`,[W("form-item-label",`
 grid-area: label;
 align-items: center;
 line-height: 1.25;
 text-align: var(--n-label-text-align);
 font-size: var(--n-label-font-size);
 min-height: var(--n-label-height);
 padding: var(--n-label-padding);
 color: var(--n-label-text-color);
 transition: color .3s var(--n-bezier);
 box-sizing: border-box;
 font-weight: var(--n-label-font-weight);
 `,[we("asterisk",`
 white-space: nowrap;
 user-select: none;
 -webkit-user-select: none;
 color: var(--n-asterisk-color);
 transition: color .3s var(--n-bezier);
 `),we("asterisk-placeholder",`
 grid-area: mark;
 user-select: none;
 -webkit-user-select: none;
 visibility: hidden; 
 `)]),W("form-item-blank",`
 grid-area: blank;
 min-height: var(--n-blank-height);
 `),M("auto-label-width",[W("form-item-label","white-space: nowrap;")]),M("left-labelled",`
 grid-template-areas:
 "label blank"
 "label feedback";
 grid-template-columns: auto minmax(0, 1fr);
 grid-template-rows: auto 1fr;
 align-items: flex-start;
 `,[W("form-item-label",`
 display: grid;
 grid-template-columns: 1fr auto;
 min-height: var(--n-blank-height);
 height: auto;
 box-sizing: border-box;
 flex-shrink: 0;
 flex-grow: 0;
 `,[M("reverse-columns-space",`
 grid-template-columns: auto 1fr;
 `),M("left-mark",`
 grid-template-areas:
 "mark text"
 ". text";
 `),M("right-mark",`
 grid-template-areas: 
 "text mark"
 "text .";
 `),M("right-hanging-mark",`
 grid-template-areas: 
 "text mark"
 "text .";
 `),we("text",`
 grid-area: text; 
 `),we("asterisk",`
 grid-area: mark; 
 align-self: end;
 `)])]),M("top-labelled",`
 grid-template-areas:
 "label"
 "blank"
 "feedback";
 grid-template-rows: minmax(var(--n-label-height), auto) 1fr;
 grid-template-columns: minmax(0, 100%);
 `,[M("no-label",`
 grid-template-areas:
 "blank"
 "feedback";
 grid-template-rows: 1fr;
 `),W("form-item-label",`
 display: flex;
 align-items: flex-start;
 justify-content: var(--n-label-text-align);
 `)]),W("form-item-blank",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 position: relative;
 `),W("form-item-feedback-wrapper",`
 grid-area: feedback;
 box-sizing: border-box;
 min-height: var(--n-feedback-height);
 font-size: var(--n-feedback-font-size);
 line-height: 1.25;
 transform-origin: top left;
 `,[ae("&:not(:empty)",`
 padding: var(--n-feedback-padding);
 `),W("form-item-feedback",{transition:"color .3s var(--n-bezier)",color:"var(--n-feedback-text-color)"},[M("warning",{color:"var(--n-feedback-text-color-warning)"}),M("error",{color:"var(--n-feedback-text-color-error)"}),zn({fromOffset:"-3px",enterDuration:".3s",leaveDuration:".2s"})])])]);var ft=function(i,e,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{d(r.next(u))}catch(g){o(g)}}function f(u){try{d(r.throw(u))}catch(g){o(g)}}function d(u){u.done?s(u.value):a(u.value).then(l,f)}d((r=r.apply(i,e||[])).next())})};const Ze=Object.assign(Object.assign({},Ve.props),{label:String,labelWidth:[Number,String],labelStyle:[String,Object],labelAlign:String,labelPlacement:String,path:String,first:Boolean,rulePath:String,required:Boolean,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:void 0},rule:[Object,Array],size:String,ignorePathChange:Boolean,validationStatus:String,feedback:String,showLabel:{type:Boolean,default:void 0},labelProps:Object}),Wn=pe(Ze);function dt(i,e){return(...n)=>{try{const r=i(...n);return!e&&(typeof r=="boolean"||r instanceof Error||Array.isArray(r))||r!=null&&r.then?r:(r===void 0||tt("form-item/validate",`You return a ${typeof r} typed value in the validator method, which is not recommended. Please use `+(e?"`Promise`":"`boolean`, `Error` or `Promise`")+" typed value instead."),!0)}catch(r){tt("form-item/validate","An error is catched in the validation, so the validation won't be done. Your callback in `validate` method of `n-form` or `n-form-item` won't be called in this validation."),console.error(r);return}}}const Bn=D({name:"FormItem",props:Ze,setup(i){Xt(wt,"formItems",_e(i,"path"));const{mergedClsPrefixRef:e,inlineThemeDisabled:n}=Ge(i),r=he(Se,null),a=Cn(i),s=Mn(i),{validationErrored:o,validationWarned:l}=s,{mergedRequired:f,mergedRules:d}=Vn(i),{mergedSize:u}=a,{mergedLabelPlacement:g,mergedLabelAlign:h,mergedRequireMarkPlacement:w}=s,c=j([]),m=j(nt()),b=r?_e(r.props,"disabled"):j(!1),p=Ve("Form","-form-item",Ln,gt,i,e);pt(_e(i,"path"),()=>{i.ignorePathChange||q()});function q(){c.value=[],o.value=!1,l.value=!1,i.feedback&&(m.value=nt())}function v(){I("blur")}function _(){I("change")}function N(){I("focus")}function A(){I("input")}function K(x,U){return ft(this,void 0,void 0,function*(){let V,z,ne,re;return typeof x=="string"?(V=x,z=U):x!==null&&typeof x=="object"&&(V=x.trigger,z=x.callback,ne=x.shouldRuleBeApplied,re=x.options),yield new Promise((le,fe)=>{I(V,ne,re).then(({valid:de,errors:Q,warnings:G})=>{de?(z&&z(void 0,{warnings:G}),le({warnings:G})):(z&&z(Q,{warnings:G}),fe(Q))})})})}const I=(x=null,U=()=>!0,V={suppressWarning:!0})=>ft(this,void 0,void 0,function*(){const{path:z}=i;V?V.first||(V.first=i.first):V={};const{value:ne}=d,re=r?bt(r.props.model,z||""):void 0,le={},fe={},de=(x?ne.filter(P=>Array.isArray(P.trigger)?P.trigger.includes(x):P.trigger===x):ne).filter(U).map((P,C)=>{const F=Object.assign({},P);if(F.validator&&(F.validator=dt(F.validator,!1)),F.asyncValidator&&(F.asyncValidator=dt(F.asyncValidator,!0)),F.renderMessage){const ie=`__renderMessage__${C}`;fe[ie]=F.message,F.message=ie,le[ie]=F.renderMessage}return F}),Q=de.filter(P=>P.level!=="warning"),G=de.filter(P=>P.level==="warning"),ue=z??"__n_no_path__",Oe=new ge({[ue]:Q}),Ae=new ge({[ue]:G}),{validateMessages:ye}=(r==null?void 0:r.props)||{};ye&&(Oe.messages(ye),Ae.messages(ye));const Ne=P=>{c.value=P.map(C=>{const F=(C==null?void 0:C.message)||"";return{key:F,render:()=>F.startsWith("__renderMessage__")?le[F]():F}}),P.forEach(C=>{var F;!((F=C.message)===null||F===void 0)&&F.startsWith("__renderMessage__")&&(C.message=fe[C.message])})},Y={valid:!0,errors:void 0,warnings:void 0};if(Q.length){const P=yield new Promise(C=>{Oe.validate({[ue]:re},V,C)});P!=null&&P.length&&(o.value=!0,Y.valid=!1,Y.errors=P,Ne(P))}if(G.length&&!Y.errors){const P=yield new Promise(C=>{Ae.validate({[ue]:re},V,C)});P!=null&&P.length&&(Ne(P),l.value=!0,Y.warnings=P)}return Q.length+G.length>0&&!Y.errors&&!Y.warnings&&q(),Y});Ce(Wt,{path:_e(i,"path"),disabled:b,mergedSize:a.mergedSize,mergedValidationStatus:s.mergedValidationStatus,restoreValidation:q,handleContentBlur:v,handleContentChange:_,handleContentFocus:N,handleContentInput:A});const te={validate:K,restoreValidation:q,internalValidate:I},ve=j(null);Et(()=>{if(!s.isAutoLabelWidth.value)return;const x=ve.value;if(x!==null){const U=x.style.whiteSpace;x.style.whiteSpace="nowrap",x.style.width="",r==null||r.deriveMaxChildLabelWidth(Number(getComputedStyle(x).width.slice(0,-2))),x.style.whiteSpace=U}});const be=k(()=>{var x;const{value:U}=u,{value:V}=g,z=V==="top"?"vertical":"horizontal",{common:{cubicBezierEaseInOut:ne},self:{labelTextColor:re,asteriskColor:le,lineHeight:fe,feedbackTextColor:de,feedbackTextColorWarning:Q,feedbackTextColorError:G,feedbackPadding:ue,labelFontWeight:Oe,[X("labelHeight",U)]:Ae,[X("blankHeight",U)]:ye,[X("feedbackFontSize",U)]:Ne,[X("feedbackHeight",U)]:Y,[X("labelPadding",z)]:P,[X("labelTextAlign",z)]:C,[X(X("labelFontSize",V),U)]:F}}=p.value;let ie=(x=h.value)!==null&&x!==void 0?x:C;return V==="top"&&(ie=ie==="right"?"flex-end":"flex-start"),{"--n-bezier":ne,"--n-line-height":fe,"--n-blank-height":ye,"--n-label-font-size":F,"--n-label-text-align":ie,"--n-label-height":Ae,"--n-label-padding":P,"--n-label-font-weight":Oe,"--n-asterisk-color":le,"--n-label-text-color":re,"--n-feedback-padding":ue,"--n-feedback-font-size":Ne,"--n-feedback-height":Y,"--n-feedback-text-color":de,"--n-feedback-text-color-warning":Q,"--n-feedback-text-color-error":G}}),E=n?Ht("form-item",k(()=>{var x;return`${u.value[0]}${g.value[0]}${((x=h.value)===null||x===void 0?void 0:x[0])||""}`}),be,i):void 0,T=k(()=>g.value==="left"&&w.value==="left"&&h.value==="left");return Object.assign(Object.assign(Object.assign(Object.assign({labelElementRef:ve,mergedClsPrefix:e,mergedRequired:f,feedbackId:m,renderExplains:c,reverseColSpace:T},s),a),te),{cssVars:n?void 0:be,themeClass:E==null?void 0:E.themeClass,onRender:E==null?void 0:E.onRender})},render(){const{$slots:i,mergedClsPrefix:e,mergedShowLabel:n,mergedShowRequireMark:r,mergedRequireMarkPlacement:a,onRender:s}=this,o=r!==void 0?r:this.mergedRequired;s==null||s();const l=()=>{const f=this.$slots.label?this.$slots.label():this.label;if(!f)return null;const d=S("span",{class:`${e}-form-item-label__text`},f),u=o?S("span",{class:`${e}-form-item-label__asterisk`},a!=="left"?" *":"* "):a==="right-hanging"&&S("span",{class:`${e}-form-item-label__asterisk-placeholder`}," *"),{labelProps:g}=this;return S("label",Object.assign({},g,{class:[g==null?void 0:g.class,`${e}-form-item-label`,`${e}-form-item-label--${a}-mark`,this.reverseColSpace&&`${e}-form-item-label--reverse-columns-space`],style:this.mergedLabelStyle,ref:"labelElementRef"}),a==="left"?[u,d]:[d,u])};return S("div",{class:[`${e}-form-item`,this.themeClass,`${e}-form-item--${this.mergedSize}-size`,`${e}-form-item--${this.mergedLabelPlacement}-labelled`,this.isAutoLabelWidth&&`${e}-form-item--auto-label-width`,!n&&`${e}-form-item--no-label`],style:this.cssVars},n&&l(),S("div",{class:[`${e}-form-item-blank`,this.mergedValidationStatus&&`${e}-form-item-blank--${this.mergedValidationStatus}`]},i),this.mergedShowFeedback?S("div",{key:this.feedbackId,class:`${e}-form-item-feedback-wrapper`},S(jt,{name:"fade-down-transition",mode:"out-in"},{default:()=>{const{mergedValidationStatus:f}=this;return Bt(i.feedback,d=>{var u;const{feedback:g}=this,h=d||g?S("div",{key:"__feedback__",class:`${e}-form-item-feedback__line`},d||g):this.renderExplains.length?(u=this.renderExplains)===null||u===void 0?void 0:u.map(({key:w,render:c})=>S("div",{key:w,class:`${e}-form-item-feedback__line`},c())):null;return h?f==="warning"?S("div",{key:"controlled-warning",class:`${e}-form-item-feedback ${e}-form-item-feedback--warning`},h):f==="error"?S("div",{key:"controlled-error",class:`${e}-form-item-feedback ${e}-form-item-feedback--error`},h):f==="success"?S("div",{key:"controlled-success",class:`${e}-form-item-feedback ${e}-form-item-feedback--success`},h):S("div",{key:"controlled-default",class:`${e}-form-item-feedback`},h):null})}})):null)}}),Tn=Tt(24,null).map((i,e)=>{const n=e+1,r=`calc(100% / 24 * ${n})`;return[M(`${n}-span`,{width:r}),M(`${n}-offset`,{marginLeft:r}),M(`${n}-push`,{left:r}),M(`${n}-pull`,{right:r})]}),Dn=ae([W("row",{width:"100%",display:"flex",flexWrap:"wrap"}),W("col",{verticalAlign:"top",boxSizing:"border-box",display:"inline-block",position:"relative",zIndex:"auto"},[we("box",{position:"relative",zIndex:"auto",width:"100%",height:"100%"}),Tn])]),kt=Ke("n-row"),Qe={gutter:{type:[Array,Number,String],default:0},alignItems:String,justifyContent:String},Un=pe(Qe),Hn=D({name:"Row",props:Qe,setup(i){const{mergedClsPrefixRef:e,mergedRtlRef:n}=Ge(i);Dt("-legacy-grid",Dn,e);const r=Ut("Row",n,e),a=Ie(()=>{const{gutter:o}=i;return Array.isArray(o)&&o[1]||0}),s=Ie(()=>{const{gutter:o}=i;return Array.isArray(o)?o[0]:Number(o)});return Ce(kt,{mergedClsPrefixRef:e,gutterRef:_e(i,"gutter"),verticalGutterRef:a,horizontalGutterRef:s}),{mergedClsPrefix:e,rtlEnabled:r,styleMargin:Ie(()=>`-${ee(a.value,{c:.5})} -${ee(s.value,{c:.5})}`),styleWidth:Ie(()=>`calc(100% + ${ee(s.value)})`)}},render(){return S("div",{class:[`${this.mergedClsPrefix}-row`,this.rtlEnabled&&`${this.mergedClsPrefix}-row--rtl`],style:{margin:this.styleMargin,width:this.styleWidth,alignItems:this.alignItems,justifyContent:this.justifyContent}},this.$slots)}}),Xe={span:{type:[String,Number],default:1},push:{type:[String,Number],default:0},pull:{type:[String,Number],default:0},offset:{type:[String,Number],default:0}},Kn=pe(Xe),Gn=D({name:"Col",props:Xe,setup(i){const e=he(kt,null);return e||Ct("col","`n-col` must be placed inside `n-row`."),{mergedClsPrefix:e.mergedClsPrefixRef,gutter:e.gutterRef,stylePadding:k(()=>`${ee(e.verticalGutterRef.value,{c:.5})} ${ee(e.horizontalGutterRef.value,{c:.5})}`),mergedPush:k(()=>Number(i.push)-Number(i.pull))}},render(){const{$slots:i,span:e,mergedPush:n,offset:r,stylePadding:a,gutter:s,mergedClsPrefix:o}=this;return S("div",{class:[`${o}-col`,{[`${o}-col--${e}-span`]:!0,[`${o}-col--${n}-push`]:n>0,[`${o}-col--${-n}-pull`]:n<0,[`${o}-col--${r}-offset`]:r}],style:{padding:a}},s?S("div",null,i):i)}}),et=Object.assign(Object.assign({},Xe),Ze),Yn=pe(et),Jn=D({name:"FormItemCol",props:et,setup(){const i=j(null);return{formItemInstRef:i,validate:(...r)=>{const{value:a}=i;if(a)return a.validate(...r)},restoreValidation:()=>{const{value:r}=i;r&&r.restoreValidation()}}},render(){return S(Gn,Me(this.$props,Kn),{default:()=>{const i=Me(this.$props,Wn);return S(Bn,Object.assign({ref:"formItemInstRef"},i),this.$slots)}})}}),Zn=Object.assign(Object.assign({},Qe),et),Rt=D({name:"FormItemRow",props:Zn,setup(){const i=j(null);return{formItemColInstRef:i,validate:(...r)=>{const{value:a}=i;if(a)return a.validate(...r)},restoreValidation:()=>{const{value:r}=i;r&&r.restoreValidation()}}},render(){return S(Hn,Me(this.$props,Un),{default:()=>{const i=Me(this.$props,Yn);return S(Jn,Object.assign(Object.assign({ref:"formItemColInstRef"},i),{span:24}),this.$slots)}})}}),Qn=D({__name:"AuthorizedFormVue",emits:["next","beforeNext"],setup(i,{emit:e}){let n=qe(Fe);const r=e,a=k(()=>!!window.nostr),s=j([["horse","https://github.com/fiatjaf/horse"],["nos2x","https://github.com/fiatjaf/nos2x"],["Alby","https://getalby.com/"],["Blockcore","https://www.blockcore.net/wallet"],["nos2x-fox","https://diegogurpegui.com/nos2x-fox/"],["Flamingo","https://www.getflamingo.org/"]]);function o(){r("beforeNext"),n.windowNostrLogin(),r("next")}function l(d){window.open(d)}const f=j(window.nostr);return(d,u)=>{const g=Le,h=vt,w=Ot;return J(),se(h,{class:"flex flex-col",vertical:""},{default:R(()=>[L(a)?zt("",!0):(J(),se(w,{key:0,class:"mt-2",title:d.t("note"),type:"warning"},{default:R(()=>[ze("p",null,Z(d.t("authorized_form_not_floud_nostr_tip")),1),$(h,null,{default:R(()=>[(J(!0),ht(Vt,null,Mt(L(s),([c,m])=>(J(),se(g,{text:"",onClick:b=>l(m)},{default:R(()=>[me(Z(c),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1},8,["title"])),$(w,{class:"mt-2",title:d.t("note"),type:"info"},{default:R(()=>[$(Ft,{addr:d.t("help_article")},{default:R(()=>[me(Z(d.t("help")),1)]),_:1},8,["addr"])]),_:1},8,["title"]),$(St,{nostr:L(f),disabled:!L(a)},null,8,["nostr","disabled"]),H(d.$slots,"prev-step"),$(g,{onClick:o,disabled:!L(a),class:"w-full",type:"primary"},{default:R(()=>[me(Z(d.t("next_step")),1)]),_:1},8,["disabled"])]),_:3})}}});function Pe(i,e=j(null)){const n=j(e);return Lt(()=>{n.value&&(n.value.inputElRef.autocomplete=i)}),e}const Xn=D({__name:"LoginForm",emits:["next","beforeNext"],setup(i,{emit:e}){const n=e;let r=qe(Fe);const a=Ye(),s=j(),o=Pe("current-password"),l=Pe("username"),f=k(()=>{if(s.value)try{return ut.fromString(s.value)}catch{return null}}),d=k(()=>f.value&&f.value.getPubkey());function u(){if(!s.value){a.error("请输入私钥");return}if(!f.value){a.error("您输入的既不是nsec,也不是hex");return}n("beforeNext"),r.loginPrikey(f.value),n("next")}return(g,h)=>{const w=Je,c=Rt,m=Le,b=_t;return J(),se(b,null,{default:R(()=>[$(c,{label:g.t("pubkey")},{default:R(()=>{var p;return[$(w,{ref_key:"pubkeyInput",ref:l,placeholder:g.t("pubkey"),"show-password-on":"click",value:(p=L(d))==null?void 0:p.toHex(),disabled:!0},null,8,["placeholder","value"])]}),_:1},8,["label"]),$(c,{label:g.t("prikey")},{default:R(()=>[$(w,{ref_key:"prikeyInput",ref:o,placeholder:g.t("prikey"),"show-password-on":"click",value:L(s),"onUpdate:value":h[0]||(h[0]=p=>Re(s)?s.value=p:null),type:"password"},null,8,["placeholder","value"])]),_:1},8,["label"]),H(g.$slots,"prev-step"),$(m,{class:"mt-2",type:"primary",block:"",strong:"",onClick:u,disabled:!L(f)},{default:R(()=>[me(Z(g.t("login")),1)]),_:1},8,["disabled"])]),_:3})}}}),er=D({__name:"NostrConnectForm",emits:["next","beforeNext"],setup(i,{emit:e}){const n=e,r=yt(),a=Ye(),s=ct("pubkey-input-value","",{}),o=k(()=>{if(s.value)try{return new URL(s.value)}catch{return}}),l=k(()=>{var c;return(c=o.value)==null?void 0:c.pathname.slice(2)}),f=k(()=>{var c;return new Set((c=o.value)==null?void 0:c.searchParams.getAll("relay"))}),d=Kt(),u=qe(Fe);async function g(){if(!l.value)return;n("beforeNext");const c=new $t(u,Pt.fromHex(l.value),f.value);r==null||r.setHook(async()=>{l.value&&d.info({title:t("note"),content:t("nostr_connect_tip"),positiveText:t("yes"),onPositiveClick:()=>{}})});try{await h(l.value,c),u.loginApi(mt.NostrConnect,c),n("next")}catch(m){a.error(`连接失败:${String(m)}}`)}}async function h(c,m){await m.connect(),localStorage.setItem("bunker",s.value)}const w=Pe("username");return(c,m)=>{const b=Je,p=Le,q=vt;return J(),se(q,{class:"flex flex-col",vertical:""},{default:R(()=>[ze("p",null,Z(c.t("device_pubkey"))+" "+Z(),1),$(b,{ref_key:"pubkeyInput",ref:w,placeholder:c.t("bunker"),"show-password-on":"click",value:L(s),"onUpdate:value":m[0]||(m[0]=v=>Re(s)?s.value=v:null)},null,8,["placeholder","value"]),H(c.$slots,"prev-step"),$(p,{disabled:!L(l),onClick:g,class:"w-full",type:"primary"},{default:R(()=>[me(Z(c.t("next_step")),1)]),_:1},8,["disabled"])]),_:3})}}}),tr={class:"mt-4"},nr=D({__name:"RegistrationForm",emits:["next","beforeNext"],setup(i,{emit:e}){const n=e;Ye();let r=qe(Fe);const a=Pe("new-password"),s=Pe("username"),o=j(ut.create()),l=k(()=>o.value.getPubkey()),f=k(()=>o.value.getNsec()),d=k(()=>l.value.getNpub()),u=j({});function g(){n("beforeNext"),r.registerPrikey(o.value),n("next")}const h=yt();h==null||h.setHook(async()=>{r.testAndVerifyNewUser()&&await w(),r.clearNewUserFlag()});async function w(){}return(c,m)=>{const b=Je,p=Rt,q=Le,v=_t;return J(),se(v,null,{default:R(()=>[$(p,{label:c.t("pubkey")},{default:R(()=>[$(b,{ref_key:"pubkeyInput",ref:s,placeholder:"",value:L(d),"onUpdate:value":m[0]||(m[0]=_=>Re(d)?d.value=_:null),disabled:""},null,8,["value"])]),_:1},8,["label"]),$(p,{label:c.t("prikey")},{default:R(()=>[$(b,{ref_key:"prikeyInput",ref:a,placeholder:"","show-password-on":"click",value:L(f),"onUpdate:value":m[1]||(m[1]=_=>Re(f)?f.value=_:null),type:"password",disabled:""},null,8,["value"])]),_:1},8,["label"]),$(Gt,{userMetadata:L(u)},null,8,["userMetadata"]),ze("div",tr,[H(c.$slots,"prev-step")]),$(q,{class:"mt-2",type:"primary",block:"",strong:"",onClick:g},{default:R(()=>[me(Z(c.t("logon")),1)]),_:1})]),_:3})}}}),rr={class:"px-2 box-border"},ir=D({__name:"Login",emits:["next"],setup(i,{emit:e}){const n=qe(Fe),r=e,a=ct("__login-active-name","signin");function s(){localStorage.removeItem(qt),n.setNostrApiMode(mt.NotLogin)}function o(){r("next")}return(l,f)=>{const d=Yt,u=Jt;return J(),ht("div",rr,[$(u,{value:L(a),"onUpdate:value":f[0]||(f[0]=g=>Re(a)?a.value=g:null),"default-value":"signin",size:"large",animated:"",style:{margin:"0 -4px"},"pane-style":"padding-left: 4px; padding-right: 4px; box-sizing: border-box;"},{default:R(()=>[$(d,{name:"signin",tab:l.t("login"),"display-directive":"show:lazy"},{default:R(()=>[$(Xn,{onNext:o,onBeforeNext:s},{"prev-step":R(()=>[H(l.$slots,"prev-step")]),_:3})]),_:3},8,["tab"]),$(d,{name:"signup",tab:l.t("logon"),"display-directive":"show:lazy"},{default:R(()=>[$(nr,{onNext:o,onBeforeNext:s},{"prev-step":R(()=>[H(l.$slots,"prev-step")]),_:3})]),_:3},8,["tab"]),$(d,{name:"authorized",tab:l.t("authorized"),"display-directive":"show:lazy"},{default:R(()=>[$(Qn,{onNext:o,onBeforeNext:s},{"prev-step":R(()=>[H(l.$slots,"prev-step")]),_:3})]),_:3},8,["tab"]),$(d,{name:"nostr_connect",tab:l.t("nostr_connect"),"display-directive":"show:lazy"},{default:R(()=>[$(er,{onNext:o,onBeforeNext:s},{"prev-step":R(()=>[H(l.$slots,"prev-step")]),_:3})]),_:3},8,["tab"])]),_:3},8,["value"])])}}}),ar={class:"mt-6"},ri=D({__name:"logonView",setup(i){const{nextStep:e}=Qt();function n(){e()}return(r,a)=>(J(),se(Zt,null,{header:R(()=>[H(r.$slots,"default")]),default:R(()=>[ze("div",ar,[$(ir,{onNext:n},{"prev-step":R(()=>[H(r.$slots,"prev-step")]),_:3})])]),_:3}))}});export{ri as default};
