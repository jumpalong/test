import{s as d,u,p as s,ah as _,E as f,m as h,af as g}from"./ProvideEventLine-BcjESPsS.js";import{_ as y}from"./ChannelMetadataEdit.vue_vue_type_script_setup_true_lang-BAloEdh6.js";import{f as C,S as L,L as v,o as S,m as w,w as m,n as p,q as M,y as b,z as E}from"./index-DVMYH3P6.js";import{b as N}from"./Button-Czpa3xjC.js";import{_ as k}from"./Space-CvpcAwGw.js";import"./utils-BXkRfzfk.js";import"./UploadInput.vue_vue_type_script_setup_true_lang-GWeWrTtb.js";import"./UploadButton.vue_vue_type_script_setup_true_lang-DLAEcrTL.js";import"./is-browser-BikuuYFQ.js";import"./Icon-DjYnwRew.js";import"./Add-B8K751Td.js";import"./use-rtl-CqBkFAUg.js";import"./format-length-B-p6aW7q.js";import"./Warning-CFOd0oLB.js";import"./replaceable-DvMWTdGr.js";import"./use-css-vars-class-DpRsL9zm.js";import"./Image-Dkv-cPOO.js";import"./utils-ByHrdkP9.js";import"./Scrollbar-BXVF4b7l.js";import"./fade-in-scale-up.cssr-CUPxiz5B.js";import"./use-locale-CYSJLCZe.js";import"./Follower-R8EgPpAd.js";import"./Tooltip-BuuQH49V.js";import"./Popover-C3ccDlka.js";import"./use-compitable-CysNw4x-.js";import"./download-sglA049O.js";import"./Input-Bl1B22BO.js";import"./index-vZmvdULR.js";import"./fade-in-height-expand.cssr-JdnZy7mo.js";import"./Icon-affED87R.js";import"./get-slot-Bk_rJcZu.js";const st=C({__name:"CreateChannelView",setup(x){const a=L(),c=d();let n=u(s.ListSynchronizerManager.Staff,_);const i=v({});async function l(){if(!i.value.name){a.warning("请输入channelName");return}const t=n.createChild().add(f,h,g);let e=await t.createEvent({kind:40,content:JSON.stringify(i.value)});t.addPublish(e,{onOK:c}),t.initedAddWrite();let r=(await n.relayConfigurator.initedGetReadList()).values().next().value;e?(n.listSynchronizerManager.getInitStandardListSynchronizer(s.ListEnum.PublicChats).add({type:"e",id:e.id,relay:r}),a.success("创建成功")):a.warning("没有创建成功")}return(t,e)=>{const o=N,r=k;return S(),w(r,{vertical:""},{default:m(()=>[p(y,{channelMetadata:M(i)},null,8,["channelMetadata"]),p(o,{onClick:l},{default:m(()=>[b(E(t.t("create")),1)]),_:1})]),_:1})}}});export{st as default};
