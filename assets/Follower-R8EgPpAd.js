import{L as A,bE as H,H as I,G as ee,O as k,I as S,i as w,j as $,Q as D,y as fe,F as ce,bD as me,f as X,p as ve,bf as te,N as O,k as xe,h as Z,bv as be,bh as ye,ag as we}from"./index-DVMYH3P6.js";import{o as _,b as j,c as $e,d as Me,e as E}from"./Scrollbar-BXVF4b7l.js";import{e as ge}from"./Button-Czpa3xjC.js";function ze(n){const e=A(!!n.value);if(e.value)return H(e);const t=I(n,o=>{o&&(e.value=!0,t())});return H(e)}function Qe(){return ee()!==null}const Ie=typeof window<"u";let z,B;const Be=()=>{var n,e;z=Ie?(e=(n=document)===null||n===void 0?void 0:n.fonts)===null||e===void 0?void 0:e.ready:void 0,B=!1,z!==void 0?z.then(()=>{B=!0}):B=!0};Be();function Ae(n){if(B)return;let e=!1;k(()=>{B||z==null||z.then(()=>{e||n()})}),S(()=>{e=!0})}const Je=w("n-internal-select-menu"),Ee=w("n-internal-select-menu-body"),Ce=w("n-modal-body"),Ne=w("n-modal-provider"),Re=w("n-modal"),Oe=w("n-drawer-body"),et=w("n-drawer"),Ze=w("n-popover-body"),ne="__disabled__";function oe(n){const e=$(Ce,null),t=$(Oe,null),o=$(Ze,null),r=$(Ee,null),h=A();if(typeof document<"u"){h.value=document.fullscreenElement;const u=()=>{h.value=document.fullscreenElement};k(()=>{_("fullscreenchange",document,u)}),S(()=>{j("fullscreenchange",document,u)})}return D(()=>{var u;const{to:f}=n;return f!==void 0?f===!1?ne:f===!0?h.value||"body":f:e!=null&&e.value?(u=e.value.$el)!==null&&u!==void 0?u:e.value:t!=null&&t.value?t.value:o!=null&&o.value?o.value:r!=null&&r.value?r.value:f??(h.value||"body")})}oe.tdkey=ne;oe.propTo={type:[String,Object,Boolean],default:void 0};function K(n,e,t="default"){const o=e[t];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return o()}function W(n,e=!0,t=[]){return n.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&t.push(fe(String(o)));return}if(Array.isArray(o)){W(o,e,t);return}if(o.type===ce){if(o.children===null)return;Array.isArray(o.children)&&W(o.children,e,t)}else o.type!==me&&t.push(o)}}),t}function Q(n,e,t="default"){const o=e[t];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const r=W(o());if(r.length===1)return r[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let y=null;function re(){if(y===null&&(y=document.getElementById("v-binder-view-measurer"),y===null)){y=document.createElement("div"),y.id="v-binder-view-measurer";const{style:n}=y;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(y)}return y.getBoundingClientRect()}function je(n,e){const t=re();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function L(n){const e=n.getBoundingClientRect(),t=re();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function Se(n){return n.nodeType===9?null:n.parentNode}function ie(n){if(n===null)return null;const e=Se(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return ie(e)}const Xe=X({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;ve("VBinder",(e=ee())===null||e===void 0?void 0:e.proxy);const t=$("VBinder",null),o=A(null),r=s=>{o.value=s,t&&n.syncTargetWithParent&&t.setTargetRef(s)};let h=[];const u=()=>{let s=o.value;for(;s=ie(s),s!==null;)h.push(s);for(const v of h)_("scroll",v,x,!0)},f=()=>{for(const s of h)j("scroll",s,x,!0);h=[]},l=new Set,m=s=>{l.size===0&&u(),l.has(s)||l.add(s)},b=s=>{l.has(s)&&l.delete(s),l.size===0&&f()},x=()=>{$e(i)},i=()=>{l.forEach(s=>s())},d=new Set,p=s=>{d.size===0&&_("resize",window,c),d.has(s)||d.add(s)},a=s=>{d.has(s)&&d.delete(s),d.size===0&&j("resize",window,c)},c=()=>{d.forEach(s=>s())};return S(()=>{j("resize",window,c),f()}),{targetRef:o,setTargetRef:r,addScrollListener:m,removeScrollListener:b,addResizeListener:p,removeResizeListener:a}},render(){return K("binder",this.$slots)}}),tt=Xe,nt=X({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=$("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?te(Q("follower",this.$slots),[[e]]):Q("follower",this.$slots)}});function Ye(n,e){console.error(`[vdirs/${n}]: ${e}`)}class Ve{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,t){const{elementZIndex:o}=this;if(t!==void 0){e.style.zIndex=`${t}`,o.delete(e);return}const{nextZIndex:r}=this;o.has(e)&&o.get(e)+1===this.nextZIndex||(e.style.zIndex=`${r}`,o.set(e,r),this.nextZIndex=r+1,this.squashState())}unregister(e,t){const{elementZIndex:o}=this;o.has(e)?o.delete(e):t===void 0&&Ye("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort((t,o)=>t[1]-o[1]),this.nextZIndex=2e3,e.forEach(t=>{const o=t[0],r=this.nextZIndex++;`${r}`!==o.style.zIndex&&(o.style.zIndex=`${r}`)})}}const T=new Ve,g="@@ziContext",Le={mounted(n,e){const{value:t={}}=e,{zIndex:o,enabled:r}=t;n[g]={enabled:!!r,initialized:!1},r&&(T.ensureZIndex(n,o),n[g].initialized=!0)},updated(n,e){const{value:t={}}=e,{zIndex:o,enabled:r}=t,h=n[g].enabled;r&&!h&&(T.ensureZIndex(n,o),n[g].initialized=!0),n[g].enabled=!!r},unmounted(n,e){if(!n[g].initialized)return;const{value:t={}}=e,{zIndex:o}=t;T.unregister(n,o)}},Te=Le,Fe=X({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:ze(O(n,"show")),mergedTo:xe(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?K("lazy-teleport",this.$slots):Z(be,{disabled:this.disabled,to:this.mergedTo},K("lazy-teleport",this.$slots)):null}}),C={top:"bottom",bottom:"top",left:"right",right:"left"},J={start:"end",center:"center",end:"start"},F={top:"height",bottom:"height",left:"width",right:"width"},De={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},_e={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Ke={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},N={top:!0,bottom:!1,left:!0,right:!1},R={top:"end",bottom:"start",left:"end",right:"start"};function We(n,e,t,o,r,h){if(!r||h)return{placement:n,top:0,left:0};const[u,f]=n.split("-");let l=f??"center",m={top:0,left:0};const b=(d,p,a)=>{let c=0,s=0;const v=t[d]-e[p]-e[d];return v>0&&o&&(a?s=N[p]?v:-v:c=N[p]?v:-v),{left:c,top:s}},x=u==="left"||u==="right";if(l!=="center"){const d=Ke[n],p=C[d],a=F[d];if(t[a]>e[a]){if(e[d]+e[a]<t[a]){const c=(t[a]-e[a])/2;e[d]<c||e[p]<c?e[d]<e[p]?(l=J[f],m=b(a,p,x)):m=b(a,d,x):l="center"}}else t[a]<e[a]&&e[p]<0&&e[d]>e[p]&&(l=J[f])}else{const d=u==="bottom"||u==="top"?"left":"top",p=C[d],a=F[d],c=(t[a]-e[a])/2;(e[d]<c||e[p]<c)&&(e[d]>e[p]?(l=R[d],m=b(a,d,x)):(l=R[p],m=b(a,p,x)))}let i=u;return e[u]<t[F[u]]&&e[u]<e[C[u]]&&(i=C[u]),{placement:l!=="center"?`${i}-${l}`:i,left:m.left,top:m.top}}function ke(n,e){return e?_e[n]:De[n]}function Pe(n,e,t,o,r,h){if(h)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width/2+r)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width/2+r)}px`,transform:"translateX(-50%)"}}}const qe=E([E(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),E(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[E("> *",{pointerEvents:"all"})])]),ot=X({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=$("VBinder"),t=D(()=>n.enabled!==void 0?n.enabled:n.show),o=A(null),r=A(null),h=()=>{const{syncTrigger:i}=n;i.includes("scroll")&&e.addScrollListener(l),i.includes("resize")&&e.addResizeListener(l)},u=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};k(()=>{t.value&&(l(),h())});const f=ye();qe.mount({id:"vueuc/binder",head:!0,anchorMetaName:Me,ssr:f}),S(()=>{u()}),Ae(()=>{t.value&&l()});const l=()=>{if(!t.value)return;const i=o.value;if(i===null)return;const d=e.targetRef,{x:p,y:a,overlap:c}=n,s=p!==void 0&&a!==void 0?je(p,a):L(d);i.style.setProperty("--v-target-width",`${Math.round(s.width)}px`),i.style.setProperty("--v-target-height",`${Math.round(s.height)}px`);const{width:v,minWidth:Y,placement:P,internalShift:se,flip:le}=n;i.setAttribute("v-placement",P),c?i.setAttribute("v-overlap",""):i.removeAttribute("v-overlap");const{style:M}=i;v==="target"?M.width=`${s.width}px`:v!==void 0?M.width=v:M.width="",Y==="target"?M.minWidth=`${s.width}px`:Y!==void 0?M.minWidth=Y:M.minWidth="";const de=L(i),ue=L(r.value),{left:q,top:U,placement:V}=We(P,s,de,se,le,c),G=ke(V,c),{left:ae,top:he,transform:pe}=Pe(V,ue,s,U,q,c);i.setAttribute("v-placement",V),i.style.setProperty("--v-offset-left",`${Math.round(q)}px`),i.style.setProperty("--v-offset-top",`${Math.round(U)}px`),i.style.transform=`translateX(${ae}) translateY(${he}) ${pe}`,i.style.setProperty("--v-transform-origin",G),i.style.transformOrigin=G};I(t,i=>{i?(h(),m()):u()});const m=()=>{we().then(l).catch(i=>console.error(i))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(i=>{I(O(n,i),l)}),["teleportDisabled"].forEach(i=>{I(O(n,i),m)}),I(O(n,"syncTrigger"),i=>{i.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),i.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)});const b=ge(),x=D(()=>{const{to:i}=n;if(i!==void 0)return i;b.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:r,followerRef:o,mergedTo:x,syncPosition:l}},render(){return Z(Fe,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=Z("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[Z("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?te(t,[[Te,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});export{Fe as L,tt as V,nt as a,ot as b,Ee as c,Oe as d,et as e,Ie as f,Re as g,Qe as h,Je as i,Ne as j,Ce as m,Ae as o,Ze as p,oe as u,Te as z};
